!function(){"use strict";let e=Document.prototype,t=Element.prototype;function n(e,t,n,r,o){s[i(e||"sock",t,n,r)]=o}function r(e,t,r){for(let o in r)n(e,t,!0,o,r[o])}function o(e,t,o,i,s){c[a(e,t)]=o,i&&function(e,t,r){for(let o in r)n(e,t,!1,o,r[o])}(e,t,i),s&&r(e,t,s)}function i(e,t,n,r){return`${e}:${t}:${n}:${r}`}function a(e,t){return`${e}:${t}`}t.requestFullscreen||t.webkitRequestFullscreen&&(Object.defineProperty(e,"fullscreenElement",{get(){return this.webkitFullscreenElement}}),Object.defineProperty(e,"fullscreenEnabled",{get(){return this.webkitFullscreenEnabled}}),e.exitFullscreen=function(){return this.webkitExitFullscreen(),Promise.resolve()},t.requestFullscreen=function(){return new Promise(((e,t)=>{let n=()=>{o(),e()},r=()=>{o(),t(new TypeError("failed to get fullscreen"))},o=()=>{this.removeEventListener("webkitfullscreenchange",n),this.removeEventListener("webkitfullscreenerror",r)};this.addEventListener("webkitfullscreenchange",n),this.addEventListener("webkitfullscreenerror",r),this.webkitRequestFullscreen()}))});let s={},c={};function l(e,t,n){return new Promise(((r,o)=>{let i=new XMLHttpRequest;i.responseType=t,i.open("GET",e),n&&(i.onprogress=e=>{e.lengthComputable&&n(e.loaded/e.total)}),i.onerror=()=>{o("Could not connect to server")},i.onload=()=>{200===i.status?r(i.response):o(i.status+": "+i.statusText+": "+e)},i.send()}))}function d(e){return new Promise((t=>{let n=new Image;n.onload=()=>{t(n)},n.onerror=()=>{t(null)},n.src=e}))}var u,f=(u=document.currentScript&&document.currentScript.src||new URL("sock.js",document.baseURI).href,function(e){var t,n;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,r){t=e,n=r})),Object.getOwnPropertyDescriptor(e.ready,"_malloc")||(Object.defineProperty(e.ready,"_malloc",{configurable:!0,get:function(){N("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_malloc",{configurable:!0,set:function(){N("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_realloc")||(Object.defineProperty(e.ready,"_realloc",{configurable:!0,get:function(){N("You are getting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_realloc",{configurable:!0,set:function(){N("You are setting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_free")||(Object.defineProperty(e.ready,"_free",{configurable:!0,get:function(){N("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_free",{configurable:!0,set:function(){N("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_init")||(Object.defineProperty(e.ready,"_sock_init",{configurable:!0,get:function(){N("You are getting _sock_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_init",{configurable:!0,set:function(){N("You are setting _sock_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_font")||(Object.defineProperty(e.ready,"_sock_font",{configurable:!0,get:function(){N("You are getting _sock_font on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_font",{configurable:!0,set:function(){N("You are setting _sock_font on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_new_buffer")||(Object.defineProperty(e.ready,"_sock_new_buffer",{configurable:!0,get:function(){N("You are getting _sock_new_buffer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_new_buffer",{configurable:!0,set:function(){N("You are setting _sock_new_buffer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetVersionNumber")||(Object.defineProperty(e.ready,"_wrenGetVersionNumber",{configurable:!0,get:function(){N("You are getting _wrenGetVersionNumber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetVersionNumber",{configurable:!0,set:function(){N("You are setting _wrenGetVersionNumber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInitConfiguration")||(Object.defineProperty(e.ready,"_wrenInitConfiguration",{configurable:!0,get:function(){N("You are getting _wrenInitConfiguration on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInitConfiguration",{configurable:!0,set:function(){N("You are setting _wrenInitConfiguration on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenNewVM")||(Object.defineProperty(e.ready,"_wrenNewVM",{configurable:!0,get:function(){N("You are getting _wrenNewVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenNewVM",{configurable:!0,set:function(){N("You are setting _wrenNewVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenFreeVM")||(Object.defineProperty(e.ready,"_wrenFreeVM",{configurable:!0,get:function(){N("You are getting _wrenFreeVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenFreeVM",{configurable:!0,set:function(){N("You are setting _wrenFreeVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenCollectGarbage")||(Object.defineProperty(e.ready,"_wrenCollectGarbage",{configurable:!0,get:function(){N("You are getting _wrenCollectGarbage on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenCollectGarbage",{configurable:!0,set:function(){N("You are setting _wrenCollectGarbage on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInterpret")||(Object.defineProperty(e.ready,"_wrenInterpret",{configurable:!0,get:function(){N("You are getting _wrenInterpret on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInterpret",{configurable:!0,set:function(){N("You are setting _wrenInterpret on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenMakeCallHandle")||(Object.defineProperty(e.ready,"_wrenMakeCallHandle",{configurable:!0,get:function(){N("You are getting _wrenMakeCallHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenMakeCallHandle",{configurable:!0,set:function(){N("You are setting _wrenMakeCallHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenCall")||(Object.defineProperty(e.ready,"_wrenCall",{configurable:!0,get:function(){N("You are getting _wrenCall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenCall",{configurable:!0,set:function(){N("You are setting _wrenCall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenReleaseHandle")||(Object.defineProperty(e.ready,"_wrenReleaseHandle",{configurable:!0,get:function(){N("You are getting _wrenReleaseHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenReleaseHandle",{configurable:!0,set:function(){N("You are setting _wrenReleaseHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotCount")||(Object.defineProperty(e.ready,"_wrenGetSlotCount",{configurable:!0,get:function(){N("You are getting _wrenGetSlotCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotCount",{configurable:!0,set:function(){N("You are setting _wrenGetSlotCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenEnsureSlots")||(Object.defineProperty(e.ready,"_wrenEnsureSlots",{configurable:!0,get:function(){N("You are getting _wrenEnsureSlots on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenEnsureSlots",{configurable:!0,set:function(){N("You are setting _wrenEnsureSlots on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotType")||(Object.defineProperty(e.ready,"_wrenGetSlotType",{configurable:!0,get:function(){N("You are getting _wrenGetSlotType on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotType",{configurable:!0,set:function(){N("You are setting _wrenGetSlotType on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotBool")||(Object.defineProperty(e.ready,"_wrenGetSlotBool",{configurable:!0,get:function(){N("You are getting _wrenGetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotBool",{configurable:!0,set:function(){N("You are setting _wrenGetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotBytes")||(Object.defineProperty(e.ready,"_wrenGetSlotBytes",{configurable:!0,get:function(){N("You are getting _wrenGetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotBytes",{configurable:!0,set:function(){N("You are setting _wrenGetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotDouble")||(Object.defineProperty(e.ready,"_wrenGetSlotDouble",{configurable:!0,get:function(){N("You are getting _wrenGetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotDouble",{configurable:!0,set:function(){N("You are setting _wrenGetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotForeign")||(Object.defineProperty(e.ready,"_wrenGetSlotForeign",{configurable:!0,get:function(){N("You are getting _wrenGetSlotForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotForeign",{configurable:!0,set:function(){N("You are setting _wrenGetSlotForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotIsInstanceOf")||(Object.defineProperty(e.ready,"_wrenGetSlotIsInstanceOf",{configurable:!0,get:function(){N("You are getting _wrenGetSlotIsInstanceOf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotIsInstanceOf",{configurable:!0,set:function(){N("You are setting _wrenGetSlotIsInstanceOf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotString")||(Object.defineProperty(e.ready,"_wrenGetSlotString",{configurable:!0,get:function(){N("You are getting _wrenGetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotString",{configurable:!0,set:function(){N("You are setting _wrenGetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotHandle")||(Object.defineProperty(e.ready,"_wrenGetSlotHandle",{configurable:!0,get:function(){N("You are getting _wrenGetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotHandle",{configurable:!0,set:function(){N("You are setting _wrenGetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotBool")||(Object.defineProperty(e.ready,"_wrenSetSlotBool",{configurable:!0,get:function(){N("You are getting _wrenSetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotBool",{configurable:!0,set:function(){N("You are setting _wrenSetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotBytes")||(Object.defineProperty(e.ready,"_wrenSetSlotBytes",{configurable:!0,get:function(){N("You are getting _wrenSetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotBytes",{configurable:!0,set:function(){N("You are setting _wrenSetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotDouble")||(Object.defineProperty(e.ready,"_wrenSetSlotDouble",{configurable:!0,get:function(){N("You are getting _wrenSetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotDouble",{configurable:!0,set:function(){N("You are setting _wrenSetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotRange")||(Object.defineProperty(e.ready,"_wrenSetSlotRange",{configurable:!0,get:function(){N("You are getting _wrenSetSlotRange on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotRange",{configurable:!0,set:function(){N("You are setting _wrenSetSlotRange on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewForeign")||(Object.defineProperty(e.ready,"_wrenSetSlotNewForeign",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNewForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewForeign",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNewForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewList")||(Object.defineProperty(e.ready,"_wrenSetSlotNewList",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNewList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewList",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNewList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewMap")||(Object.defineProperty(e.ready,"_wrenSetSlotNewMap",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNewMap on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewMap",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNewMap on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNull")||(Object.defineProperty(e.ready,"_wrenSetSlotNull",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNull on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNull",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNull on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotString")||(Object.defineProperty(e.ready,"_wrenSetSlotString",{configurable:!0,get:function(){N("You are getting _wrenSetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotString",{configurable:!0,set:function(){N("You are setting _wrenSetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotHandle")||(Object.defineProperty(e.ready,"_wrenSetSlotHandle",{configurable:!0,get:function(){N("You are getting _wrenSetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotHandle",{configurable:!0,set:function(){N("You are setting _wrenSetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetListCount")||(Object.defineProperty(e.ready,"_wrenGetListCount",{configurable:!0,get:function(){N("You are getting _wrenGetListCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetListCount",{configurable:!0,set:function(){N("You are setting _wrenGetListCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetListElement")||(Object.defineProperty(e.ready,"_wrenGetListElement",{configurable:!0,get:function(){N("You are getting _wrenGetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetListElement",{configurable:!0,set:function(){N("You are setting _wrenGetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetListElement")||(Object.defineProperty(e.ready,"_wrenSetListElement",{configurable:!0,get:function(){N("You are getting _wrenSetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetListElement",{configurable:!0,set:function(){N("You are setting _wrenSetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInsertInList")||(Object.defineProperty(e.ready,"_wrenInsertInList",{configurable:!0,get:function(){N("You are getting _wrenInsertInList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInsertInList",{configurable:!0,set:function(){N("You are setting _wrenInsertInList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapCount")||(Object.defineProperty(e.ready,"_wrenGetMapCount",{configurable:!0,get:function(){N("You are getting _wrenGetMapCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapCount",{configurable:!0,set:function(){N("You are setting _wrenGetMapCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapContainsKey")||(Object.defineProperty(e.ready,"_wrenGetMapContainsKey",{configurable:!0,get:function(){N("You are getting _wrenGetMapContainsKey on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapContainsKey",{configurable:!0,set:function(){N("You are setting _wrenGetMapContainsKey on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapValue")||(Object.defineProperty(e.ready,"_wrenGetMapValue",{configurable:!0,get:function(){N("You are getting _wrenGetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapValue",{configurable:!0,set:function(){N("You are setting _wrenGetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetMapValue")||(Object.defineProperty(e.ready,"_wrenSetMapValue",{configurable:!0,get:function(){N("You are getting _wrenSetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetMapValue",{configurable:!0,set:function(){N("You are setting _wrenSetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenRemoveMapValue")||(Object.defineProperty(e.ready,"_wrenRemoveMapValue",{configurable:!0,get:function(){N("You are getting _wrenRemoveMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenRemoveMapValue",{configurable:!0,set:function(){N("You are setting _wrenRemoveMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetVariable")||(Object.defineProperty(e.ready,"_wrenGetVariable",{configurable:!0,get:function(){N("You are getting _wrenGetVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetVariable",{configurable:!0,set:function(){N("You are setting _wrenGetVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenHasVariable")||(Object.defineProperty(e.ready,"_wrenHasVariable",{configurable:!0,get:function(){N("You are getting _wrenHasVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenHasVariable",{configurable:!0,set:function(){N("You are setting _wrenHasVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenHasModule")||(Object.defineProperty(e.ready,"_wrenHasModule",{configurable:!0,get:function(){N("You are getting _wrenHasModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenHasModule",{configurable:!0,set:function(){N("You are setting _wrenHasModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenAbortFiber")||(Object.defineProperty(e.ready,"_wrenAbortFiber",{configurable:!0,get:function(){N("You are getting _wrenAbortFiber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenAbortFiber",{configurable:!0,set:function(){N("You are setting _wrenAbortFiber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetUserData")||(Object.defineProperty(e.ready,"_wrenGetUserData",{configurable:!0,get:function(){N("You are getting _wrenGetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetUserData",{configurable:!0,set:function(){N("You are setting _wrenGetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetUserData")||(Object.defineProperty(e.ready,"_wrenSetUserData",{configurable:!0,get:function(){N("You are getting _wrenSetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetUserData",{configurable:!0,set:function(){N("You are setting _wrenSetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenAddImplicitImportModule")||(Object.defineProperty(e.ready,"_wrenAddImplicitImportModule",{configurable:!0,get:function(){N("You are getting _wrenAddImplicitImportModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenAddImplicitImportModule",{configurable:!0,set:function(){N("You are setting _wrenAddImplicitImportModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_end")||(Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){N("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){N("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_free")||(Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){N("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){N("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_init")||(Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,get:function(){N("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,set:function(){N("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackSave")||(Object.defineProperty(e.ready,"_stackSave",{configurable:!0,get:function(){N("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackSave",{configurable:!0,set:function(){N("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackRestore")||(Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,get:function(){N("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,set:function(){N("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackAlloc")||(Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,get:function(){N("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,set:function(){N("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___wasm_call_ctors")||(Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,get:function(){N("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,set:function(){N("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___errno_location")||(Object.defineProperty(e.ready,"___errno_location",{configurable:!0,get:function(){N("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___errno_location",{configurable:!0,set:function(){N("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"onRuntimeInitialized")||(Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,get:function(){N("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,set:function(){N("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);var i=[];if(e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var a="";if("undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),u&&(a=u),a=0!==a.indexOf("blob:")?a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var s=console.log.bind(console),c=console.warn.bind(console);for(r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);function l(e){l.shown||(l.shown={}),l.shown[e]||(l.shown[e]=1,c(e))}o=null,Object.getOwnPropertyDescriptor(e,"arguments")||Object.defineProperty(e,"arguments",{configurable:!0,get:function(){N("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"thisProgram")||Object.defineProperty(e,"thisProgram",{configurable:!0,get:function(){N("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"quit")||Object.defineProperty(e,"quit",{configurable:!0,get:function(){N("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(void 0===e.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.read,"Module.read option was removed (modify read_ in JS)"),g(void 0===e.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),g(void 0===e.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),g(void 0===e.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),g(void 0===e.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(e,"read")||Object.defineProperty(e,"read",{configurable:!0,get:function(){N("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readAsync")||Object.defineProperty(e,"readAsync",{configurable:!0,get:function(){N("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readBinary")||Object.defineProperty(e,"readBinary",{configurable:!0,get:function(){N("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"setWindowTitle")||Object.defineProperty(e,"setWindowTitle",{configurable:!0,get:function(){N("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-s ENVIRONMENT` to enable."),g(!0,"node environment detected but not enabled at build time.  Add 'node' to `-s ENVIRONMENT` to enable."),g(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");var d,f,h=[];Object.getOwnPropertyDescriptor(e,"wasmBinary")||Object.defineProperty(e,"wasmBinary",{configurable:!0,get:function(){N("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"noExitRuntime")||Object.defineProperty(e,"noExitRuntime",{configurable:!0,get:function(){N("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&N("no native wasm support detected");var p=!1;function g(e,t){e||N("Assertion failed: "+t)}var E,_,b,w,O,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&y)return y.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|c:(240!=(248&a)&&l("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|c<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var d=a-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function m(e,t){return e?T(b,e,t):""}function D(e,t,n){return g("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>1114111&&l("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}(e,b,t,n)}function P(t){E=t,e.HEAP8=_=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=w=new Int32Array(t),e.HEAPU8=b=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=O=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var R,M=5242880;function S(){var e=re();g(0==(3&e)),w[e+4>>2]=34821223,w[e+8>>2]=2310721022,w[0]=1668509029}function A(){if(!p){var e=re(),t=O[e+4>>2],n=O[e+8>>2];34821223==t&&2310721022==n||N("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" 0x"+t.toString(16)),1668509029!==w[0]&&N("Runtime error: The application has corrupted its heap memory area (address zero)!")}}e.TOTAL_STACK&&g(M===e.TOTAL_STACK,"the stack size can no longer be determined at runtime"),Object.getOwnPropertyDescriptor(e,"INITIAL_MEMORY")||Object.defineProperty(e,"INITIAL_MEMORY",{configurable:!0,get:function(){N("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(!0,"INITIAL_MEMORY should be larger than TOTAL_STACK, was 16777216! (TOTAL_STACK=5242880)"),g("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),g(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),g(!0,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();var v=[],U=[],j=[],I=!1;g(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var F=0,x=null,k=null,L={};function N(e){c(e="Aborted("+e+")"),p=!0;var t=new WebAssembly.RuntimeError(e);throw n(t),t}e.preloadedImages={},e.preloadedAudios={};var C,H={error:function(){N("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){H.error()},createDataFile:function(){H.error()},createPreloadedFile:function(){H.error()},createLazyFile:function(){H.error()},open:function(){H.error()},mkdev:function(){H.error()},registerDevice:function(){H.error()},analyzePath:function(){H.error()},loadFilesFromDB:function(){H.error()},ErrnoError:function(){H.error()}};function G(e){return e.startsWith("data:application/octet-stream;base64,")}function X(t,n){return function(){var r=t,o=n;return n||(o=e.asm),g(I,"native function `"+r+"` called before runtime initialization"),g(!0,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o[t]||g(o[t],"exported native function `"+r+"` not found"),o[t].apply(null,arguments)}}function Q(e){try{throw"both async and sync fetching of the wasm failed"}catch(e){N(e)}}function B(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?W(r)():W(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(e)}}e.FS_createDataFile=H.createDataFile,e.FS_createPreloadedFile=H.createPreloadedFile,e.locateFile?G(C="sock_c.wasm")||(C=a+C):C=new URL("sock_c.wasm",document.currentScript&&document.currentScript.src||new URL("sock.js",document.baseURI).href).toString();var Y=[];function W(e){var t=Y[e];return t||(e>=Y.length&&(Y.length=e+1),Y[e]=t=R.get(e)),g(R.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t}function Z(e,t){R.set(e,t),Y[e]=t}function V(e){try{return f.grow(e-E.byteLength+65535>>>16),P(f.buffer),1}catch(t){c("emscripten_realloc_buffer: Attempted to grow heap from "+E.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}var z={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=z.buffers[e];g(n),0===t||10===t?((1===e?s:c)(T(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return g(null!=z.varargs),z.varargs+=4,w[z.varargs-4>>2]},getStr:function(e){return m(e)},get64:function(e,t){return g(e>=0?0===t:-1===t),e}},q={abort:function(){N("native code called abort()")},clock:function e(){return void 0===e.start&&(e.start=Date.now()),1e3*(Date.now()-e.start)|0},emscripten_memcpy_big:function(e,t,n){b.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=b.length;g((e>>>=0)>t);var n,r,o=2147483648;if(e>o)return c("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,e+100663296);var s=Math.min(o,((n=Math.max(e,a))%(r=65536)>0&&(n+=r-n%r),n));if(V(s))return!0}return c("Failed to grow the heap from "+t+" bytes to "+s+" bytes, not enough memory!"),!1},fd_close:function(e){return N("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0},fd_seek:function(e,t,n,r,o){N("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM")},fd_write:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=w[t>>2],s=w[t+4>>2];t+=8;for(var c=0;c<s;c++)z.printChar(e,b[a+c]);o+=s}return w[r>>2]=o,0},js_bindClass:function(t,n,r,o){let i=e.sock.bindClass(m(n),m(r));if(i){let t=i[0],n=i[1];if(t){let r=new Uint32Array(e.HEAP8.buffer,o);r[0]=e.addFunction(t,"vi"),n&&(r[1]=e.addFunction(n,"vi"))}}},js_bindMethod:function(t,n,r,o,i){let a=e.sock.bindMethod(m(n),m(r),!!o,m(i));return a?e.addFunction(a,"vi"):0},js_error:function(t,n,r,o,i){e.sock.error(n,m(r),o,m(i))},js_loadModule:function(t,n){return function(e){if(!e)return 0;if("string"==typeof e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1;return D(e,r=K(t),t),r}e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n=0===e[e.length-1],r=(t=n?e.length:e.length+1,K(t));return b.set(e,r),n||(b[ptr+t-1]=0),r}(e.sock.loadModule(m(n)))},js_write:function(t,n){e.sock.write(m(n))},setTempRet0:function(e){},time:function(e){var t=Date.now()/1e3|0;return e&&(w[e>>2]=t),t}};!function(){var t,r={env:q,wasi_snapshot_preview1:q};function o(t,n){var r,o=t.exports;e.asm=o,g(f=e.asm.memory,"memory not found in wasm exports"),P(f.buffer),g(R=e.asm.__indirect_function_table,"table not found in wasm exports"),r=e.asm.__wasm_call_ctors,U.unshift(r),function(e){if(F--,e?(g(L[e]),delete L[e]):c("warning: run dependency removed without ID"),0==F&&(null!==x&&(clearInterval(x),x=null),k)){var t=k;k=null,t()}}("wasm-instantiate")}F++,(t="wasm-instantiate")?(g(!L[t]),L[t]=1,null===x&&"undefined"!=typeof setInterval&&(x=setInterval((function(){if(p)return clearInterval(x),void(x=null);var e=!1;for(var t in L)e||(e=!0,c("still waiting on run dependencies:")),c("dependency: "+t);e&&c("(end of list)")}),1e4))):c("warning: run dependency added without ID");var i=e;function a(t){g(e===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,o(t.instance)}function s(e){return("function"==typeof fetch?fetch(C,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+C+"'";return e.arrayBuffer()})).catch((function(){return Q()})):Promise.resolve().then((function(){return Q()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(e,(function(e){c("failed to asynchronously prepare wasm: "+e),C.startsWith("file://")&&c("warning: Loading from a file URI ("+C+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),N(e)}))}if(e.instantiateWasm)try{return e.instantiateWasm(r,o)}catch(e){return c("Module.instantiateWasm callback failed with error: "+e),!1}("function"!=typeof WebAssembly.instantiateStreaming||G(C)||"function"!=typeof fetch?s(a):fetch(C,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(a,(function(e){return c("wasm streaming compile failed: "+e),c("falling back to ArrayBuffer instantiation"),s(a)}))}))).catch(n)}(),e.___wasm_call_ctors=X("__wasm_call_ctors"),e._wrenInterpret=X("wrenInterpret"),e.___errno_location=X("__errno_location"),e._wrenCollectGarbage=X("wrenCollectGarbage"),e._wrenGetVersionNumber=X("wrenGetVersionNumber"),e._wrenInitConfiguration=X("wrenInitConfiguration"),e._free=X("free"),e._realloc=X("realloc"),e._wrenNewVM=X("wrenNewVM"),e._wrenFreeVM=X("wrenFreeVM"),e._wrenMakeCallHandle=X("wrenMakeCallHandle"),e._wrenCall=X("wrenCall"),e._wrenReleaseHandle=X("wrenReleaseHandle"),e._wrenGetSlotCount=X("wrenGetSlotCount"),e._wrenEnsureSlots=X("wrenEnsureSlots"),e._wrenGetSlotType=X("wrenGetSlotType"),e._wrenGetSlotBool=X("wrenGetSlotBool"),e._wrenGetSlotBytes=X("wrenGetSlotBytes"),e._wrenGetSlotDouble=X("wrenGetSlotDouble"),e._wrenGetSlotForeign=X("wrenGetSlotForeign"),e._wrenGetSlotIsInstanceOf=X("wrenGetSlotIsInstanceOf"),e._wrenGetSlotString=X("wrenGetSlotString"),e._wrenGetSlotHandle=X("wrenGetSlotHandle"),e._wrenSetSlotBool=X("wrenSetSlotBool"),e._wrenSetSlotBytes=X("wrenSetSlotBytes"),e._wrenSetSlotDouble=X("wrenSetSlotDouble"),e._wrenSetSlotRange=X("wrenSetSlotRange"),e._wrenSetSlotNewForeign=X("wrenSetSlotNewForeign"),e._wrenSetSlotNewList=X("wrenSetSlotNewList"),e._wrenSetSlotNewMap=X("wrenSetSlotNewMap"),e._wrenSetSlotNull=X("wrenSetSlotNull"),e._wrenSetSlotString=X("wrenSetSlotString"),e._wrenSetSlotHandle=X("wrenSetSlotHandle"),e._wrenGetListCount=X("wrenGetListCount"),e._wrenGetListElement=X("wrenGetListElement"),e._wrenSetListElement=X("wrenSetListElement"),e._wrenInsertInList=X("wrenInsertInList"),e._wrenGetMapCount=X("wrenGetMapCount"),e._wrenGetMapContainsKey=X("wrenGetMapContainsKey"),e._wrenGetMapValue=X("wrenGetMapValue"),e._wrenSetMapValue=X("wrenSetMapValue"),e._wrenRemoveMapValue=X("wrenRemoveMapValue"),e._wrenGetVariable=X("wrenGetVariable"),e._wrenHasVariable=X("wrenHasVariable"),e._wrenHasModule=X("wrenHasModule"),e._wrenAbortFiber=X("wrenAbortFiber"),e._wrenGetUserData=X("wrenGetUserData"),e._wrenSetUserData=X("wrenSetUserData"),e._wrenAddImplicitImportModule=X("wrenAddImplicitImportModule");var K=e._malloc=X("malloc");e._sock_font=X("sock_font"),e._sock_init=X("sock_init"),e._sock_new_buffer=X("sock_new_buffer");var $=e.stackSave=X("stackSave"),J=e.stackRestore=X("stackRestore"),ee=e.stackAlloc=X("stackAlloc"),te=e._emscripten_stack_init=function(){return(te=e._emscripten_stack_init=e.asm.emscripten_stack_init).apply(null,arguments)};e._emscripten_stack_get_free=function(){return(e._emscripten_stack_get_free=e.asm.emscripten_stack_get_free).apply(null,arguments)};var ne,re=e._emscripten_stack_get_end=function(){return(re=e._emscripten_stack_get_end=e.asm.emscripten_stack_get_end).apply(null,arguments)};function oe(n){n=n||i,F>0||(te(),S(),B(v),F>0||(ne||(ne=!0,e.calledRun=!0,p||(A(),g(!I),I=!0,B(U),t(e),g(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),A(),B(j))),A()))}return e.dynCall_jiji=X("dynCall_jiji"),Object.getOwnPropertyDescriptor(e,"intArrayFromString")||(e.intArrayFromString=function(){N("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"intArrayToString")||(e.intArrayToString=function(){N("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.ccall=function(t,n,r,o,i){var a={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);D(e,t=ee(n),n)}return t},array:function(e){var t=ee(e.length);return function(e,t){g(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),_.set(e,t)}(e,t),t}},s=function(t){var n=e["_"+t];return g(n,"Cannot call unknown function "+t+", make sure it is exported"),n}(t),c=[],l=0;if(g("array"!==n,'Return type should not be "array".'),o)for(var d=0;d<o.length;d++){var u=a[r[d]];u?(0===l&&(l=$()),c[d]=u(o[d])):c[d]=o[d]}var f=s.apply(null,c);return f=function(e){return 0!==l&&J(l),function(e){return"string"===n?m(e):"boolean"===n?Boolean(e):e}(e)}(f)},Object.getOwnPropertyDescriptor(e,"cwrap")||(e.cwrap=function(){N("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setValue")||(e.setValue=function(){N("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getValue")||(e.getValue=function(){N("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocate")||(e.allocate=function(){N("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ArrayToString")||(e.UTF8ArrayToString=function(){N("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ToString")||(e.UTF8ToString=function(){N("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8Array")||(e.stringToUTF8Array=function(){N("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8")||(e.stringToUTF8=function(){N("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF8")||(e.lengthBytesUTF8=function(){N("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){N("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreRun")||(e.addOnPreRun=function(){N("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnInit")||(e.addOnInit=function(){N("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreMain")||(e.addOnPreMain=function(){N("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnExit")||(e.addOnExit=function(){N("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPostRun")||(e.addOnPostRun=function(){N("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeStringToMemory")||(e.writeStringToMemory=function(){N("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeArrayToMemory")||(e.writeArrayToMemory=function(){N("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeAsciiToMemory")||(e.writeAsciiToMemory=function(){N("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addRunDependency")||(e.addRunDependency=function(){N("'addRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"removeRunDependency")||(e.removeRunDependency=function(){N("'removeRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createFolder")||(e.FS_createFolder=function(){N("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createPath")||(e.FS_createPath=function(){N("'FS_createPath' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createDataFile")||(e.FS_createDataFile=function(){N("'FS_createDataFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createPreloadedFile")||(e.FS_createPreloadedFile=function(){N("'FS_createPreloadedFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLazyFile")||(e.FS_createLazyFile=function(){N("'FS_createLazyFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLink")||(e.FS_createLink=function(){N("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createDevice")||(e.FS_createDevice=function(){N("'FS_createDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_unlink")||(e.FS_unlink=function(){N("'FS_unlink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"getLEB")||(e.getLEB=function(){N("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFunctionTables")||(e.getFunctionTables=function(){N("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignFunctionTables")||(e.alignFunctionTables=function(){N("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFunctions")||(e.registerFunctions=function(){N("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.addFunction=function(e,t){if(g(void 0!==e),d||(d=new WeakMap,function(e,t){for(var n=e;n<e+t;n++){var r=W(n);r&&d.set(r,n)}}(0,R.length)),d.has(e))return d.get(e);var n=function(){if(h.length)return h.pop();try{R.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return R.length-1}();try{Z(n,e)}catch(o){if(!(o instanceof TypeError))throw o;g(void 0!==t,"Missing signature argument to addFunction: "+e);var r=function(e,t){if("function"==typeof WebAssembly.Function){for(var n={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==t[0]?[]:[n[t[0]]]},o=1;o<t.length;++o)r.parameters.push(n[t[o]]);return new WebAssembly.Function(r,e)}var i=[1,0,1,96],a=t.slice(0,1),s=t.slice(1),c={i:127,j:126,f:125,d:124};for(i.push(s.length),o=0;o<s.length;++o)i.push(c[s[o]]);"v"==a?i.push(0):i=i.concat([1,c[a]]),i[1]=i.length-2;var l=new Uint8Array([0,97,115,109,1,0,0,0].concat(i,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),d=new WebAssembly.Module(l);return new WebAssembly.Instance(d,{e:{f:e}}).exports.f}(e,t);Z(n,r)}return d.set(e,n),n},Object.getOwnPropertyDescriptor(e,"removeFunction")||(e.removeFunction=function(){N("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){N("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"prettyPrint")||(e.prettyPrint=function(){N("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){N("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCompilerSetting")||(e.getCompilerSetting=function(){N("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"print")||(e.print=function(){N("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"printErr")||(e.printErr=function(){N("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getTempRet0")||(e.getTempRet0=function(){N("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setTempRet0")||(e.setTempRet0=function(){N("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callMain")||(e.callMain=function(){N("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"abort")||(e.abort=function(){N("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"keepRuntimeAlive")||(e.keepRuntimeAlive=function(){N("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"zeroMemory")||(e.zeroMemory=function(){N("'zeroMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToNewUTF8")||(e.stringToNewUTF8=function(){N("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setFileTime")||(e.setFileTime=function(){N("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscripten_realloc_buffer")||(e.emscripten_realloc_buffer=function(){N("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ENV")||(e.ENV=function(){N("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"withStackSave")||(e.withStackSave=function(){N("'withStackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_CODES")||(e.ERRNO_CODES=function(){N("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_MESSAGES")||(e.ERRNO_MESSAGES=function(){N("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setErrNo")||(e.setErrNo=function(){N("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton4")||(e.inetPton4=function(){N("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop4")||(e.inetNtop4=function(){N("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton6")||(e.inetPton6=function(){N("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop6")||(e.inetNtop6=function(){N("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readSockaddr")||(e.readSockaddr=function(){N("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeSockaddr")||(e.writeSockaddr=function(){N("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"DNS")||(e.DNS=function(){N("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getHostByName")||(e.getHostByName=function(){N("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GAI_ERRNO_MESSAGES")||(e.GAI_ERRNO_MESSAGES=function(){N("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Protocols")||(e.Protocols=function(){N("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Sockets")||(e.Sockets=function(){N("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getRandomDevice")||(e.getRandomDevice=function(){N("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"traverseStack")||(e.traverseStack=function(){N("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UNWIND_CACHE")||(e.UNWIND_CACHE=function(){N("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgsArray")||(e.readAsmConstArgsArray=function(){N("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgs")||(e.readAsmConstArgs=function(){N("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mainThreadEM_ASM")||(e.mainThreadEM_ASM=function(){N("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_q")||(e.jstoi_q=function(){N("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_s")||(e.jstoi_s=function(){N("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getExecutableName")||(e.getExecutableName=function(){N("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"listenOnce")||(e.listenOnce=function(){N("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"autoResumeAudioContext")||(e.autoResumeAudioContext=function(){N("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCallLegacy")||(e.dynCallLegacy=function(){N("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getDynCaller")||(e.getDynCaller=function(){N("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){N("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callRuntimeCallbacks")||(e.callRuntimeCallbacks=function(){N("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wasmTableMirror")||(e.wasmTableMirror=function(){N("'wasmTableMirror' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setWasmTableEntry")||(e.setWasmTableEntry=function(){N("'setWasmTableEntry' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getWasmTableEntry")||(e.getWasmTableEntry=function(){N("'getWasmTableEntry' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"handleException")||(e.handleException=function(){N("'handleException' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePush")||(e.runtimeKeepalivePush=function(){N("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePop")||(e.runtimeKeepalivePop=function(){N("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callUserCallback")||(e.callUserCallback=function(){N("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeExit")||(e.maybeExit=function(){N("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"safeSetTimeout")||(e.safeSetTimeout=function(){N("'safeSetTimeout' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asmjsMangle")||(e.asmjsMangle=function(){N("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asyncLoad")||(e.asyncLoad=function(){N("'asyncLoad' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignMemory")||(e.alignMemory=function(){N("'alignMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mmapAlloc")||(e.mmapAlloc=function(){N("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reallyNegative")||(e.reallyNegative=function(){N("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"unSign")||(e.unSign=function(){N("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reSign")||(e.reSign=function(){N("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"formatString")||(e.formatString=function(){N("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH")||(e.PATH=function(){N("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH_FS")||(e.PATH_FS=function(){N("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SYSCALLS")||(e.SYSCALLS=function(){N("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMmap2")||(e.syscallMmap2=function(){N("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMunmap")||(e.syscallMunmap=function(){N("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketFromFD")||(e.getSocketFromFD=function(){N("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketAddress")||(e.getSocketAddress=function(){N("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"JSEvents")||(e.JSEvents=function(){N("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerKeyEventCallback")||(e.registerKeyEventCallback=function(){N("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"specialHTMLTargets")||(e.specialHTMLTargets=function(){N("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeCStringToJsString")||(e.maybeCStringToJsString=function(){N("'maybeCStringToJsString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findEventTarget")||(e.findEventTarget=function(){N("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findCanvasEventTarget")||(e.findCanvasEventTarget=function(){N("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getBoundingClientRect")||(e.getBoundingClientRect=function(){N("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillMouseEventData")||(e.fillMouseEventData=function(){N("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerMouseEventCallback")||(e.registerMouseEventCallback=function(){N("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerWheelEventCallback")||(e.registerWheelEventCallback=function(){N("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerUiEventCallback")||(e.registerUiEventCallback=function(){N("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFocusEventCallback")||(e.registerFocusEventCallback=function(){N("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceOrientationEventData")||(e.fillDeviceOrientationEventData=function(){N("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceOrientationEventCallback")||(e.registerDeviceOrientationEventCallback=function(){N("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceMotionEventData")||(e.fillDeviceMotionEventData=function(){N("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceMotionEventCallback")||(e.registerDeviceMotionEventCallback=function(){N("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"screenOrientation")||(e.screenOrientation=function(){N("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillOrientationChangeEventData")||(e.fillOrientationChangeEventData=function(){N("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerOrientationChangeEventCallback")||(e.registerOrientationChangeEventCallback=function(){N("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillFullscreenChangeEventData")||(e.fillFullscreenChangeEventData=function(){N("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFullscreenChangeEventCallback")||(e.registerFullscreenChangeEventCallback=function(){N("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerRestoreOldStyle")||(e.registerRestoreOldStyle=function(){N("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"hideEverythingExceptGivenElement")||(e.hideEverythingExceptGivenElement=function(){N("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreHiddenElements")||(e.restoreHiddenElements=function(){N("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setLetterbox")||(e.setLetterbox=function(){N("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"currentFullscreenStrategy")||(e.currentFullscreenStrategy=function(){N("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreOldWindowedStyle")||(e.restoreOldWindowedStyle=function(){N("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"softFullscreenResizeWebGLRenderTarget")||(e.softFullscreenResizeWebGLRenderTarget=function(){N("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"doRequestFullscreen")||(e.doRequestFullscreen=function(){N("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillPointerlockChangeEventData")||(e.fillPointerlockChangeEventData=function(){N("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockChangeEventCallback")||(e.registerPointerlockChangeEventCallback=function(){N("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockErrorEventCallback")||(e.registerPointerlockErrorEventCallback=function(){N("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"requestPointerLock")||(e.requestPointerLock=function(){N("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillVisibilityChangeEventData")||(e.fillVisibilityChangeEventData=function(){N("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerVisibilityChangeEventCallback")||(e.registerVisibilityChangeEventCallback=function(){N("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerTouchEventCallback")||(e.registerTouchEventCallback=function(){N("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillGamepadEventData")||(e.fillGamepadEventData=function(){N("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerGamepadEventCallback")||(e.registerGamepadEventCallback=function(){N("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBeforeUnloadEventCallback")||(e.registerBeforeUnloadEventCallback=function(){N("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillBatteryEventData")||(e.fillBatteryEventData=function(){N("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"battery")||(e.battery=function(){N("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBatteryEventCallback")||(e.registerBatteryEventCallback=function(){N("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setCanvasElementSize")||(e.setCanvasElementSize=function(){N("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCanvasElementSize")||(e.getCanvasElementSize=function(){N("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangle")||(e.demangle=function(){N("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangleAll")||(e.demangleAll=function(){N("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jsStackTrace")||(e.jsStackTrace=function(){N("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){N("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getEnvStrings")||(e.getEnvStrings=function(){N("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"checkWasiClock")||(e.checkWasiClock=function(){N("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"flush_NO_FILESYSTEM")||(e.flush_NO_FILESYSTEM=function(){N("'flush_NO_FILESYSTEM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64")||(e.writeI53ToI64=function(){N("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Clamped")||(e.writeI53ToI64Clamped=function(){N("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Signaling")||(e.writeI53ToI64Signaling=function(){N("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Clamped")||(e.writeI53ToU64Clamped=function(){N("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Signaling")||(e.writeI53ToU64Signaling=function(){N("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromI64")||(e.readI53FromI64=function(){N("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromU64")||(e.readI53FromU64=function(){N("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertI32PairToI53")||(e.convertI32PairToI53=function(){N("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertU32PairToI53")||(e.convertU32PairToI53=function(){N("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setImmediateWrapped")||(e.setImmediateWrapped=function(){N("'setImmediateWrapped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"clearImmediateWrapped")||(e.clearImmediateWrapped=function(){N("'clearImmediateWrapped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"polyfillSetImmediate")||(e.polyfillSetImmediate=function(){N("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"uncaughtExceptionCount")||(e.uncaughtExceptionCount=function(){N("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionLast")||(e.exceptionLast=function(){N("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionCaught")||(e.exceptionCaught=function(){N("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ExceptionInfo")||(e.ExceptionInfo=function(){N("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"CatchInfo")||(e.CatchInfo=function(){N("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_addRef")||(e.exception_addRef=function(){N("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_decRef")||(e.exception_decRef=function(){N("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Browser")||(e.Browser=function(){N("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"funcWrappers")||(e.funcWrappers=function(){N("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){N("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setMainLoop")||(e.setMainLoop=function(){N("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wget")||(e.wget=function(){N("'wget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"tempFixedLengthArray")||(e.tempFixedLengthArray=function(){N("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"miniTempWebGLFloatBuffers")||(e.miniTempWebGLFloatBuffers=function(){N("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapObjectForWebGLType")||(e.heapObjectForWebGLType=function(){N("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapAccessShiftForWebGLHeap")||(e.heapAccessShiftForWebGLHeap=function(){N("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GL")||(e.GL=function(){N("'GL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGet")||(e.emscriptenWebGLGet=function(){N("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"computeUnpackAlignedImageSize")||(e.computeUnpackAlignedImageSize=function(){N("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetTexPixelData")||(e.emscriptenWebGLGetTexPixelData=function(){N("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetUniform")||(e.emscriptenWebGLGetUniform=function(){N("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetUniformLocation")||(e.webglGetUniformLocation=function(){N("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglPrepareUniformLocationsBeforeFirstUse")||(e.webglPrepareUniformLocationsBeforeFirstUse=function(){N("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetLeftBracePos")||(e.webglGetLeftBracePos=function(){N("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetVertexAttrib")||(e.emscriptenWebGLGetVertexAttrib=function(){N("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeGLArray")||(e.writeGLArray=function(){N("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AL")||(e.AL=function(){N("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_unicode")||(e.SDL_unicode=function(){N("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_ttfContext")||(e.SDL_ttfContext=function(){N("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_audio")||(e.SDL_audio=function(){N("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL")||(e.SDL=function(){N("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_gfx")||(e.SDL_gfx=function(){N("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLUT")||(e.GLUT=function(){N("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"EGL")||(e.EGL=function(){N("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW_Window")||(e.GLFW_Window=function(){N("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW")||(e.GLFW=function(){N("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLEW")||(e.GLEW=function(){N("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"IDBStore")||(e.IDBStore=function(){N("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runAndAbortIfError")||(e.runAndAbortIfError=function(){N("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"warnOnce")||(e.warnOnce=function(){N("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackSave")||(e.stackSave=function(){N("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackRestore")||(e.stackRestore=function(){N("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackAlloc")||(e.stackAlloc=function(){N("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AsciiToString")||(e.AsciiToString=function(){N("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToAscii")||(e.stringToAscii=function(){N("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF16ToString")||(e.UTF16ToString=function(){N("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF16")||(e.stringToUTF16=function(){N("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF16")||(e.lengthBytesUTF16=function(){N("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF32ToString")||(e.UTF32ToString=function(){N("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF32")||(e.stringToUTF32=function(){N("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF32")||(e.lengthBytesUTF32=function(){N("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8")||(e.allocateUTF8=function(){N("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8OnStack")||(e.allocateUTF8OnStack=function(){N("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.writeStackCookie=S,e.checkStackCookie=A,Object.getOwnPropertyDescriptor(e,"ALLOC_NORMAL")||Object.defineProperty(e,"ALLOC_NORMAL",{configurable:!0,get:function(){N("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(e,"ALLOC_STACK")||Object.defineProperty(e,"ALLOC_STACK",{configurable:!0,get:function(){N("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),k=function e(){ne||oe(),ne||(k=e)},e.run=oe,oe(),e.ready});let h,p;function g(){return h.HEAPU8}async function E(){if(h=await f(),h.sock={write(e){console.log(e)},error(e,t,n,r){let o;X=!0,0===e?(Q=r,o=`[WREN COMPILE ERROR]\n${r}\n  at ${Y(t,n)}`,G=[],G.push([t,n,null])):1===e?(Q=r,o="[WREN RUNTIME ERROR]\n"+r,G=[]):2===e&&(o=`  at ${r} ${Y(t,n)}`,G.push([t,n,r])),console.error(o),B=B?B+"\n"+o:o},loadModule:e=>(l("assets"+e+".wren","arraybuffer").then((t=>{0===_(e,t)&&_(e,"self__.transfer()")}),(t=>{console.warn(`Error loading module source "${e}"`,t),_(e,"self__.transferError("+function(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];t+="\\"===r?"\\\\":"%"===r||'"'===r?"\\"+r:r}return t+'"'}(String(t))+")")})),"var self__=Fiber.current\nFiber.suspend()\nself__=null"),bindMethod:(e,t,n,r)=>function(e,t,n,r){return s[i(e,t,n,r)]}(e,t,n,r),bindClass:(e,t)=>function(e,t){return c[a(e,t)]}(e,t)},p=h.ccall("sock_init","number"),0===p)throw Error("error loading VM")}function _(e,t){let n,r,o=0;"string"==typeof t?(n=t,r="string"):(o=h.stackSave(),n=W(t),r="number");let i=h.ccall("wrenInterpret","number",["number","string",r],[p,e,n]);return o&&h.stackRestore(o),i}function b(e,t){return h.ccall("wrenHasVariable","boolean",["number","string","string"],[p,e,t])}function w(e){h.ccall("wrenEnsureSlots",null,["number","number"],[p,e])}function O(e){return h.ccall("wrenGetSlotType","number",["number","number"],[p,e])}function y(e){return h.ccall("wrenGetSlotBool","boolean",["number","number"],[p,e])}function T(e){return h.ccall("wrenGetSlotString","string",["number","number"],[p,e])}function m(e){let t=h.stackSave(),n=h.stackAlloc(4),r=h.ccall("wrenGetSlotBytes","number",["number","number","number"],[p,e,n]),o=h.HEAPU8.buffer,i=new Int32Array(o,n)[0];return h.stackRestore(t),new Uint8Array(o,r,i)}function D(e){return h.ccall("wrenGetSlotDouble","number",["number","number"],[p,e])}function P(e,t,n){h.ccall("wrenInsertInList",null,["number","number","number","number"],[p,e,t,n])}function R(e){return h.ccall("wrenGetSlotForeign","number",["number","number"],[p,e])}function M(e,t){return h.ccall("wrenGetSlotIsInstanceOf","boolean",["number","number","number"],[p,e,t])}function S(e){return h.ccall("wrenGetSlotHandle","number",["number","number"],[p,e])}function A(e,t,n){h.ccall("wrenGetVariable",null,["number","string","string","number"],[p,e,t,n])}function v(e){h.ccall("wrenSetSlotNull",null,["number","number"],[p,e])}function U(e,t){h.ccall("wrenSetSlotBool",null,["number","number","boolean"],[p,e,t])}function j(e,t){h.ccall("wrenSetSlotDouble",null,["number","number","number"],[p,e,t])}function I(e,t,n,r,o){h.ccall("wrenSetSlotRange",null,["number","number","number","number","number","boolean"],[p,e,t,n,r,o])}function F(e,t){let n,r,o=0;"string"==typeof t?(n=t,r="string"):(o=h.stackSave(),n=W(t),r="number"),h.ccall("wrenSetSlotString",null,["number","number",r],[p,e,n]),o&&h.stackRestore(o)}function x(e,t){h.ccall("wrenSetSlotHandle",null,["number","number","number"],[p,e,t])}function k(e,t,n){return h.ccall("wrenSetSlotNewForeign","number",["number","number","number","number"],[p,e,t,n])}function L(e){h.ccall("wrenSetSlotNewList","number",["number","number"],[p,e])}function N(e){return h.ccall("wrenCall","number",["number","number"],[p,e])}function C(e){h.ccall("wrenReleaseHandle",null,["number","number"],[p,e])}function H(e){var t;w(1),F(0,e),t=0,h.ccall("wrenAbortFiber",null,["number","number"],[p,t])}let G,X=!1,Q=null,B=null;function Y(e,t){return"/"===e[0]&&(e=e.slice(1)),e+":"+t}function W(e){let t=e instanceof ArrayBuffer?new Uint8Array(e):e,n=0===t[t.length-1],r=n?t.length:t.length+1,o=h.stackAlloc(r),i=g();return i.set(t,o),n||(i[o+r-1]=0),o}let Z=0,V=0,z=0,q=0,K=0,$=0,J=0;function ee(e){return h.ccall("wrenMakeCallHandle","number",["number","string"],[p,e])}let te=0;let ne=document.querySelector("canvas"),re=Object.assign(self.sock||(self.sock={}),{canvas:ne,async toggleFullscreen(){if(document.fullscreenEnabled){if(document.fullscreenElement)return await document.exitFullscreen(),!0;try{return await document.body.requestFullscreen(),!0}catch(e){console.warn(e)}}else console.warn("fullscreen is blocked by the browser");return!1},togglePointerLock(){document.pointerLockElement?document.exitPointerLock():ne.requestPointerLock()}});let oe=0;function ie(e,t){t.then((t=>{ae(e,!0,t)}),(t=>{ae(e,!1,String(t))}))}function ae(e,t,n){for(w(3),x(0,e),U(1,t),n instanceof ArrayBuffer||"string"==typeof n?F(2,n):n instanceof se?(x(2,n.handle),C(n.handle)):"number"==typeof n?j(2,n):"boolean"==typeof n?U(2,n):v(2);0===N(q)&&(w(3),0!==O(0));)x(0,e),v(1),v(2);C(e)}class se{constructor(e){this.handle=e}}function ce(e){if(w(4),x(3,oe),6!==O(1)||!M(2,3))return void H("args must be (string, Promise)");let t=T(1),n=function(e){return"/"!==e[0]&&(e="/"+e),"assets"+e}(t),r=S(2);x(0,r),ie(r,e(n,t))}r("sock","Asset",{"loadString_(_,_)"(){ce((e=>l(e,"arraybuffer")))},"exists_(_,_)"(){ce((e=>async function(e){try{return(await fetch(e,{method:"HEAD"})).ok}catch(t){return console.error("error for head request at "+e,t),!1}}(e)))}});const le=["none","filter","echo","reverb","distortion"];let de,ue,fe,he=null,pe=0,ge=0,Ee=0;function _e(){fe=function(e){let t=Math.floor(e*de.sampleRate),n=new AudioBuffer({length:t,sampleRate:de.sampleRate,numberOfChannels:2}),r=n.getChannelData(0),o=n.getChannelData(1);for(let e=0;e<t;e++){let n=.022*Math.exp(e/t*-5);r[e]=(2*Math.random()-1)*n,o[e]=(2*Math.random()-1)*n}return n}(3)}function be(e,t,n){t=Math.max(0,t),n=Math.max(.002,n);let r=e.gain;r.cancelScheduledValues(de.currentTime),r.value=r.value,r.linearRampToValueAtTime(t,de.currentTime+n)}class we{constructor(e){this.effects=Array(8).fill(null),this.gain=de.createGain(),this.destination=e,this.updateGraph()}getInput(){for(let e=0;e<8;e++){let t=this.effects[e];if(t)return t.input}return this.gain}getEffectType(e){let t=this.effects[e];return t?t.type:0}updateGraph(){let e=[];for(let t=0;t<8;t++){let n=this.effects[t];if(n){for(let t of e)t.connect(n.input);e=n.outputs;for(let t of e)t.disconnect();n.setupGraph&&n.setupGraph()}}for(let t of e)t.connect(this.gain);this.gain.disconnect(),this.gain.connect(this.destination?this.destination.getInput():ue)}}class Oe extends we{constructor(e){super(),this.ptr=e}}class ye{constructor(e){this.ptr=e}setBuffer(e){this.buffer=e}}function Te(e,t,n){t=Math.max(e.minValue,Math.min(e.maxValue,t)),n?e.linearRampToValueAtTime(t,de.currentTime+n):e.value=t}class me{constructor(){this.filter=de.createBiquadFilter()}getParam(e){if(0===e)switch(this.filter.type){case"lowpass":return 0;case"highpass":return 1;case"bandpass":return 2}else{if(1===e)return this.filter.frequency.value;if(2===e)return this.filter.Q.value}}checkParam(e,t){if(0===e&&((t=Math.floor(t))<0||t>2))return"invalid filter type"}setParam(e,t,n){if(0===e)switch(t=Math.floor(t)){case 0:this.filter.type="lowpass";break;case 1:this.filter.type="highpass";break;case 2:this.filter.type="bandpass"}else 1===e?Te(this.filter.frequency,t,n):2===e&&Te(this.filter.Q,t,n)}get type(){return 1}get input(){return this.filter}get outputs(){return[this.filter]}}class De{constructor(){this.maxDelay=-1,this.node=new GainNode(de),this.decay=new GainNode(de),this.mix=new GainNode(de)}create(){this.delay=new DelayNode(de,{delayTime:this.maxDelay,maxDelayTime:this.maxDelay}),this.delay.connect(this.mix),this.delay.connect(this.decay),this.decay.connect(this.delay)}setupGraph(){this.node.connect(this.delay)}getParam(e){return 0===e?this.delay?this.delay.delayTime.value:this.maxDelay:1===e?this.decay.gain.value:2===e?this.mix.gain.value:void 0}checkParam(e,t){if(0===e){if(t<.001)return"decay not be less than 1ms"}else if(1===e){if(t<0)return"decay must not be negative";if(t>=1)return"decay must less than 1"}}setParam(e,t,n){2===e?Te(this.mix.gain,t,n):0===e?(this.maxDelay<0&&(this.maxDelay=t),this.delay&&Te(this.delay.delayTime,t,n)):1===e&&Te(this.decay.gain,t,n)}free(){this.delay.disconnect(),this.decay.disconnect(),this.delay=null,this.decay=null}get type(){return 2}get input(){return this.node}get outputs(){return[this.node,this.mix]}}class Pe{constructor(){this.gain=new GainNode(de),this.wetGain=new GainNode(de,{gain:1})}create(){this.convolver=new ConvolverNode(de,{buffer:fe,disableNormalization:!0}),this.convolver.connect(this.wetGain)}setupGraph(){this.gain.connect(this.convolver)}getParam(e){if(0==e)return this.wetGain.gain.value}checkParam(e,t){}setParam(e,t,n){0===e&&Te(this.wetGain.gain,t,n)}get type(){return 3}get input(){return this.gain}get outputs(){return[this.gain,this.wetGain]}}class Re extends we{constructor(e,t,n,r){super(r),this.ptr=e,this.audio=t,this.audioHandle=n,this._initSource(),this.state=0,this.time=0}_initSource(){this.source=de.createBufferSource(),this.source.buffer=this.audio.buffer}play(){if(0===this.state||2===this.state){if(2===this.state){let e=this.source;this._initSource(),this.source.loop=e.loop,this.source.loopStart=e.loopStart,this.source.playbackRate.value=e.playbackRate.value}this.source.connect(this.getInput()),this.source.start(0,this.time),this.startTime=de.currentTime,this.state=1}}saveTime(){this.time+=(de.currentTime-this.startTime)*this.source.playbackRate.value,this.startTime=de.currentTime}pause(){1===this.state&&(console.log(this.source.playbackRate.value),this.time+=(de.currentTime-this.startTime)*this.source.playbackRate.value,this.source.stop(),this.source.disconnect(),this.state=2)}updateGraph(){super.updateGraph(),this.source&&(this.source.disconnect(),this.source.connect(this.getInput()))}}let Me=new Map,Se=new Map,Ae=new Map;function ve(){return Me.get(R(0))}function Ue(){return Se.get(R(0))}function je(){return Ae.get(R(0))}let Ie,Fe=!0;async function xe(e){if(null==Ie){Ie=new Promise((e=>{let t=()=>{removeEventListener("stbvorbis",t),e(self.stbvorbis)};addEventListener("stbvorbis",t)}));let e=document.createElement("script");e.src="stbvorbis.js",document.head.append(e)}let t=await Ie;return new Promise(((n,r)=>{let o,i=[];t.decode(e,(e=>{if(e.error)r(e.error);else if(e.eof){let e=i.reduce(((e,t)=>e+t[0].length),0),t=i[0].length,r=new AudioBuffer({sampleRate:o,numberOfChannels:t,length:e}),a=0;for(let e of i)for(let n=0;n<t;n++)r.copyToChannel(e[n],n,a),a+=e[n].length;n(r)}else i.push(e.data),o=e.sampleRate}))}))}function ke(e){for(let e=1;e<=6;e++)if(1!==O(e))return void H("args must be Nums");let t,n=D(1),r=D(2),o=Array(4);if(o[0]=D(3),o[1]=D(4),o[2]=D(5),o[3]=D(6),n<0||n>=8)return void H("invalid effect index");if(r<1||r>4)return void H("invalid effect type");if(t=1===r?new me:2===r?new De:3===r?new Pe:null,t){if(t.checkParam)for(let e=0;e<4;e++){let n=t.checkParam(e,o[e]);if(n)return t.free&&t.free(),void H(n)}for(let e=0;e<4;e++)t.setParam(e,o[e])}t.create&&t.create();let i=e.effects[n];if(i){for(let e of i.outputs)e.disconnect();i.free&&i.free()}e.effects[n]=t,e.updateGraph()}function Le(e){if(1!==O(1))return void H("index must be a Num");let t=Math.trunc(D(1));t<0||t>=8?H("invalid effect index"):j(0,e.getEffectType(t))}function Ne(e){for(let e=1;e<=3;e++)if(1!==O(e))return void H("args must be Nums");let t=Math.trunc(D(1)),n=Math.trunc(D(2)),r=Math.trunc(D(3));t<0||t>=8?H("invalid effect index"):n<1||n>4?H("invalid effect type"):e.getEffectType(t)==n?r<0||r>=4?H("invalid param index"):j(0,e.effects[t].getParam(r)??0):H(`effect at ${t} is not a ${le[n]}`)}function Ce(e){for(let e=1;e<=5;e++)if(1!==O(e))return void H("args must be Nums");let t=Math.trunc(D(1)),n=Math.trunc(D(2)),r=Math.trunc(D(3)),o=D(4),i=D(5);if(t<0||t>=8)return void H("invalid effect index");if(n<1||n>4)return void H("invalid effect type");if(e.getEffectType(t)!=n)return void H(`effect at ${t} is not a ${le[n]}`);if(r<0||r>=4)return void H("invalid param index");if(i<0)return void H("fade time must be positive");let a=e.effects[t];if(a.checkParam){let e=a.checkParam(r,o);if(e)return void H(e)}a.setParam(r,o,i)}function He(e){for(let e=1;e<=2;e++)if(1!==O(e))return void H("volume and fade must be Nums");be(e,D(1),D(2))}o("sock","AudioBus",[()=>{let e=k(0,0,0),t=new Oe(e);Me.set(e,t)},e=>{Me.delete(e)}],{volume(){j(0,ve().gain.gain.value)},"fadeVolume(_,_)"(){He(ve().gain)},"setEffect_(_,_,_,_,_,_)"(){ke(ve())},"getEffect_(_)"(){Le(ve())},"getParam_(_,_,_)"(){Ne(ve())},"setParam_(_,_,_,_,_)"(){Ce(ve())}}),o("sock","Audio",[()=>{let e=k(0,0,0),t=new ye(e);Se.set(e,t)},e=>{Se.delete(e)}],{duration(){let e=Ue();j(0,e.buffer?e.buffer.duration:0)},"voice()"(){let e=S(0),t=Ue();if(!t.buffer)return void H("audio not loaded");w(2),x(1,Ee);let n=k(0,1,0),r=new Re(n,t,e);Ae.set(n,r)},"voice(_)"(){let e=S(0),t=Ue();if(!t.buffer)return void H("audio not loaded");if(x(0,ge),!M(1,0))return void H("bus must be an AudioBus");let n=Me.get(R(1));x(1,Ee);let r=k(0,1,0),o=new Re(r,t,e,n);Ae.set(r,o)}},{"load_(_,_)"(){ce((async e=>{let t=await async function(e,t){let n=await l(e,"arraybuffer",t),r="ogg"===function(e){let t=e.lastIndexOf(".");return t<0?"":e.slice(t+1).toLowerCase()}(e);try{if(r&&!Fe)return await xe(n);null==he&&(he=new OfflineAudioContext(1,1,44100));try{return await he.decodeAudioData(n)}catch(t){if(r)return console.info(`Failed to natively decode ${e}, switching to JavaScript OGG decoder`,t),Fe=!1,await xe(n);throw t}}catch(t){throw console.error(t),Error(`failed to decode audio ${e}`)}}(e);w(1),x(0,pe);let n=k(0,0,0),r=new ye(n);return Se.set(n,r),r.setBuffer(t),new se(S(0))}))},volume(){j(0,ue.gain.value/.5)},"fadeVolume(_,_)"(){for(let e=1;e<=2;e++)if(1!==O(e))return void H("args must be Nums");let e=.5*D(1),t=D(2);be(ue,e,t)}}),o("sock","Voice",[()=>{},e=>{C(Ae.get(e).audioHandle),Ae.delete(e)}],{"play()"(){je().play()},"pause()"(){je().pause()},isPaused(){let e=je();U(0,0===e.state||2===e.state)},"stop()"(){let e=je();e.source.stop(),e.state=3},volume(){j(0,je().gain.gain.value)},"fadeVolume(_,_)"(){He(je().gain)},rate(){j(0,je().source.playbackRate.value)},"fadeRate(_,_)"(){for(let e=1;e<=2;e++)if(1!==O(e))return void H("args must be Nums");let e=D(1),t=D(2);Te(je().source.playbackRate,e,t)},loop(){U(0,je().source.loop)},"loop=(_)"(){if(0!==O(1))return void H("loop must be a Bool");let e=je(),t=y(1);e.source.loop=t,t&&(e.source.loopEnd=e.audio.buffer.duration)},loopStart(){j(0,je().source.loopStart)},"loopStart=(_)"(){if(1!==O(1))return void H("loopStart must be a Num");let e=je(),t=D(1);e.source.loopStart=t},"setEffect_(_,_,_,_,_,_)"(){ke(je())},"getEffect_(_)"(){Le(je())},"getParam_(_,_,_)"(){Ne(je())},"setParam_(_,_,_,_,_)"(){Ce(je())}}),r("sock","Buffer",{"load_(_,_)"(){ce((async e=>{let t=await l(e,"arraybuffer"),n=t.byteLength,r=0;if(n>0){if(r=h._malloc(n),!r)throw`could not allocate ${n} bytes`;h.HEAPU8.set(new Uint8Array(t),r)}return h.ccall("sock_new_buffer",null,["number","number"],[r,n]),new se(S(0))}))}});let Ge=null;function Xe(e){if(null==Ge)return H("id must be set before using other Storage methods"),null;if(6!==O(e))return H("key must be a string"),null;let t=T(e);if(Qe(t))return Ge+"/"+t;H("key may only contain letters, numbers, underscores and dashes")}function Qe(e){return/^[a-zA-Z0-9_\-]+$/.test(e)}function Be(e,t,n){let r=document.createElement(e);if(t)for(let e in t){let n=t[e];e.startsWith("on")?r[e]=n:!0===n?r.setAttribute(e,""):null==n||!1===n||r.setAttribute(e,n)}if(n)if(Array.isArray(n))for(let e of n)r.append(e);else r.append(n);return r}r("sock","Storage",{id(){Ge?F(0,Ge):v(0)},"id=(_)"(){if(6!==O(1))return void H("id must be a String");let e=T(1);Qe(e)?Ge=e:H("id may only contain letters, numbers, underscores and dashes")},"contains(_)"(){let e=Xe(1);e&&U(0,null!==localStorage.getItem(e))},"load_(_)"(){let e=Xe(1);if(e){let t=localStorage.getItem(e);null==t?v(0):F(0,t)}},"save_(_,_)"(){if(6!==O(2))return void H("value must be a String");let e=Xe(1);if(e){let t=T(2);localStorage.setItem(e,t)}},"delete(_)"(){let e=Xe(1);e&&localStorage.removeItem(e)}});let Ye=0,We=0,Ze=0,Ve=0,ze=0,qe=0,Ke=1,$e=1,Je=1,et={pixelScaling:!1,resolution:null,maxScale:1/0},tt=Be("div",{style:"position: fixed; pointer-events: none;"}),nt=0;let rt=!1;function ot(){rt=!0}function it(){Ye=innerWidth,We=innerHeight;let e,t,n,r=devicePixelRatio;ne.width=Ye*r,ne.height=We*r,ne.style.width=Ye+"px",ne.style.height=We+"px";let o=et.resolution;if(o){e=o[0],t=o[1];let r=Ye/e,i=We/t;n=Math.min(r,i,et.maxScale),et.pixelScaling&&n>1&&(n=Math.floor(n))}else e=Ye,t=We,n=1;Ze=e,Ve=t,Je=n,Ke=Math.floor(n*e),$e=Math.floor(n*t),ze=Math.floor((Ye-Ke)/2),qe=Math.floor((We-$e)/2);let i=tt.style;i.left=ze+"px",i.top=qe+"px",i.width=Ke+"px",i.height=$e+"px"}addEventListener("resize",(()=>{ot()}));let at=0,st=0,ct=1,lt=new Float32Array(9),dt=!0;function ut(){if(dt){dt=!1;let e=2/Ze,t=-2/Ve;lt[0]=e,lt[1]=0,lt[2]=0,lt[3]=0,lt[4]=t,lt[5]=0,lt[6]=-at*e-1,lt[7]=-st*t+1,lt[8]=1}return lt}n("","Camera",!0,"update_(_,_,_)",(()=>{for(let e=1;e<=3;e++)if(1!==O(e))return void H("args must be Num");at=D(1),st=D(2),ct=D(3),dt=!0}));let ft=ne.getContext("webgl",{antialias:!1});ft.enable(ft.BLEND),ft.blendFuncSeparate(ft.SRC_ALPHA,ft.ONE_MINUS_SRC_ALPHA,ft.ONE,ft.ONE_MINUS_SRC_ALPHA),re.gl=ft;const ht={linear:ft.LINEAR,nearest:ft.NEAREST},pt={clamp:ft.CLAMP_TO_EDGE,repeat:ft.REPEAT,mirror:ft.MIRRORED_REPEAT};function gt(e){if(6!==O(e))return void H("filter must be a String");let t=T(e);return ht.hasOwnProperty(t)?ht[t]:(H(`invalid filter "${t}"`),null)}function Et(e){if(6!==O(e))return void H("wrap mode must be a String");let t=T(e);return pt.hasOwnProperty(t)?pt[t]:(H(`invalid wrap mode "${t}"`),null)}function _t(e){for(let t in ht)if(ht[t]===e)return t;return"???"}function bt(e){for(let t in pt)if(pt[t]===e)return t;return"???"}let wt=null,Ot=0,yt=ft.createBuffer();function Tt(e){if(ft.bindBuffer(ft.ELEMENT_ARRAY_BUFFER,yt),null==wt||wt.length<e){let t=wt?wt.length:256;for(;t<e;)t*=2;let n=new Uint16Array(t);null!=wt&&n.set(wt);let r=Ot/1.5;for(;Ot+5<t;Ot+=6)n[Ot]=r,n[Ot+1]=r+1,n[Ot+2]=r+2,n[Ot+3]=r+1,n[Ot+4]=r+3,n[Ot+5]=r+2,r+=4;ft.bufferData(ft.ELEMENT_ARRAY_BUFFER,n,ft.DYNAMIC_DRAW),wt=n,re.quadSize=t}}let mt=[];class Dt{constructor(e){this.attributes={},this.uniforms={};let t=Pt("attribute",e.attributes,this.attributes,-1),n=Pt("varying",e.varyings,null,null),r=Pt("uniform",e.vertUniforms,this.uniforms,null),o=Pt("uniform",e.fragUniforms,this.uniforms,null);this.vertSource=t+n+r+Rt(e.vert??""),this.fragSource=n+o+Rt(e.frag??"gl_FragColor=vec4(1.0,0.0,1.0,1.0);"),this._vert=ft.createShader(ft.VERTEX_SHADER),ft.shaderSource(this._vert,this.vertSource),this._frag=ft.createShader(ft.FRAGMENT_SHADER),ft.shaderSource(this._frag,this.fragSource),this.prog=ft.createProgram(),ft.attachShader(this.prog,this._vert),ft.attachShader(this.prog,this._frag),this.compiled=!1}compile(){Dt.compile(this)}needsCompilation(){mt.push(this)}free(){ft.deleteProgram(this.prog),ft.deleteShader(this._frag),ft.deleteShader(this._vert),this.prog=-1,this.compiled=!1}use(){if(!this.compiled)throw Error("shader not compiled");ft.useProgram(this.prog)}getUniformLocation(e){let t=this.uniforms[e];if(null==t)throw Error(`Shader does not contain a uniform named "${e}"`);return t}setUniformTexture(e,t,n){let r=this.getUniformLocation(e);n>=ft.TEXTURE0&&(n-=ft.TEXTURE0),ft.activeTexture(ft.TEXTURE0+n),ft.bindTexture(ft.TEXTURE_2D,t),ft.uniform1i(r,n)}setUniformMatrix3(e,t){let n=this.getUniformLocation(e);ft.uniformMatrix3fv(n,!1,t)}setUniformMatrix4(e,t){let n=this.getUniformLocation(e);ft.uniformMatrix4fv(n,!1,t)}static compileAll(){this.compile(mt),mt.length=0}static compile(e){e instanceof Dt&&(e=[e]);for(let t of e)ft.compileShader(t._vert),ft.compileShader(t._frag);for(let t of e)ft.linkProgram(t.prog);let t=[];for(let n of e)if(ft.getProgramParameter(n.prog,ft.LINK_STATUS))n.compiled=!0;else{let e=ft.getProgramInfoLog(n.prog),r=ft.getShaderInfoLog(n._vert),o=ft.getShaderInfoLog(n._frag),i="Shader Compilation Error:";e&&(i+="\n\n===   PROGRAM   ===\n"+e),r&&(i+="\n\n=== VERT SHADER ===\n"+r),o&&(i+="\n\n=== FRAG SHADER ===\n"+o),t.push(i)}if(t.length>0)throw Error(t.join("\n\n"));for(let t of e){for(let e in t.attributes)t.attributes[e]=ft.getAttribLocation(t.prog,e);for(let e in t.uniforms){let n=ft.getUniformLocation(t.prog,e);if(null==n)throw Error(`Failed to find uniform "${e}" in Shader.`);t.uniforms[e]=n}}}}function Pt(e,t,n,r){let o="";if(t)for(let i in t)n&&(n[i]=r),o+=e+" "+t[i]+" "+i+";\n";return o}function Rt(e){return Array.isArray(e)&&(e=e.join("")),"void main(){"+e+"}"}class Mt{constructor(e,t){this.x=e,this.y=t}}class St{constructor(e,t){this.width=0,this.height=0,this.filter=e,this.wrap=t,this.size=1,this.texture=null}name(){return"Texture"}setFilter(e){this.filter!==e&&(this.filter=e,this.texture&&(ft.bindTexture(ft.TEXTURE_2D,this.texture),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MAG_FILTER,this.filter),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MIN_FILTER,this.filter)))}setWrap(e){this.wrap!==e&&(this.wrap=e,this.texture&&(ft.bindTexture(ft.TEXTURE_2D,this.texture),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_S,this.wrap),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_T,this.wrap)))}load(e){let t=function(e){return e instanceof HTMLImageElement?new Mt(e.naturalWidth,e.naturalHeight):e instanceof HTMLVideoElement?new Mt(e.videoWidth,e.videoHeight):new Mt(e.width,e.height)}(e);if(this.width=t.x,this.height=t.y,this.size=function(e,t){if(e instanceof HTMLImageElement){let t=performance.getEntriesByName(e.src)[0];if(t instanceof PerformanceResourceTiming)return t.decodedBodySize||t.transferSize}else if(e instanceof ImageData)return e.data.byteLength;return 1+Math.floor(t.x*t.y*.25)}(e,t),this.texture=ft.createTexture(),ft.bindTexture(ft.TEXTURE_2D,this.texture),ft.texImage2D(ft.TEXTURE_2D,0,ft.RGBA,ft.RGBA,ft.UNSIGNED_BYTE,e),!(At(this.width)&&At(this.height))){let e=[];this.wrap!==ft.CLAMP_TO_EDGE&&(this.wrap=ft.CLAMP_TO_EDGE,e.push("wrap mode to CLAMP_TO_EDGE")),e.length>0&&console.warn(`Forced settings on non power-of-two texture "${this.name()}": ${e.join(", ")}.\nThe texture would not function properly otherwise, see https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support`)}ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MAG_FILTER,this.filter),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MIN_FILTER,this.filter),null!=this.wrap&&this.wrap!==ft.REPEAT&&(ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_S,this.wrap),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_T,this.wrap))}free(){ft.deleteTexture(this.texture),this.texture=null}}function At(e){return 0==(e&e-1)}let vt=new Dt({attributes:{vertex:"vec3",color:"vec4",uv:"vec2"},varyings:{v_color:"lowp vec4",v_uv:"highp vec2"},vertUniforms:{mat:"mat3"},vert:["v_uv = uv;","v_color = color;","vec3 tv = mat * vec3(vertex.x, vertex.y, 1.0);","gl_Position = vec4(tv.x, tv.y, vertex.z, 1.0);"],fragUniforms:{tex:"sampler2D"},frag:"gl_FragColor = texture2D(tex, v_uv) * v_color;"});vt.needsCompilation();class Ut{constructor(){this._capacity=128,this._array=new ArrayBuffer(24*this._capacity),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=new Uint32Array(this._array),this._vertexCount=-1,this._vertexBuffer=ft.createBuffer(),this._vertexBufferCapacity=0}begin(e){if(this._vertexCount>=0)throw Error("already called begin()");return this._texture=e,this._vertexCount=0,this}drawQuad(e,t,n,r,o,i,a,s,c,l,d,u){if(this.checkResize(4),d){let f=e*d[0]+t*d[2]+d[4],h=e*d[1]+t*d[3]+d[5],p=e*d[0]+r*d[2]+d[4],g=e*d[1]+r*d[3]+d[5],E=n*d[0]+t*d[2]+d[4],_=n*d[1]+t*d[3]+d[5],b=n*d[0]+r*d[2]+d[4],w=n*d[1]+r*d[3]+d[5],O=u?e+u[0]:(e+n)/2,y=u?t+u[1]:(t+r)/2,T=O-d[0]*O-d[2]*y,m=y-d[1]*O-d[3]*y;this.addVertex(f+T,h+m,o,l,i,a),this.addVertex(p+T,g+m,o,l,i,c),this.addVertex(E+T,_+m,o,l,s,a),this.addVertex(b+T,w+m,o,l,s,c)}else this.addVertex(e,t,o,l,i,a),this.addVertex(e,r,o,l,i,c),this.addVertex(n,t,o,l,s,a),this.addVertex(n,r,o,l,s,c)}addVertex(e,t,n,r,o,i){let a=6*this._vertexCount;this._floats[a]=e,this._floats[a+1]=t,this._floats[a+2]=n,this._ints[a+3]=r,this._floats[a+4]=o,this._floats[a+5]=i,this._vertexCount++}checkResize(e){if(this._vertexCount+e>this._capacity){if(this._capacity*=2,this._capacity>=1048575)throw Error("exceeded max batch capacity of 1048575, did you forget to call end()?");this._array=new ArrayBuffer(24*this._capacity);let e=new Uint32Array(this._array);e.set(this._ints),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=e}}end(){if(this._vertexCount<0)throw Error("have not called begin()");if(this._vertexCount>0){vt.use(),ft.bindBuffer(ft.ARRAY_BUFFER,this._vertexBuffer),this._vertexCount>this._vertexBufferCapacity?(this._vertexBufferCapacity=this._capacity,ft.bufferData(ft.ARRAY_BUFFER,this._array,ft.DYNAMIC_DRAW)):ft.bufferSubData(ft.ARRAY_BUFFER,0,this._ints.subarray(0,6*this._vertexCount));let e=vt.attributes.vertex,t=vt.attributes.color,n=vt.attributes.uv;ft.vertexAttribPointer(e,3,ft.FLOAT,!1,24,0),ft.enableVertexAttribArray(e),ft.vertexAttribPointer(t,4,ft.UNSIGNED_BYTE,!0,24,12),ft.enableVertexAttribArray(t),ft.vertexAttribPointer(n,2,ft.FLOAT,!1,24,16),ft.enableVertexAttribArray(n),vt.setUniformTexture("tex",this._texture.texture,0),vt.setUniformMatrix3("mat",ut());let r=1.5*this._vertexCount;Tt(r),ft.drawElements(ft.TRIANGLES,r,ft.UNSIGNED_SHORT,0),ft.disableVertexAttribArray(e),ft.disableVertexAttribArray(t),ft.disableVertexAttribArray(n)}this._vertexCount=-1}free(){ft.deleteBuffer(this._vertexBuffer),this._array=this._bytes=this._floats=this._ints=null}}let jt=0;let It=ft.NEAREST,Ft=ft.CLAMP_TO_EDGE;class xt extends St{constructor(e){super(It,Ft),this.ptr=e,this.path=null,this.batcher=null,this.color=4294967295,this.tfo=null,this.tf=null}name(){return this.path||"Sprite#"+this.ptr}beginBatch(){this.batcher=kt.length>0?kt.pop():(console.log("allocate new sprite batcher"),new Ut),this.batcher.begin(this)}endBatch(){this.batcher.end(),kt.push(this.batcher),this.batcher=null}}let kt=[];function Lt(){if(kt.length>0)return kt[0];{console.log("allocate new sprite batcher");let e=new Ut;return kt.push(e),e}}let Nt,Ct,Ht=new Map;function Gt(){return Ht.get(R(0))}o("sock","Sprite",[()=>{let e=k(0,0,0),t=new xt(e);Ht.set(e,t)},e=>{Ht.get(e).free(),Ht.delete(e)}],{width(){j(0,Gt().width)},height(){j(0,Gt().height)},scaleFilter(){F(0,_t(Gt().filter))},"scaleFilter=(_)"(){let e=gt(1);null!=e&&Gt().setFilter(e)},wrapMode(){F(0,bt(Gt().wrap))},"wrapMode=(_)"(){let e=Et(1);null!=e&&Gt().setWrap(e)},color(){j(0,Gt().color)},"color=(_)"(){1===O(1)?Gt().color=D(1):H("color must be Num")},"beginBatch()"(){let e=Gt();e.batcher?H("batch already started"):e.beginBatch()},"endBatch()"(){let e=Gt();e.batcher?e.endBatch():H("batch no yet started")},transform_(){let e=Gt();if(null==e.tf)v(0);else{w(2),L(0);for(let t=0;t<6;t++)j(1,e.tf[t]),P(0,-1,1)}},"setTransform_(_,_,_,_,_,_)"(){for(let e=1;e<=6;e++)if(1!==O(e))return void H("args must be Nums");let e=Gt(),t=D(1);isNaN(t)?e.tf=null:e.tf=[t,D(2),D(3),D(4),D(5),D(6)]},transformOrigin_(){let e=Gt();if(null==e.tfo)v(0);else{w(2),L(0);for(let t=0;t<2;t++)j(1,e.tfo[t]),P(0,-1,1)}},"setTransformOrigin(_,_)"(){for(let e=1;e<=2;e++)if(1!==O(e))return void H("args must be Nums");let e=Gt(),t=D(1);isNaN(t)?e.tfo=null:e.tfo=[t,D(2)]},"draw(_,_,_,_,_)"(){let e=Gt(),t=D(1),n=D(2),r=D(3),o=t+D(4),i=n+D(5),a=e.batcher||Lt().begin(e);a.drawQuad(t,n,o,i,r,0,0,1,1,e.color,e.tf,e.tfo),e.batcher||a.end()},"draw(_,_,_,_,_,_,_,_,_)"(){let e=Gt(),t=D(1),n=D(2),r=D(3),o=t+D(4),i=n+D(5),a=D(6)/e.width,s=D(7)/e.height,c=a+D(8)/e.width,l=s+D(9)/e.height,d=e.batcher||Lt().begin(e);d.drawQuad(t,n,o,i,r,a,s,c,l,e.color,e.tf,e.tfo),e.batcher||d.end()},toString(){F(0,Gt().name())}},{"load_(_,_)"(){ce((async(e,t)=>{let n=await d(e);w(2),x(0,jt);let r=k(0,0,0),o=new xt(r);return o.path=t,Ht.set(r,o),o.load(n),new se(S(0))}))},defaultScaleFilter(){F(0,_t(It))},"defaultScaleFilter=(_)"(){let e=gt(1);null!=e&&(It=e)},defaultWrapMode(){F(0,bt(Ft))},"defaultWrapMode=(_)"(){let e=Et(1);null!=e&&(Ft=e)}});let Xt=!1,Qt=navigator.platform,Bt=navigator.userAgent;"iPhone"===Qt||"iPad"===Qt||Bt.includes("iPhone")?(Nt="ios",Xt=!0):"Win32"===Qt?Nt="windows":Qt.includes("Mac")?Nt="mac":Bt.includes("Android")?(Nt="android",Xt=!0):Nt="linux",Ct=Bt.includes("Edg/")?"edge":Bt.includes("Chrome/")?"chrome":Bt.includes("Safari/")?"safari":Bt.includes("Firefox/")?"firefox":"unknown",re.device={os:Nt,isMobile:Xt,browser:Ct};let Yt=new Dt({attributes:{vertex:"vec2"},varyings:{v_uv:"highp vec2"},vert:["v_uv = 0.5 + vertex.xy * 0.5;","gl_Position = vec4(vertex, 0.0, 1.0);"],fragUniforms:{tex:"sampler2D"},frag:"gl_FragColor = texture2D(tex, v_uv);"});Yt.needsCompilation();let Wt,Zt,Vt=new class{constructor(e){this.filter=e??ft.LINEAR,this.texture=ft.createTexture(),this.depthBuffer=ft.createRenderbuffer(),this.framebuffer=ft.createFramebuffer(),this.quadBuffer=ft.createBuffer(),ft.bindBuffer(ft.ARRAY_BUFFER,this.quadBuffer),ft.bufferData(ft.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),ft.STATIC_DRAW),ft.bindTexture(ft.TEXTURE_2D,this.texture),ft.texImage2D(ft.TEXTURE_2D,0,ft.RGBA,8,8,0,ft.RGBA,ft.UNSIGNED_BYTE,null)}updateResolution(){ft.bindTexture(ft.TEXTURE_2D,this.texture),ft.texImage2D(ft.TEXTURE_2D,0,ft.RGBA,Ze,Ve,0,ft.RGBA,ft.UNSIGNED_BYTE,null),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MIN_FILTER,this.filter),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MAG_FILTER,this.filter),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_S,ft.CLAMP_TO_EDGE),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_T,ft.CLAMP_TO_EDGE),ft.bindRenderbuffer(ft.RENDERBUFFER,this.depthBuffer),ft.renderbufferStorage(ft.RENDERBUFFER,ft.DEPTH_COMPONENT16,Ze,Ve),ft.bindFramebuffer(ft.FRAMEBUFFER,this.framebuffer),ft.framebufferTexture2D(ft.FRAMEBUFFER,ft.COLOR_ATTACHMENT0,ft.TEXTURE_2D,this.texture,0),ft.framebufferRenderbuffer(ft.FRAMEBUFFER,ft.DEPTH_ATTACHMENT,ft.RENDERBUFFER,this.depthBuffer)}setFilter(e){this.filter=e,ft.bindTexture(ft.TEXTURE_2D,this.texture),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MIN_FILTER,this.filter),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MAG_FILTER,this.filter)}bind(){ft.bindFramebuffer(ft.FRAMEBUFFER,this.framebuffer),ft.viewport(0,0,Ze,Ve)}unbind(){ft.bindFramebuffer(ft.FRAMEBUFFER,null);let e=devicePixelRatio;ft.viewport(ze*e,qe*e,Ke*e,$e*e)}draw(){this.unbind(),Yt.use(),Yt.setUniformTexture("tex",this.texture,0);let e=Yt.attributes.vertex;ft.bindBuffer(ft.ARRAY_BUFFER,this.quadBuffer),ft.vertexAttribPointer(e,2,ft.FLOAT,!1,0,0),ft.enableVertexAttribArray(e),ft.drawArrays(ft.TRIANGLES,0,6),ft.disableVertexAttribArray(e)}free(){ft.deleteFramebuffer(this.framebuffer),ft.deleteBuffer(this.quadBuffer),ft.deleteTexture(this.texture),ft.deleteRenderbuffer(this.depthBuffer)}}(ft.NEAREST);function zt(e,t,n,r){"string"==typeof e&&(e=(new TextEncoder).encode(e));let o=null==r?4294967295:"number"==typeof r?r:r.int,i=[at,st,ct];at=0,st=0,ct=1,dt=!0,Zt||(Zt=new Ut),Zt.begin(Wt);let a=t,s=n;for(let n=0;n<e.length;n++){let r=e[n];if(9==r)a+=24;else if(10===r)a=t,s+=14;else if(13==r);else if(32==r)a+=6;else{(r<32||r>127)&&(r=127);let e=r-32,t=e%16*6,n=12*Math.trunc(e/16);Zt.drawQuad(a,s,a+6,s+12,0,t/96,n/72,(t+6)/96,(n+12)/72,o),a+=6}}var c;return Zt.end(),c=i,[at,st,ct]=c,dt=!0,s}let qt=document.title,Kt=60,$t=!1,Jt=!1,en=null,tn="default",nn=4294967295,rn=!1,on=!1;r("sock","Game",{title(){F(0,qt)},"title=(_)"(){6===O(1)?document.title=qt=T(1):H("title must be a String")},"layoutChanged_(_,_,_,_,_)"(){if(1!==O(1)||1!==O(2)||0!==O(3)||0!==O(4)||1!==O(5))return void H("invalid args");let e=D(1),t=D(2),n=y(3),r=y(4),o=D(5);e<1||t<1||o<1?H("resolution/scale must be positive"):(et.pixelScaling=r,et.resolution=n?[Math.trunc(e),Math.trunc(t)]:null,et.maxScale=Math.trunc(o),ot())},scaleFilter:()=>Vt.filter?"nearest":"linear","scaleFilter=(_)"(){let e=gt(1);null!=e&&Vt.setFilter(e)},fullscreenAllowed(){U(0,document.fullscreenEnabled)},fullscreen(){U(0,rn||null!=document.fullscreenElement)},"setFullscreen_(_)"(){if(0!==O(1))return void H("fullscreen must be a Bool");if(y(1)){if(!rn&&!document.fullscreenElement){if(!document.fullscreenEnabled)return void console.warn("fullscreen is blocked by the browser, see Game.fullscreenAllowed");rn=!0,document.body.requestFullscreen().then((()=>{rn=!1}),(()=>{on=!0;let e=`Please ${Xt?"tap":"press any mouse or keyboard button"} to enter fullscreen.`,t=Be("div",{class:"overlay"},[Be("img",{style:"width: 185px; margin-bottom: 14px;",class:"pixel",alt:"icons of a mouse, keyboard, and fullscreen warning",src:"data:image/gif;base64,R0lGODdhJQAJAJAAAAAAAP///yH5BAkKAAAALAAAAAAlAAkAAAIzjB+ge2zrEFIJVHgxpJvW311Z6H2g1Wkph5rSuMFqY43ySrZenKOsGrP1gJGXMfQoIY0FADs="}),e]),n=()=>{document.body.requestFullscreen().catch((e=>{console.warn("DOM fullscreen fallback failed",e)})).then((()=>{rn=!1,on=!1,t.remove(),removeEventListener("keydown",n)}))};t.onclick=n,addEventListener("keydown",n),document.body.append(t)}))}}else rn=!1,document.fullscreenElement&&document.exitFullscreen()},fps(){Kt<0?v(0):j(0,Kt)},"fps=(_)"(){let e=O(1);if(5===e)Kt=-1;else if(1===e){let e=D(1);Kt<=0?H("fps must be positive"):Kt=e}else H("fps must be Num or null")},cursor(){F(0,tn)},"cursor=(_)"(){let e=O(1);if(5===e)tn="default";else{if(6!==e)return void H("cursor must be null or a string");{let e=T(1);if(!an.hasOwnProperty(e))return void H(`invalid cursor type "${e}"`);tn=e}}ne.style.cursor=an[tn]||tn},"quit()"(){$t=!0},"ready_()"(){Jt=!0,en&&(en(),en=null)},"print_(_,_,_)"(){if(6!==O(1)||1!==O(2)||1!==O(3))return void H("invalid args");j(0,zt(m(1),Math.trunc(D(2)),Math.trunc(D(3)),nn))},"setPrintColor_(_)"(){1===O(1)?nn=D(1):H("color must be a Num")},"clear_(_,_,_)"(){for(let e=1;e<=3;e++)if(1!==O(e))return void H("colors must be numbers");let e=D(1),t=D(2),n=D(3);ft.clearColor(e,t,n,1),ft.clear(ft.COLOR_BUFFER_BIT)},"openURL(_)"(){if(6!==O(1))return void H("url must be a string");let e=T(1);open(e,"_blank","noreferrer")}});let an={default:"",pointer:"",wait:"progress",hidden:"none"},sn=0;function cn(){var e;w(1),A("sock","Game",0),sn=S(0),e=Z,w(3),x(0,sn),j(1,Ye),j(2,We),N(e||z)}function ln(e){w(2),L(0);for(let t of e)j(1,t),P(0,-1,1)}r("sock","Screen",{sz_(){ln([screen.width,screen.height])},sza_(){ln([screen.availWidth,screen.availHeight])}});let dn=new Dt({attributes:{vertex:"vec3",color:"vec4"},varyings:{v_color:"lowp vec4"},vertUniforms:{mat:"mat3"},vert:["v_color = color;","vec3 tv = mat * vec3(vertex.x, vertex.y, 1.0);","gl_Position = vec4(tv.x, tv.y, vertex.z, 1.0);"],frag:"gl_FragColor = v_color;"});dn.needsCompilation();class un extends class{constructor(){this._capacity=128,this._array=new ArrayBuffer(16*this._capacity),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=new Uint32Array(this._array),this._vertexCount=-1,this._vertexBuffer=ft.createBuffer(),this._vertexBufferCapacity=0}free(){ft.deleteBuffer(this._vertexBuffer),this._array=this._bytes=this._floats=this._ints=null}drawBatch(){}checkResize(e){if(this._vertexCount+e>this._capacity){if(console.log("expand vertex buffer"),this._capacity*=2,this._capacity>=1048575)throw Error("exceeded max batch capacity of 1048575, did you forget to call end()?");this._array=new ArrayBuffer(16*this._capacity);let e=new Uint32Array(this._array);e.set(this._ints),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=e}}addVertex(e,t,n,r){let o=4*this._vertexCount;this._floats[o]=e,this._floats[o+1]=t,this._floats[o+2]=n,this._ints[o+3]=r,this._vertexCount++}inBatch(){return this._vertexCount>=0}begin(){if(this.inBatch())throw Error("already called begin()");this._vertexCount=0}end(){if(!this.inBatch())throw Error("not yet called begin()");this._vertexCount>0&&this.drawBatch(),this._vertexCount=-1}}{drawRect(e,t,n,r,o,i,a,s){this.drawQuad(e,t,e,r,n,t,n,r,o,i,a,s)}drawQuad(e,t,n,r,o,i,a,s,c,l,d,u){if(this.checkResize(4),d){let f=e*d[0]+t*d[2]+d[4],h=e*d[1]+t*d[3]+d[5],p=n*d[0]+r*d[2]+d[4],g=n*d[1]+r*d[3]+d[5],E=o*d[0]+i*d[2]+d[4],_=o*d[1]+i*d[3]+d[5],b=a*d[0]+s*d[2]+d[4],w=a*d[1]+s*d[3]+d[5],O=u?e+u[0]:(e+n)/2,y=u?t+u[1]:(t+r)/2,T=O-d[0]*O-d[2]*y,m=y-d[1]*O-d[3]*y;this.addVertex(f+T,h+m,c,l),this.addVertex(p+T,g+m,c,l),this.addVertex(E+T,_+m,c,l),this.addVertex(b+T,w+m,c,l)}else this.addVertex(e,t,c,l),this.addVertex(n,r,c,l),this.addVertex(o,i,c,l),this.addVertex(a,s,c,l)}drawBatch(){if(this._vertexCount<0)throw Error("have not called begin()");if(this._vertexCount>0){dn.use(),ft.bindBuffer(ft.ARRAY_BUFFER,this._vertexBuffer),this._vertexCount>this._vertexBufferCapacity?(this._vertexBufferCapacity=this._capacity,ft.bufferData(ft.ARRAY_BUFFER,this._array,ft.DYNAMIC_DRAW)):ft.bufferSubData(ft.ARRAY_BUFFER,0,this._ints.subarray(0,6*this._vertexCount));let e=dn.attributes.vertex,t=dn.attributes.color;ft.vertexAttribPointer(e,3,ft.FLOAT,!1,16,0),ft.enableVertexAttribArray(e),ft.vertexAttribPointer(t,4,ft.UNSIGNED_BYTE,!0,16,12),ft.enableVertexAttribArray(t),dn.setUniformMatrix3("mat",ut());let n=1.5*this._vertexCount;Tt(n),re.quadInfo=`vertexCount=${this._vertexCount} indexCount=${n}`,ft.drawElements(ft.TRIANGLES,n,ft.UNSIGNED_SHORT,0),ft.disableVertexAttribArray(e),ft.disableVertexAttribArray(t)}this._vertexCount=-1}}let fn=null;r("sock","Quad",{"beginBatch()"(){fn||(fn=new un),fn.inBatch()?H("batch already started"):fn.begin()},"endBatch()"(){fn||(fn=new un),fn.inBatch()?fn.end():H("batch not yet started")},"draw(_,_,_,_,_)"(){for(let e=1;e<=5;e++)if(1!==O(e))return void H("args must be Nums");let e=D(1),t=D(2),n=D(3),r=D(4),o=D(5);fn||(fn=new un);let i=!fn.inBatch();i&&fn.begin(),fn.drawRect(e,t,e+n,t+r,0,o),i&&fn.end()},"draw(_,_,_,_,_,_,_,_,_)"(){for(let e=1;e<=9;e++)if(1!==O(e))return void H("args must be Nums");let e=D(1),t=D(2),n=D(3),r=D(4),o=D(5),i=D(6),a=D(7),s=D(8),c=D(9);fn||(fn=new un);let l=!fn.inBatch();l&&fn.begin(),fn.drawQuad(e,t,n,r,o,i,a,s,0,c),l&&fn.end()}});const hn="QWERTZ",pn="AZERTY";let gn="QWERTY";(navigator.language||"en-US").includes("fr")&&(gn=pn);let En=0,_n=e=>{let t=e.code,n=e.key.toLowerCase();"KeyQ"===t?(En++,"a"===n&&(gn=pn,console.log("layout is "+gn+"?"))):"KeyA"===t?(En++,"q"===n&&(gn=pn,console.log("layout is "+gn+"?"))):"KeyW"===t?(En++,"z"===n&&(gn=pn,console.log("layout is "+gn+"?"))):"KeyZ"===t?(En++,"w"===n&&(gn=pn,console.log("layout is "+gn+"?"))):"KeyY"===t?(En++,"z"===n&&(gn=hn,console.log("layout is "+gn+"?"))):"KeyZ"===t&&(En++,"y"===n&&(gn=hn,console.log("layout is "+gn+"?"))),En>=3&&removeEventListener("keydown",_n)};addEventListener("keydown",_n,{passive:!0});let bn=Be("input"),wn=Be("form",{},[bn]);function On(){wn.parentNode&&(wn.remove(),nt--,0===nt&&tt.remove())}bn.placeholder="Text",wn.onsubmit=e=>{e.preventDefault(),On()},bn.onblur=()=>{setTimeout((()=>{document.activeElement!==bn&&On()}),1)},bn.onkeydown=e=>{"Escape"===e.code&&On()},r("sock","Input",{"localize(_)"(){let e=O(1);if(5===e)return void v(0);if(6!==e)return void H("input ID must be a String");let t=T(1);"AZERTY"===gn?"Q"===t?t="A":"A"===t?t="Q":"Z"===t?t="W":"W"===t?t="Z":"M"===t?t=",":","===t?t=";":";"===t&&(t="M"):"QWERTZ"===gn&&("Z"===t?t="Y":"Y"===t&&(t="Z")),F(0,t)},"textBegin(_)"(){let e=O(1);if(5===e)bn.type="text";else{if(6!==e)return void H("type must be a String");{let e=T(1);if("text"!==e&&"number"!==e&&"password"!==e)return void H(`invalid text type '${e}'`);bn.type=e}}wn.className="text-form invisible",bn.className="text",bn.value="",wn.parentNode||(0===nt&&document.body.append(tt),nt++,tt).append(wn),(Xt||(bn.focus(),document.activeElement!==bn))&&(wn.className="text-form",wn.onclick=e=>{e.target===wn&&On()},bn.className="text")},textDescription(){F(0,bn.placeholder)},"textDescription=(_)"(){6===O(1)?bn.placeholder=T(1):H("description must be String")},textIsActive(){U(0,document.activeElement===bn)},textSelection(){if(document.activeElement===bn){let e=bn.selectionStart,t=bn.selectionEnd;if("backward"===bn.selectionDirection){let n=e;e=t,t=n}I(0,e,t,1,!0)}else I(0,0,0,1,!0)},textString(){F(0,bn.value)}});let yn=0,Tn=new Set,mn=Object.create(null),Dn=0,Pn=0,Rn=0,Mn=0,Sn=0,An=0,vn=0;function Un(){Cn(),jn()}function jn(){w(4),x(0,yn),j(1,Dn),j(2,Pn),j(3,vn),N($)}function In(e,t){t!==mn[e]&&(mn[e]=t,Tn.add(e))}function Fn(e,t,n){In(e,n<0?-n:0),In(t,n>0?n:0)}function xn(e,t){In(kn[e]||e,t)}const kn=Object.assign(Object.create(null),{Backquote:"`",Minus:"-",Equal:"=",Comma:",",Period:".",Slash:"/",Semicolon:";",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\"});for(let e=0;e<=25;e++){let t=String.fromCharCode(65+e);kn["Key"+t]=t}for(let e=0;e<=9;e++)kn["Digit"+e]=String(e);function Ln(e,t){for(let n=0;n<e.length;n++){let r=e[n],o=r.identifier,i=(r.clientX-ze)/Je,a=(r.clientY-qe)/Je,s=r.force;0===s&&(s=t?1:0),w(6),x(0,yn),j(1,o),U(2,t),j(3,s),j(4,i),j(5,a),N(J)}}function Nn(e,t){Sn=e,An=t,Cn()}function Cn(){Rn=(Sn-ze)/Je,Mn=(An-qe)/Je,Dn=Math.floor(Rn),Pn=Math.floor(Mn)}function Hn(e,t){let n;0===e?n="Left":1===e?n="Middle":2===e&&(n="Right"),In("Mouse"+(n||e),t)}function Gn(e){return JSON.parse(e,((e,t)=>{if(Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&""===t[0][0]){let e=t[0].slice(1);if(t=t[1],"Num"===e)return"infinity"===t?1/0:"nan"===t?NaN:Number(t);if("Map"===e){let e=new Map;for(let n=1;n<t.length;n+=2)e.set(t[n-1],t[n]);return e}if("Vec"===e)return{x:t[0],y:t[1]};if("Color"===e){let e=new Uint8Array(new Uint32Array([t]).buffer);return{r:e[0],g:e[1],b:e[2],a:e[3]}}if("Buffer"===e){let e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}}return t}))}function Xn(e){return JSON.stringify(Qn(e))}function Qn(e){if(null==e)return null;if("number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>Qn(e)));if(Object.getPrototypeOf(e)===Object.prototype){let t={};for(let n in e)t[n]=Qn(e[n]);return t}if(e instanceof Uint8Array||e instanceof Uint8ClampedArray){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return["Array",btoa(t)]}return null}function Bn(e){let t=O(e);return 5===t?[]:6===t?Gn(T(e)):(H("expected string or null for JS args"),!1)}addEventListener("keydown",(e=>{e.repeat||xn(e.code,1)}),{passive:!0}),addEventListener("keyup",(e=>{xn(e.code,0)}),{passive:!0}),addEventListener("mousemove",(e=>{Nn(e.x,e.y)})),addEventListener("wheel",(e=>{e.preventDefault(),e.stopPropagation(),vn+=e.deltaY,Fn("MouseWheelUp","MouseWheelDown",Math.sign(e.deltaY))}),{passive:!1}),addEventListener("mousedown",(e=>{Hn(e.button,1)})),addEventListener("mouseup",(e=>{Hn(e.button,0)})),ne.addEventListener("contextmenu",(e=>{e.preventDefault()})),ne.addEventListener("touchstart",(e=>{if(e.preventDefault(),Ln(e.changedTouches,!0),e.changedTouches.length===e.touches.length){let t=e.changedTouches[0];In("MouseLeft",1),Nn(t.clientX,t.clientY)}}),{passive:!1}),ne.addEventListener("touchmove",(e=>{e.preventDefault(),Ln(e.changedTouches,!0);let t=e.changedTouches[0];Nn(t.clientX,t.clientY)}),{passive:!1}),ne.addEventListener("touchend",(e=>{e.preventDefault(),Ln(e.changedTouches,!1),0===e.touches.length&&In("MouseLeft",0)}),{passive:!1}),addEventListener("gamepadconnected",(e=>{console.info("Gamepad: "+e.gamepad.id)})),r("sock","JavaScript_",{"eval_(_,_,_,_)"(){if(6!==O(4))return void H("script must be a string");let e=T(4),t=Bn(2);if(!t)return;let n=Bn(3);if(!n)return;if(!(r=n,Array.isArray(r)&&r.every((e=>"string"==typeof e))&&Array.isArray(t)))return void H("arg values and names must be Lists, arg names must be a String List");var r;if(n.length!==t.length)return void H("arg names and values must have same length");let o;if(5===O(1))o=null;else{if(x(2,oe),!M(1,2))return void H("first arg must be null or Promise");o=S(1)}let i,a=null==o,s=n.concat(e);try{i=(a?new Function(...s):new Yn(...s)).apply(null,t)}catch(e){return void H("JavaScript error: "+e)}a?F(0,Xn(i)):(ie(o,i.then((e=>Xn(e)))),x(0,o))}});let Yn=Object.getPrototypeOf((async function(){})).constructor;function Wn(e){return"sock"===e&&(e="sock_web"),"/"===e[0]&&(e="assets"+e),e+".wren"}r("sock","Platform",{os(){F(0,Nt)},browser(){F(0,Ct)}});let Zn=!1,Vn="_terminal";function zn(e){Zn||(Zn=!0,_(Vn,"var r__"));let t=!1;if((e=e.trim()).includes("\n"))t=!qn(e);else if(e.startsWith("var ")){let t=/var\s+([_a-zA-Z][_a-zA-Z0-9]*)/.exec(e);if(t){let n=t[1];if(b(Vn,n)){if(!e.includes("="))return;e=e.slice(4)}return 0===_(Vn,e)?Kn(n):void 0}}else if(!qn(e)){t=!0;let n=/^([_a-zA-Z][_a-zA-Z0-9]*)\s*=/.exec(e)||/^([_a-zA-Z][_a-zA-Z0-9]*)$/.exec(e);if(n){let e=n[1];b(Vn,e)||e[0]===e[0].toLowerCase()&&_(Vn,"var "+e)}}if(t){let t=_(Vn,`r__=JSON.toString(${e})`);if(0===t)return Kn("r__",!0);if(2===t)return"[error]"}return 0===_(Vn,e)?"[success]":"[error]"}function qn(e){return e.startsWith("var ")||e.startsWith("if ")||e.startsWith("if(")||e.startsWith("for ")||e.startsWith("for(")||e.startsWith("while ")||e.startsWith("while(")||e.startsWith("import ")||e.startsWith("class ")||e.startsWith("#!")||e.startsWith("#?")}function Kn(e,t=!1){if(w(1),A(Vn,e,0),0===N(K)){let e=T(0);return t?Gn(e):e}return"[error]"}let $n,Jn=null,er=null,tr=0,nr=0,rr=!1,or=document.getElementById("play-button");or.tabIndex=0;let ir=!!re.messaging,ar=[];var sr;function cr(){let e=performance.now()/1e3;null==er&&(er=e),e-=er;let t=null==Jn?0:Math.min(4/60,e-Jn);if(Jn=e,Jt&&!on&&(Kt?nr-=t:nr=0,!Kt||nr<=0)){if(Kt&&(nr+=1/Kt),function(e,t){w(3),x(0,te),j(1,e),j(2,t),N(z)}(e,e-tr),tr=e,function(){if(navigator.getGamepads)for(let e of navigator.getGamepads())if(null!=e){let t=e.buttons,n=e.axes;In("FaceDown",t[0].value),In("FaceRight",t[1].value),In("FaceLeft",t[2].value),In("FaceUp",t[3].value),In("LeftBumper",t[4].value),In("RightBumper",t[5].value),In("LeftTrigger",t[6].value),In("RightTrigger",t[7].value),In("Select",t[8].value),In("Start",t[9].value),In("LeftStick",t[10].value),In("RightStick",t[11].value),In("DPadUp",t[12].value),In("DPadDown",t[13].value),In("DPadLeft",t[14].value),In("DPadRight",t[15].value),In("Guide",t[16].value),Fn("LeftStickLeft","LeftStickRight",n[0]),Fn("LeftStickUp","LeftStickDown",n[1]),Fn("RightStickLeft","RightStickRight",n[2]),Fn("RightStickUp","RightStickDown",n[3])}jn();for(let e of Tn)w(3),x(0,yn),F(1,e),j(2,mn[e]),N(z);Tn.clear(),vn=0}(),function(){if(rt)return rt=!1,it(),!0}()&&(Un(),Vt.updateResolution()),Vt.bind(),0!==(Jt=!1,w(1),x(0,sn),N(V))&&(rr=!0),!Jt&&!rr&&!$t)return console.log("awaiting update completion..."),void new Promise((e=>{en=e})).then((()=>{lr(),dr()}));lr()}dr()}function lr(){Vt.draw()}function dr(){rr||$t?(ne.classList.add("quit"),ur()):requestAnimationFrame(cr)}function ur(e){de&&(de.close(),de=null,ue=null),e?function(e){console.error(e),document.body.append(Be("div",{class:"error"},[Be("pre",{class:"message"},e)]))}(e):X&&function(){if(0===G.length)return void document.body.append(Be("div",{class:"error"},[Be("pre",{class:"message"},B),Be("pre",{style:"padding:.6em"},"[no stack trace]")]));let e=Be("pre",{class:"message"},Be("div",{},Q));for(let d=0;d<G.length;d++){let[u,f,h]=G[d],p="/"===u[0]?u.slice(1):u,g=Be("div",{},[h?`  ${h} at `:"  at ",Be("a",{href:Wn(u),onclick:E},p+":"+f)]);function E(e){e.preventDefault(),l(d)}e.append(g)}let t,n,r,o,i,a,s,c=Be("div",{class:"error"},e);async function l(e){let[l,d]=G[e];if(t!==l){n&&n.remove(),r&&r.remove();let e=Wn(l),a=await(await fetch(e)).text();t=l;let s=a.split(/\r\n|\n/);if("sock"===l){let e=0;s=s.map((t=>{"}"===t[0]&&e--;let n="\t".repeat(e)+t;return"}"!==t[0]&&t.endsWith("}")&&e--,t.includes("{")&&e++,n}))}o=[],i=[];for(let e=0;e<s.length;e++)o.push(Be("div",{},1+e)),i.push(Be("div",{},s[e]||""));c.append(r=Be("div",{class:"code-name"},l+".wren"),n=Be("div",{class:"code"},[Be("pre",{class:"code-lines"},o),Be("pre",{class:"code-source"},i)]))}a&&(a.className=s.className=""),a=i[d-1],s=o[d-1],a&&(a.className=s.className="code-target",s.scrollIntoView({block:"center"}))}document.body.append(c),l(0)}()}ir?(addEventListener("message",(e=>{let t=e.data;if(t&&"object"==typeof t){let e=t.type;if(e){let n=t.data,r=[],o=[];for(let t of ar)t.type===e?o.push(t):r.push(t);ar=r;for(let e of o)e(n)}}})),or.remove(),sr="script",$n=new Promise((e=>{e.type=sr,ar.push(e)})),parent!==window&&parent.postMessage({type:"ready"})):$n=l("assets/main.wren","arraybuffer"),async function(){let e=l("sock_web.wren","arraybuffer");await E();let t=async function(){let e=h.ccall("sock_font","number"),t=URL.createObjectURL(new Blob([g().subarray(e,e+750)],{type:"image/gif"}));try{let e=await d(t);Wt=new St(ft.NEAREST,ft.CLAMP_TO_EDGE),Wt.load(e)}finally{URL.revokeObjectURL(t)}}();ee("call()"),ee("transfer(_)"),ee("path"),ee("init_()"),Z=ee("init_(_,_)"),ee("load_()"),ee("load_(_)"),ee("loaded_(_,_,_)"),V=ee("update_()"),ee("update_(_)"),z=ee("update_(_,_)"),ee("update_(_,_,_)"),q=ee("resolve_(_,_)"),K=ee("toString"),$=ee("updateMouse_(_,_,_)"),J=ee("updateTouch_(_,_,_,_,_)"),it(),await t;let n=_("sock",await e);if(0!==n)return void ur();var r;r="sock",h.ccall("wrenAddImplicitImportModule",null,["number","string"],[p,r]),w(1),A("sock","Time",0),te=S(0),w(1),A("sock","Promise",0),oe=S(0),w(1),A("sock","Asset",0),S(0),cn(),w(1),A("sock","Input",0),yn=S(0),Un(),w(1),A("sock","Sprite",0),jt=S(0),w(1),A("sock","Audio",0),pe=S(0),A("sock","Voice",0),Ee=S(0),A("sock","AudioBus",0),ge=S(0),await function(){return ir?(e(),Promise.resolve()):new Promise((t=>{function n(){e(),t()}or.onclick=n}));function e(){de=new AudioContext,re.audio=de,ue=new GainNode(de,{gain:.5}),ue.connect(de.destination)}}(),or.remove(),Vt.updateResolution(),Dt.compileAll(),_e(),n=_("/main",await $n),0===n?await function(e,t,n){let r=0;return new Promise((o=>{let i=setInterval((()=>{r+=e,n()&&(clearInterval(i),o(!0)),r>=t&&(clearInterval(i),o(!1))}),e)}))}(100,6e4,(()=>Jt||X))?X?ur():requestAnimationFrame(cr):ur("took to long for Game.begin() to be called..."):ur()}(),self.wren=function(...e){let t=e[0];if("string"==typeof t)return zn(t);if(t.raw&&t.map){let e=t.raw,n="";for(let r=0;r<e.length;r++)r>0&&(n+=t[r]),n+=e[r];return zn(n)}throw console.error(t),TypeError("call like this: wren`script`")}}();
//# sourceMappingURL=sock.js.map
