!function(){"use strict";let e=Document.prototype,t=Element.prototype;function r(e,t,r,n,o){s[i(e||"sock",t,r,n)]=o}function n(e,t,n){for(let o in n)r(e,t,!0,o,n[o])}function o(e,t,o,i,s){c[a(e,t)]=o,i&&function(e,t,n){for(let o in n)r(e,t,!1,o,n[o])}(e,t,i),s&&n(e,t,s)}function i(e,t,r,n){return`${e}:${t}:${r}:${n}`}function a(e,t){return`${e}:${t}`}t.requestFullscreen||t.webkitRequestFullscreen&&(Object.defineProperty(e,"fullscreenElement",{get(){return this.webkitFullscreenElement}}),Object.defineProperty(e,"fullscreenEnabled",{get(){return this.webkitFullscreenEnabled}}),e.exitFullscreen=function(){return this.webkitExitFullscreen(),Promise.resolve()},t.requestFullscreen=function(){return new Promise(((e,t)=>{let r=()=>{o(),e()},n=()=>{o(),t(new TypeError("failed to get fullscreen"))},o=()=>{this.removeEventListener("webkitfullscreenchange",r),this.removeEventListener("webkitfullscreenerror",n)};this.addEventListener("webkitfullscreenchange",r),this.addEventListener("webkitfullscreenerror",n),this.webkitRequestFullscreen()}))});let s={},c={};function l(e,t,r){return new Promise(((n,o)=>{let i=new XMLHttpRequest;i.responseType=t,i.open("GET",e),r&&(i.onprogress=e=>{let t=0===i.status||200===i.status;e.lengthComputable?r(e.loaded/e.total,t):r(Math.min(.95,e.loaded/1e6),t)}),i.onerror=()=>{o("Could not connect to server")},i.onload=()=>{200===i.status?n(i.response):o(new u(e,i.status,i.statusText))},i.send()}))}function d(e){return new Promise(((t,r)=>{let n=new Image;n.onload=()=>{t(n)},n.onerror=()=>{r(`Could not load image ${e}`)},n.src=e}))}class u extends Error{constructor(e,t,r){super(t+": "+r+": "+e),this.url=e,this.status=t,this.statusText=r}}var f,h=(f=document.currentScript&&document.currentScript.src||new URL("sock.js",document.baseURI).href,function(e){var t,r;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,n){t=e,r=n})),Object.getOwnPropertyDescriptor(e.ready,"_malloc")||(Object.defineProperty(e.ready,"_malloc",{configurable:!0,get:function(){N("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_malloc",{configurable:!0,set:function(){N("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_realloc")||(Object.defineProperty(e.ready,"_realloc",{configurable:!0,get:function(){N("You are getting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_realloc",{configurable:!0,set:function(){N("You are setting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_free")||(Object.defineProperty(e.ready,"_free",{configurable:!0,get:function(){N("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_free",{configurable:!0,set:function(){N("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_init")||(Object.defineProperty(e.ready,"_sock_init",{configurable:!0,get:function(){N("You are getting _sock_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_init",{configurable:!0,set:function(){N("You are setting _sock_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_font")||(Object.defineProperty(e.ready,"_sock_font",{configurable:!0,get:function(){N("You are getting _sock_font on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_font",{configurable:!0,set:function(){N("You are setting _sock_font on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_new_buffer")||(Object.defineProperty(e.ready,"_sock_new_buffer",{configurable:!0,get:function(){N("You are getting _sock_new_buffer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_new_buffer",{configurable:!0,set:function(){N("You are setting _sock_new_buffer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_new_transform")||(Object.defineProperty(e.ready,"_sock_new_transform",{configurable:!0,get:function(){N("You are getting _sock_new_transform on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_new_transform",{configurable:!0,set:function(){N("You are setting _sock_new_transform on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_get_transform")||(Object.defineProperty(e.ready,"_sock_get_transform",{configurable:!0,get:function(){N("You are getting _sock_get_transform on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_get_transform",{configurable:!0,set:function(){N("You are setting _sock_get_transform on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetVersionNumber")||(Object.defineProperty(e.ready,"_wrenGetVersionNumber",{configurable:!0,get:function(){N("You are getting _wrenGetVersionNumber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetVersionNumber",{configurable:!0,set:function(){N("You are setting _wrenGetVersionNumber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInitConfiguration")||(Object.defineProperty(e.ready,"_wrenInitConfiguration",{configurable:!0,get:function(){N("You are getting _wrenInitConfiguration on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInitConfiguration",{configurable:!0,set:function(){N("You are setting _wrenInitConfiguration on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenNewVM")||(Object.defineProperty(e.ready,"_wrenNewVM",{configurable:!0,get:function(){N("You are getting _wrenNewVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenNewVM",{configurable:!0,set:function(){N("You are setting _wrenNewVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenFreeVM")||(Object.defineProperty(e.ready,"_wrenFreeVM",{configurable:!0,get:function(){N("You are getting _wrenFreeVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenFreeVM",{configurable:!0,set:function(){N("You are setting _wrenFreeVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenCollectGarbage")||(Object.defineProperty(e.ready,"_wrenCollectGarbage",{configurable:!0,get:function(){N("You are getting _wrenCollectGarbage on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenCollectGarbage",{configurable:!0,set:function(){N("You are setting _wrenCollectGarbage on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInterpret")||(Object.defineProperty(e.ready,"_wrenInterpret",{configurable:!0,get:function(){N("You are getting _wrenInterpret on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInterpret",{configurable:!0,set:function(){N("You are setting _wrenInterpret on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenMakeCallHandle")||(Object.defineProperty(e.ready,"_wrenMakeCallHandle",{configurable:!0,get:function(){N("You are getting _wrenMakeCallHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenMakeCallHandle",{configurable:!0,set:function(){N("You are setting _wrenMakeCallHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenCall")||(Object.defineProperty(e.ready,"_wrenCall",{configurable:!0,get:function(){N("You are getting _wrenCall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenCall",{configurable:!0,set:function(){N("You are setting _wrenCall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenReleaseHandle")||(Object.defineProperty(e.ready,"_wrenReleaseHandle",{configurable:!0,get:function(){N("You are getting _wrenReleaseHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenReleaseHandle",{configurable:!0,set:function(){N("You are setting _wrenReleaseHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotCount")||(Object.defineProperty(e.ready,"_wrenGetSlotCount",{configurable:!0,get:function(){N("You are getting _wrenGetSlotCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotCount",{configurable:!0,set:function(){N("You are setting _wrenGetSlotCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenEnsureSlots")||(Object.defineProperty(e.ready,"_wrenEnsureSlots",{configurable:!0,get:function(){N("You are getting _wrenEnsureSlots on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenEnsureSlots",{configurable:!0,set:function(){N("You are setting _wrenEnsureSlots on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotType")||(Object.defineProperty(e.ready,"_wrenGetSlotType",{configurable:!0,get:function(){N("You are getting _wrenGetSlotType on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotType",{configurable:!0,set:function(){N("You are setting _wrenGetSlotType on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotBool")||(Object.defineProperty(e.ready,"_wrenGetSlotBool",{configurable:!0,get:function(){N("You are getting _wrenGetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotBool",{configurable:!0,set:function(){N("You are setting _wrenGetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotBytes")||(Object.defineProperty(e.ready,"_wrenGetSlotBytes",{configurable:!0,get:function(){N("You are getting _wrenGetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotBytes",{configurable:!0,set:function(){N("You are setting _wrenGetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotDouble")||(Object.defineProperty(e.ready,"_wrenGetSlotDouble",{configurable:!0,get:function(){N("You are getting _wrenGetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotDouble",{configurable:!0,set:function(){N("You are setting _wrenGetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotForeign")||(Object.defineProperty(e.ready,"_wrenGetSlotForeign",{configurable:!0,get:function(){N("You are getting _wrenGetSlotForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotForeign",{configurable:!0,set:function(){N("You are setting _wrenGetSlotForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotIsInstanceOf")||(Object.defineProperty(e.ready,"_wrenGetSlotIsInstanceOf",{configurable:!0,get:function(){N("You are getting _wrenGetSlotIsInstanceOf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotIsInstanceOf",{configurable:!0,set:function(){N("You are setting _wrenGetSlotIsInstanceOf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotInstanceField")||(Object.defineProperty(e.ready,"_wrenGetSlotInstanceField",{configurable:!0,get:function(){N("You are getting _wrenGetSlotInstanceField on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotInstanceField",{configurable:!0,set:function(){N("You are setting _wrenGetSlotInstanceField on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotString")||(Object.defineProperty(e.ready,"_wrenGetSlotString",{configurable:!0,get:function(){N("You are getting _wrenGetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotString",{configurable:!0,set:function(){N("You are setting _wrenGetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotHandle")||(Object.defineProperty(e.ready,"_wrenGetSlotHandle",{configurable:!0,get:function(){N("You are getting _wrenGetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotHandle",{configurable:!0,set:function(){N("You are setting _wrenGetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotBool")||(Object.defineProperty(e.ready,"_wrenSetSlotBool",{configurable:!0,get:function(){N("You are getting _wrenSetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotBool",{configurable:!0,set:function(){N("You are setting _wrenSetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotBytes")||(Object.defineProperty(e.ready,"_wrenSetSlotBytes",{configurable:!0,get:function(){N("You are getting _wrenSetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotBytes",{configurable:!0,set:function(){N("You are setting _wrenSetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotDouble")||(Object.defineProperty(e.ready,"_wrenSetSlotDouble",{configurable:!0,get:function(){N("You are getting _wrenSetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotDouble",{configurable:!0,set:function(){N("You are setting _wrenSetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotRange")||(Object.defineProperty(e.ready,"_wrenSetSlotRange",{configurable:!0,get:function(){N("You are getting _wrenSetSlotRange on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotRange",{configurable:!0,set:function(){N("You are setting _wrenSetSlotRange on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewForeign")||(Object.defineProperty(e.ready,"_wrenSetSlotNewForeign",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNewForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewForeign",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNewForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewList")||(Object.defineProperty(e.ready,"_wrenSetSlotNewList",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNewList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewList",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNewList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewMap")||(Object.defineProperty(e.ready,"_wrenSetSlotNewMap",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNewMap on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewMap",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNewMap on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNull")||(Object.defineProperty(e.ready,"_wrenSetSlotNull",{configurable:!0,get:function(){N("You are getting _wrenSetSlotNull on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNull",{configurable:!0,set:function(){N("You are setting _wrenSetSlotNull on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotString")||(Object.defineProperty(e.ready,"_wrenSetSlotString",{configurable:!0,get:function(){N("You are getting _wrenSetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotString",{configurable:!0,set:function(){N("You are setting _wrenSetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotHandle")||(Object.defineProperty(e.ready,"_wrenSetSlotHandle",{configurable:!0,get:function(){N("You are getting _wrenSetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotHandle",{configurable:!0,set:function(){N("You are setting _wrenSetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetListCount")||(Object.defineProperty(e.ready,"_wrenGetListCount",{configurable:!0,get:function(){N("You are getting _wrenGetListCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetListCount",{configurable:!0,set:function(){N("You are setting _wrenGetListCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetListElement")||(Object.defineProperty(e.ready,"_wrenGetListElement",{configurable:!0,get:function(){N("You are getting _wrenGetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetListElement",{configurable:!0,set:function(){N("You are setting _wrenGetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetListElement")||(Object.defineProperty(e.ready,"_wrenSetListElement",{configurable:!0,get:function(){N("You are getting _wrenSetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetListElement",{configurable:!0,set:function(){N("You are setting _wrenSetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInsertInList")||(Object.defineProperty(e.ready,"_wrenInsertInList",{configurable:!0,get:function(){N("You are getting _wrenInsertInList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInsertInList",{configurable:!0,set:function(){N("You are setting _wrenInsertInList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapCount")||(Object.defineProperty(e.ready,"_wrenGetMapCount",{configurable:!0,get:function(){N("You are getting _wrenGetMapCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapCount",{configurable:!0,set:function(){N("You are setting _wrenGetMapCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapContainsKey")||(Object.defineProperty(e.ready,"_wrenGetMapContainsKey",{configurable:!0,get:function(){N("You are getting _wrenGetMapContainsKey on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapContainsKey",{configurable:!0,set:function(){N("You are setting _wrenGetMapContainsKey on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapValue")||(Object.defineProperty(e.ready,"_wrenGetMapValue",{configurable:!0,get:function(){N("You are getting _wrenGetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapValue",{configurable:!0,set:function(){N("You are setting _wrenGetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetMapValue")||(Object.defineProperty(e.ready,"_wrenSetMapValue",{configurable:!0,get:function(){N("You are getting _wrenSetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetMapValue",{configurable:!0,set:function(){N("You are setting _wrenSetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenRemoveMapValue")||(Object.defineProperty(e.ready,"_wrenRemoveMapValue",{configurable:!0,get:function(){N("You are getting _wrenRemoveMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenRemoveMapValue",{configurable:!0,set:function(){N("You are setting _wrenRemoveMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetVariable")||(Object.defineProperty(e.ready,"_wrenGetVariable",{configurable:!0,get:function(){N("You are getting _wrenGetVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetVariable",{configurable:!0,set:function(){N("You are setting _wrenGetVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenHasVariable")||(Object.defineProperty(e.ready,"_wrenHasVariable",{configurable:!0,get:function(){N("You are getting _wrenHasVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenHasVariable",{configurable:!0,set:function(){N("You are setting _wrenHasVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenHasModule")||(Object.defineProperty(e.ready,"_wrenHasModule",{configurable:!0,get:function(){N("You are getting _wrenHasModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenHasModule",{configurable:!0,set:function(){N("You are setting _wrenHasModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenAbortFiber")||(Object.defineProperty(e.ready,"_wrenAbortFiber",{configurable:!0,get:function(){N("You are getting _wrenAbortFiber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenAbortFiber",{configurable:!0,set:function(){N("You are setting _wrenAbortFiber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetUserData")||(Object.defineProperty(e.ready,"_wrenGetUserData",{configurable:!0,get:function(){N("You are getting _wrenGetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetUserData",{configurable:!0,set:function(){N("You are setting _wrenGetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetUserData")||(Object.defineProperty(e.ready,"_wrenSetUserData",{configurable:!0,get:function(){N("You are getting _wrenSetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetUserData",{configurable:!0,set:function(){N("You are setting _wrenSetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenAddImplicitImportModule")||(Object.defineProperty(e.ready,"_wrenAddImplicitImportModule",{configurable:!0,get:function(){N("You are getting _wrenAddImplicitImportModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenAddImplicitImportModule",{configurable:!0,set:function(){N("You are setting _wrenAddImplicitImportModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_end")||(Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){N("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){N("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_free")||(Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){N("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){N("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_init")||(Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,get:function(){N("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,set:function(){N("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackSave")||(Object.defineProperty(e.ready,"_stackSave",{configurable:!0,get:function(){N("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackSave",{configurable:!0,set:function(){N("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackRestore")||(Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,get:function(){N("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,set:function(){N("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackAlloc")||(Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,get:function(){N("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,set:function(){N("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___wasm_call_ctors")||(Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,get:function(){N("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,set:function(){N("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___errno_location")||(Object.defineProperty(e.ready,"___errno_location",{configurable:!0,get:function(){N("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___errno_location",{configurable:!0,set:function(){N("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"onRuntimeInitialized")||(Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,get:function(){N("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,set:function(){N("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var n,o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);var i=[];if(e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var a="";if("undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),f&&(a=f),a=0!==a.indexOf("blob:")?a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var s=console.log.bind(console),c=console.warn.bind(console);for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);function l(e){l.shown||(l.shown={}),l.shown[e]||(l.shown[e]=1,c(e))}o=null,Object.getOwnPropertyDescriptor(e,"arguments")||Object.defineProperty(e,"arguments",{configurable:!0,get:function(){N("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"thisProgram")||Object.defineProperty(e,"thisProgram",{configurable:!0,get:function(){N("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"quit")||Object.defineProperty(e,"quit",{configurable:!0,get:function(){N("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(void 0===e.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.read,"Module.read option was removed (modify read_ in JS)"),g(void 0===e.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),g(void 0===e.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),g(void 0===e.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),g(void 0===e.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(e,"read")||Object.defineProperty(e,"read",{configurable:!0,get:function(){N("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readAsync")||Object.defineProperty(e,"readAsync",{configurable:!0,get:function(){N("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readBinary")||Object.defineProperty(e,"readBinary",{configurable:!0,get:function(){N("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"setWindowTitle")||Object.defineProperty(e,"setWindowTitle",{configurable:!0,get:function(){N("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-s ENVIRONMENT` to enable."),g(!0,"node environment detected but not enabled at build time.  Add 'node' to `-s ENVIRONMENT` to enable."),g(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");var d,u,h=[];Object.getOwnPropertyDescriptor(e,"wasmBinary")||Object.defineProperty(e,"wasmBinary",{configurable:!0,get:function(){N("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"noExitRuntime")||Object.defineProperty(e,"noExitRuntime",{configurable:!0,get:function(){N("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&N("no native wasm support detected");var p=!1;function g(e,t){e||N("Assertion failed: "+t)}var w,b,E,_,O,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function m(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&y)return y.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|c:(240!=(248&a)&&l("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|c<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var d=a-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function T(e,t){return e?m(E,e,t):""}function D(e,t,r){return g("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;s>1114111&&l("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}(e,E,t,r)}function P(t){w=t,e.HEAP8=b=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=_=new Int32Array(t),e.HEAPU8=E=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=O=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var R,M=5242880;function S(){var e=ne();g(0==(3&e)),_[e+4>>2]=34821223,_[e+8>>2]=2310721022,_[0]=1668509029}function A(){if(!p){var e=ne(),t=O[e+4>>2],r=O[e+8>>2];34821223==t&&2310721022==r||N("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+r.toString(16)+" 0x"+t.toString(16)),1668509029!==_[0]&&N("Runtime error: The application has corrupted its heap memory area (address zero)!")}}e.TOTAL_STACK&&g(M===e.TOTAL_STACK,"the stack size can no longer be determined at runtime"),Object.getOwnPropertyDescriptor(e,"INITIAL_MEMORY")||Object.defineProperty(e,"INITIAL_MEMORY",{configurable:!0,get:function(){N("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(!0,"INITIAL_MEMORY should be larger than TOTAL_STACK, was 16777216! (TOTAL_STACK=5242880)"),g("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),g(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),g(!0,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();var v=[],U=[],j=[],I=!1;g(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var x=0,F=null,k=null,L={};function N(e){c(e="Aborted("+e+")"),p=!0;var t=new WebAssembly.RuntimeError(e);throw r(t),t}e.preloadedImages={},e.preloadedAudios={};var C,H={error:function(){N("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){H.error()},createDataFile:function(){H.error()},createPreloadedFile:function(){H.error()},createLazyFile:function(){H.error()},open:function(){H.error()},mkdev:function(){H.error()},registerDevice:function(){H.error()},analyzePath:function(){H.error()},loadFilesFromDB:function(){H.error()},ErrnoError:function(){H.error()}};function G(e){return e.startsWith("data:application/octet-stream;base64,")}function X(t,r){return function(){var n=t,o=r;return r||(o=e.asm),g(I,"native function `"+n+"` called before runtime initialization"),g(!0,"native function `"+n+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o[t]||g(o[t],"exported native function `"+n+"` not found"),o[t].apply(null,arguments)}}function B(e){try{throw"both async and sync fetching of the wasm failed"}catch(e){N(e)}}function Q(t){for(;t.length>0;){var r=t.shift();if("function"!=typeof r){var n=r.func;"number"==typeof n?void 0===r.arg?W(n)():W(n)(r.arg):n(void 0===r.arg?null:r.arg)}else r(e)}}e.FS_createDataFile=H.createDataFile,e.FS_createPreloadedFile=H.createPreloadedFile,e.locateFile?G(C="sock_c.wasm")||(C=a+C):C=new URL("sock_c.wasm",document.currentScript&&document.currentScript.src||new URL("sock.js",document.baseURI).href).toString();var Y=[];function W(e){var t=Y[e];return t||(e>=Y.length&&(Y.length=e+1),Y[e]=t=R.get(e)),g(R.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t}function Z(e,t){R.set(e,t),Y[e]=t}function V(e){try{return u.grow(e-w.byteLength+65535>>>16),P(u.buffer),1}catch(t){c("emscripten_realloc_buffer: Attempted to grow heap from "+w.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}var z={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=z.buffers[e];g(r),0===t||10===t?((1===e?s:c)(m(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return g(null!=z.varargs),z.varargs+=4,_[z.varargs-4>>2]},getStr:function(e){return T(e)},get64:function(e,t){return g(e>=0?0===t:-1===t),e}},$={abort:function(){N("native code called abort()")},clock:function e(){return void 0===e.start&&(e.start=Date.now()),1e3*(Date.now()-e.start)|0},emscripten_memcpy_big:function(e,t,r){E.copyWithin(e,t,t+r)},emscripten_resize_heap:function(e){var t=E.length;g((e>>>=0)>t);var r,n,o=2147483648;if(e>o)return c("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,e+100663296);var s=Math.min(o,((r=Math.max(e,a))%(n=65536)>0&&(r+=n-r%n),r));if(V(s))return!0}return c("Failed to grow the heap from "+t+" bytes to "+s+" bytes, not enough memory!"),!1},fd_close:function(e){return N("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0},fd_seek:function(e,t,r,n,o){N("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM")},fd_write:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=_[t>>2],s=_[t+4>>2];t+=8;for(var c=0;c<s;c++)z.printChar(e,E[a+c]);o+=s}return _[n>>2]=o,0},js_bindClass:function(t,r,n,o){let i=e.sock.bindClass(T(r),T(n));if(i){let t=i[0],r=i[1];if(t){let n=new Uint32Array(e.HEAP8.buffer,o);n[0]=e.addFunction(t,"vi"),r&&(n[1]=e.addFunction(r,"vi"))}}},js_bindMethod:function(t,r,n,o,i){let a=e.sock.bindMethod(T(r),T(n),!!o,T(i));return a?e.addFunction(a,"vi"):0},js_error:function(t,r,n,o,i){e.sock.error(r,T(n),o,T(i))},js_loadModule:function(t,r){return function(e){if(!e)return 0;if("string"==typeof e){var t=function(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}(e)+1;return D(e,n=q(t),t),n}e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r=0===e[e.length-1],n=(t=r?e.length:e.length+1,q(t));return E.set(e,n),r||(E[ptr+t-1]=0),n}(e.sock.loadModule(T(r)))},js_write:function(t,r){e.sock.write(T(r))},setTempRet0:function(e){}};!function(){var t,n={env:$,wasi_snapshot_preview1:$};function o(t,r){var n,o=t.exports;e.asm=o,g(u=e.asm.memory,"memory not found in wasm exports"),P(u.buffer),g(R=e.asm.__indirect_function_table,"table not found in wasm exports"),n=e.asm.__wasm_call_ctors,U.unshift(n),function(e){if(x--,e?(g(L[e]),delete L[e]):c("warning: run dependency removed without ID"),0==x&&(null!==F&&(clearInterval(F),F=null),k)){var t=k;k=null,t()}}("wasm-instantiate")}x++,(t="wasm-instantiate")?(g(!L[t]),L[t]=1,null===F&&"undefined"!=typeof setInterval&&(F=setInterval((function(){if(p)return clearInterval(F),void(F=null);var e=!1;for(var t in L)e||(e=!0,c("still waiting on run dependencies:")),c("dependency: "+t);e&&c("(end of list)")}),1e4))):c("warning: run dependency added without ID");var i=e;function a(t){g(e===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,o(t.instance)}function s(e){return("function"==typeof fetch?fetch(C,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+C+"'";return e.arrayBuffer()})).catch((function(){return B()})):Promise.resolve().then((function(){return B()}))).then((function(e){return WebAssembly.instantiate(e,n)})).then((function(e){return e})).then(e,(function(e){c("failed to asynchronously prepare wasm: "+e),C.startsWith("file://")&&c("warning: Loading from a file URI ("+C+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),N(e)}))}if(e.instantiateWasm)try{return e.instantiateWasm(n,o)}catch(e){return c("Module.instantiateWasm callback failed with error: "+e),!1}("function"!=typeof WebAssembly.instantiateStreaming||G(C)||"function"!=typeof fetch?s(a):fetch(C,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,n).then(a,(function(e){return c("wasm streaming compile failed: "+e),c("falling back to ArrayBuffer instantiation"),s(a)}))}))).catch(r)}(),e.___wasm_call_ctors=X("__wasm_call_ctors"),e._wrenInterpret=X("wrenInterpret"),e.___errno_location=X("__errno_location"),e._wrenCollectGarbage=X("wrenCollectGarbage"),e._wrenGetVersionNumber=X("wrenGetVersionNumber"),e._wrenInitConfiguration=X("wrenInitConfiguration"),e._free=X("free"),e._realloc=X("realloc"),e._wrenNewVM=X("wrenNewVM"),e._wrenFreeVM=X("wrenFreeVM"),e._wrenMakeCallHandle=X("wrenMakeCallHandle"),e._wrenCall=X("wrenCall"),e._wrenReleaseHandle=X("wrenReleaseHandle"),e._wrenGetSlotCount=X("wrenGetSlotCount"),e._wrenEnsureSlots=X("wrenEnsureSlots"),e._wrenGetSlotType=X("wrenGetSlotType"),e._wrenGetSlotBool=X("wrenGetSlotBool"),e._wrenGetSlotBytes=X("wrenGetSlotBytes"),e._wrenGetSlotDouble=X("wrenGetSlotDouble"),e._wrenGetSlotForeign=X("wrenGetSlotForeign"),e._wrenGetSlotIsInstanceOf=X("wrenGetSlotIsInstanceOf"),e._wrenGetSlotInstanceField=X("wrenGetSlotInstanceField"),e._wrenGetSlotString=X("wrenGetSlotString"),e._wrenGetSlotHandle=X("wrenGetSlotHandle"),e._wrenSetSlotBool=X("wrenSetSlotBool"),e._wrenSetSlotBytes=X("wrenSetSlotBytes"),e._wrenSetSlotDouble=X("wrenSetSlotDouble"),e._wrenSetSlotRange=X("wrenSetSlotRange"),e._wrenSetSlotNewForeign=X("wrenSetSlotNewForeign"),e._wrenSetSlotNewList=X("wrenSetSlotNewList"),e._wrenSetSlotNewMap=X("wrenSetSlotNewMap"),e._wrenSetSlotNull=X("wrenSetSlotNull"),e._wrenSetSlotString=X("wrenSetSlotString"),e._wrenSetSlotHandle=X("wrenSetSlotHandle"),e._wrenGetListCount=X("wrenGetListCount"),e._wrenGetListElement=X("wrenGetListElement"),e._wrenSetListElement=X("wrenSetListElement"),e._wrenInsertInList=X("wrenInsertInList"),e._wrenGetMapCount=X("wrenGetMapCount"),e._wrenGetMapContainsKey=X("wrenGetMapContainsKey"),e._wrenGetMapValue=X("wrenGetMapValue"),e._wrenSetMapValue=X("wrenSetMapValue"),e._wrenRemoveMapValue=X("wrenRemoveMapValue"),e._wrenGetVariable=X("wrenGetVariable"),e._wrenHasVariable=X("wrenHasVariable"),e._wrenHasModule=X("wrenHasModule"),e._wrenAbortFiber=X("wrenAbortFiber"),e._wrenGetUserData=X("wrenGetUserData"),e._wrenSetUserData=X("wrenSetUserData"),e._wrenAddImplicitImportModule=X("wrenAddImplicitImportModule");var q=e._malloc=X("malloc");e._sock_font=X("sock_font"),e._sock_init=X("sock_init"),e._sock_new_buffer=X("sock_new_buffer"),e._sock_new_transform=X("sock_new_transform"),e._sock_get_transform=X("sock_get_transform");var K=e.stackSave=X("stackSave"),J=e.stackRestore=X("stackRestore"),ee=e.stackAlloc=X("stackAlloc"),te=e._emscripten_stack_init=function(){return(te=e._emscripten_stack_init=e.asm.emscripten_stack_init).apply(null,arguments)};e._emscripten_stack_get_free=function(){return(e._emscripten_stack_get_free=e.asm.emscripten_stack_get_free).apply(null,arguments)};var re,ne=e._emscripten_stack_get_end=function(){return(ne=e._emscripten_stack_get_end=e.asm.emscripten_stack_get_end).apply(null,arguments)};function oe(r){r=r||i,x>0||(te(),S(),Q(v),x>0||(re||(re=!0,e.calledRun=!0,p||(A(),g(!I),I=!0,Q(U),t(e),g(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),A(),Q(j))),A()))}return e.dynCall_jiji=X("dynCall_jiji"),Object.getOwnPropertyDescriptor(e,"intArrayFromString")||(e.intArrayFromString=function(){N("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"intArrayToString")||(e.intArrayToString=function(){N("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.ccall=function(t,r,n,o,i){var a={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);D(e,t=ee(r),r)}return t},array:function(e){var t=ee(e.length);return function(e,t){g(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),b.set(e,t)}(e,t),t}},s=function(t){var r=e["_"+t];return g(r,"Cannot call unknown function "+t+", make sure it is exported"),r}(t),c=[],l=0;if(g("array"!==r,'Return type should not be "array".'),o)for(var d=0;d<o.length;d++){var u=a[n[d]];u?(0===l&&(l=K()),c[d]=u(o[d])):c[d]=o[d]}var f=s.apply(null,c);return f=function(e){return 0!==l&&J(l),function(e){return"string"===r?T(e):"boolean"===r?Boolean(e):e}(e)}(f)},Object.getOwnPropertyDescriptor(e,"cwrap")||(e.cwrap=function(){N("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setValue")||(e.setValue=function(){N("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getValue")||(e.getValue=function(){N("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocate")||(e.allocate=function(){N("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ArrayToString")||(e.UTF8ArrayToString=function(){N("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ToString")||(e.UTF8ToString=function(){N("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8Array")||(e.stringToUTF8Array=function(){N("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8")||(e.stringToUTF8=function(){N("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF8")||(e.lengthBytesUTF8=function(){N("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){N("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreRun")||(e.addOnPreRun=function(){N("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnInit")||(e.addOnInit=function(){N("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreMain")||(e.addOnPreMain=function(){N("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnExit")||(e.addOnExit=function(){N("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPostRun")||(e.addOnPostRun=function(){N("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeStringToMemory")||(e.writeStringToMemory=function(){N("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeArrayToMemory")||(e.writeArrayToMemory=function(){N("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeAsciiToMemory")||(e.writeAsciiToMemory=function(){N("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addRunDependency")||(e.addRunDependency=function(){N("'addRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"removeRunDependency")||(e.removeRunDependency=function(){N("'removeRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createFolder")||(e.FS_createFolder=function(){N("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createPath")||(e.FS_createPath=function(){N("'FS_createPath' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createDataFile")||(e.FS_createDataFile=function(){N("'FS_createDataFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createPreloadedFile")||(e.FS_createPreloadedFile=function(){N("'FS_createPreloadedFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLazyFile")||(e.FS_createLazyFile=function(){N("'FS_createLazyFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLink")||(e.FS_createLink=function(){N("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createDevice")||(e.FS_createDevice=function(){N("'FS_createDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_unlink")||(e.FS_unlink=function(){N("'FS_unlink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"getLEB")||(e.getLEB=function(){N("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFunctionTables")||(e.getFunctionTables=function(){N("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignFunctionTables")||(e.alignFunctionTables=function(){N("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFunctions")||(e.registerFunctions=function(){N("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.addFunction=function(e,t){if(g(void 0!==e),d||(d=new WeakMap,function(e,t){for(var r=e;r<e+t;r++){var n=W(r);n&&d.set(n,r)}}(0,R.length)),d.has(e))return d.get(e);var r=function(){if(h.length)return h.pop();try{R.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return R.length-1}();try{Z(r,e)}catch(o){if(!(o instanceof TypeError))throw o;g(void 0!==t,"Missing signature argument to addFunction: "+e);var n=function(e,t){if("function"==typeof WebAssembly.Function){for(var r={i:"i32",j:"i64",f:"f32",d:"f64"},n={parameters:[],results:"v"==t[0]?[]:[r[t[0]]]},o=1;o<t.length;++o)n.parameters.push(r[t[o]]);return new WebAssembly.Function(n,e)}var i=[1,0,1,96],a=t.slice(0,1),s=t.slice(1),c={i:127,j:126,f:125,d:124};for(i.push(s.length),o=0;o<s.length;++o)i.push(c[s[o]]);"v"==a?i.push(0):i=i.concat([1,c[a]]),i[1]=i.length-2;var l=new Uint8Array([0,97,115,109,1,0,0,0].concat(i,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),d=new WebAssembly.Module(l);return new WebAssembly.Instance(d,{e:{f:e}}).exports.f}(e,t);Z(r,n)}return d.set(e,r),r},Object.getOwnPropertyDescriptor(e,"removeFunction")||(e.removeFunction=function(){N("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){N("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"prettyPrint")||(e.prettyPrint=function(){N("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){N("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCompilerSetting")||(e.getCompilerSetting=function(){N("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"print")||(e.print=function(){N("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"printErr")||(e.printErr=function(){N("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getTempRet0")||(e.getTempRet0=function(){N("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setTempRet0")||(e.setTempRet0=function(){N("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callMain")||(e.callMain=function(){N("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"abort")||(e.abort=function(){N("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"keepRuntimeAlive")||(e.keepRuntimeAlive=function(){N("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"zeroMemory")||(e.zeroMemory=function(){N("'zeroMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToNewUTF8")||(e.stringToNewUTF8=function(){N("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setFileTime")||(e.setFileTime=function(){N("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscripten_realloc_buffer")||(e.emscripten_realloc_buffer=function(){N("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ENV")||(e.ENV=function(){N("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"withStackSave")||(e.withStackSave=function(){N("'withStackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_CODES")||(e.ERRNO_CODES=function(){N("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_MESSAGES")||(e.ERRNO_MESSAGES=function(){N("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setErrNo")||(e.setErrNo=function(){N("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton4")||(e.inetPton4=function(){N("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop4")||(e.inetNtop4=function(){N("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton6")||(e.inetPton6=function(){N("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop6")||(e.inetNtop6=function(){N("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readSockaddr")||(e.readSockaddr=function(){N("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeSockaddr")||(e.writeSockaddr=function(){N("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"DNS")||(e.DNS=function(){N("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getHostByName")||(e.getHostByName=function(){N("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GAI_ERRNO_MESSAGES")||(e.GAI_ERRNO_MESSAGES=function(){N("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Protocols")||(e.Protocols=function(){N("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Sockets")||(e.Sockets=function(){N("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getRandomDevice")||(e.getRandomDevice=function(){N("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"traverseStack")||(e.traverseStack=function(){N("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UNWIND_CACHE")||(e.UNWIND_CACHE=function(){N("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgsArray")||(e.readAsmConstArgsArray=function(){N("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgs")||(e.readAsmConstArgs=function(){N("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mainThreadEM_ASM")||(e.mainThreadEM_ASM=function(){N("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_q")||(e.jstoi_q=function(){N("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_s")||(e.jstoi_s=function(){N("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getExecutableName")||(e.getExecutableName=function(){N("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"listenOnce")||(e.listenOnce=function(){N("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"autoResumeAudioContext")||(e.autoResumeAudioContext=function(){N("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCallLegacy")||(e.dynCallLegacy=function(){N("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getDynCaller")||(e.getDynCaller=function(){N("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){N("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callRuntimeCallbacks")||(e.callRuntimeCallbacks=function(){N("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wasmTableMirror")||(e.wasmTableMirror=function(){N("'wasmTableMirror' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setWasmTableEntry")||(e.setWasmTableEntry=function(){N("'setWasmTableEntry' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getWasmTableEntry")||(e.getWasmTableEntry=function(){N("'getWasmTableEntry' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"handleException")||(e.handleException=function(){N("'handleException' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePush")||(e.runtimeKeepalivePush=function(){N("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePop")||(e.runtimeKeepalivePop=function(){N("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callUserCallback")||(e.callUserCallback=function(){N("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeExit")||(e.maybeExit=function(){N("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"safeSetTimeout")||(e.safeSetTimeout=function(){N("'safeSetTimeout' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asmjsMangle")||(e.asmjsMangle=function(){N("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asyncLoad")||(e.asyncLoad=function(){N("'asyncLoad' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignMemory")||(e.alignMemory=function(){N("'alignMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mmapAlloc")||(e.mmapAlloc=function(){N("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reallyNegative")||(e.reallyNegative=function(){N("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"unSign")||(e.unSign=function(){N("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reSign")||(e.reSign=function(){N("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"formatString")||(e.formatString=function(){N("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH")||(e.PATH=function(){N("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH_FS")||(e.PATH_FS=function(){N("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SYSCALLS")||(e.SYSCALLS=function(){N("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMmap2")||(e.syscallMmap2=function(){N("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMunmap")||(e.syscallMunmap=function(){N("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketFromFD")||(e.getSocketFromFD=function(){N("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketAddress")||(e.getSocketAddress=function(){N("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"JSEvents")||(e.JSEvents=function(){N("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerKeyEventCallback")||(e.registerKeyEventCallback=function(){N("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"specialHTMLTargets")||(e.specialHTMLTargets=function(){N("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeCStringToJsString")||(e.maybeCStringToJsString=function(){N("'maybeCStringToJsString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findEventTarget")||(e.findEventTarget=function(){N("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findCanvasEventTarget")||(e.findCanvasEventTarget=function(){N("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getBoundingClientRect")||(e.getBoundingClientRect=function(){N("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillMouseEventData")||(e.fillMouseEventData=function(){N("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerMouseEventCallback")||(e.registerMouseEventCallback=function(){N("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerWheelEventCallback")||(e.registerWheelEventCallback=function(){N("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerUiEventCallback")||(e.registerUiEventCallback=function(){N("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFocusEventCallback")||(e.registerFocusEventCallback=function(){N("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceOrientationEventData")||(e.fillDeviceOrientationEventData=function(){N("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceOrientationEventCallback")||(e.registerDeviceOrientationEventCallback=function(){N("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceMotionEventData")||(e.fillDeviceMotionEventData=function(){N("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceMotionEventCallback")||(e.registerDeviceMotionEventCallback=function(){N("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"screenOrientation")||(e.screenOrientation=function(){N("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillOrientationChangeEventData")||(e.fillOrientationChangeEventData=function(){N("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerOrientationChangeEventCallback")||(e.registerOrientationChangeEventCallback=function(){N("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillFullscreenChangeEventData")||(e.fillFullscreenChangeEventData=function(){N("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFullscreenChangeEventCallback")||(e.registerFullscreenChangeEventCallback=function(){N("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerRestoreOldStyle")||(e.registerRestoreOldStyle=function(){N("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"hideEverythingExceptGivenElement")||(e.hideEverythingExceptGivenElement=function(){N("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreHiddenElements")||(e.restoreHiddenElements=function(){N("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setLetterbox")||(e.setLetterbox=function(){N("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"currentFullscreenStrategy")||(e.currentFullscreenStrategy=function(){N("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreOldWindowedStyle")||(e.restoreOldWindowedStyle=function(){N("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"softFullscreenResizeWebGLRenderTarget")||(e.softFullscreenResizeWebGLRenderTarget=function(){N("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"doRequestFullscreen")||(e.doRequestFullscreen=function(){N("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillPointerlockChangeEventData")||(e.fillPointerlockChangeEventData=function(){N("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockChangeEventCallback")||(e.registerPointerlockChangeEventCallback=function(){N("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockErrorEventCallback")||(e.registerPointerlockErrorEventCallback=function(){N("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"requestPointerLock")||(e.requestPointerLock=function(){N("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillVisibilityChangeEventData")||(e.fillVisibilityChangeEventData=function(){N("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerVisibilityChangeEventCallback")||(e.registerVisibilityChangeEventCallback=function(){N("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerTouchEventCallback")||(e.registerTouchEventCallback=function(){N("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillGamepadEventData")||(e.fillGamepadEventData=function(){N("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerGamepadEventCallback")||(e.registerGamepadEventCallback=function(){N("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBeforeUnloadEventCallback")||(e.registerBeforeUnloadEventCallback=function(){N("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillBatteryEventData")||(e.fillBatteryEventData=function(){N("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"battery")||(e.battery=function(){N("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBatteryEventCallback")||(e.registerBatteryEventCallback=function(){N("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setCanvasElementSize")||(e.setCanvasElementSize=function(){N("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCanvasElementSize")||(e.getCanvasElementSize=function(){N("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangle")||(e.demangle=function(){N("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangleAll")||(e.demangleAll=function(){N("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jsStackTrace")||(e.jsStackTrace=function(){N("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){N("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getEnvStrings")||(e.getEnvStrings=function(){N("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"checkWasiClock")||(e.checkWasiClock=function(){N("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"flush_NO_FILESYSTEM")||(e.flush_NO_FILESYSTEM=function(){N("'flush_NO_FILESYSTEM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64")||(e.writeI53ToI64=function(){N("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Clamped")||(e.writeI53ToI64Clamped=function(){N("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Signaling")||(e.writeI53ToI64Signaling=function(){N("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Clamped")||(e.writeI53ToU64Clamped=function(){N("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Signaling")||(e.writeI53ToU64Signaling=function(){N("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromI64")||(e.readI53FromI64=function(){N("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromU64")||(e.readI53FromU64=function(){N("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertI32PairToI53")||(e.convertI32PairToI53=function(){N("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertU32PairToI53")||(e.convertU32PairToI53=function(){N("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setImmediateWrapped")||(e.setImmediateWrapped=function(){N("'setImmediateWrapped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"clearImmediateWrapped")||(e.clearImmediateWrapped=function(){N("'clearImmediateWrapped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"polyfillSetImmediate")||(e.polyfillSetImmediate=function(){N("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"uncaughtExceptionCount")||(e.uncaughtExceptionCount=function(){N("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionLast")||(e.exceptionLast=function(){N("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionCaught")||(e.exceptionCaught=function(){N("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ExceptionInfo")||(e.ExceptionInfo=function(){N("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"CatchInfo")||(e.CatchInfo=function(){N("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_addRef")||(e.exception_addRef=function(){N("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_decRef")||(e.exception_decRef=function(){N("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Browser")||(e.Browser=function(){N("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"funcWrappers")||(e.funcWrappers=function(){N("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){N("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setMainLoop")||(e.setMainLoop=function(){N("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wget")||(e.wget=function(){N("'wget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"tempFixedLengthArray")||(e.tempFixedLengthArray=function(){N("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"miniTempWebGLFloatBuffers")||(e.miniTempWebGLFloatBuffers=function(){N("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapObjectForWebGLType")||(e.heapObjectForWebGLType=function(){N("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapAccessShiftForWebGLHeap")||(e.heapAccessShiftForWebGLHeap=function(){N("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GL")||(e.GL=function(){N("'GL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGet")||(e.emscriptenWebGLGet=function(){N("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"computeUnpackAlignedImageSize")||(e.computeUnpackAlignedImageSize=function(){N("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetTexPixelData")||(e.emscriptenWebGLGetTexPixelData=function(){N("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetUniform")||(e.emscriptenWebGLGetUniform=function(){N("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetUniformLocation")||(e.webglGetUniformLocation=function(){N("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglPrepareUniformLocationsBeforeFirstUse")||(e.webglPrepareUniformLocationsBeforeFirstUse=function(){N("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetLeftBracePos")||(e.webglGetLeftBracePos=function(){N("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetVertexAttrib")||(e.emscriptenWebGLGetVertexAttrib=function(){N("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeGLArray")||(e.writeGLArray=function(){N("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AL")||(e.AL=function(){N("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_unicode")||(e.SDL_unicode=function(){N("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_ttfContext")||(e.SDL_ttfContext=function(){N("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_audio")||(e.SDL_audio=function(){N("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL")||(e.SDL=function(){N("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_gfx")||(e.SDL_gfx=function(){N("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLUT")||(e.GLUT=function(){N("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"EGL")||(e.EGL=function(){N("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW_Window")||(e.GLFW_Window=function(){N("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW")||(e.GLFW=function(){N("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLEW")||(e.GLEW=function(){N("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"IDBStore")||(e.IDBStore=function(){N("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runAndAbortIfError")||(e.runAndAbortIfError=function(){N("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"warnOnce")||(e.warnOnce=function(){N("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackSave")||(e.stackSave=function(){N("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackRestore")||(e.stackRestore=function(){N("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackAlloc")||(e.stackAlloc=function(){N("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AsciiToString")||(e.AsciiToString=function(){N("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToAscii")||(e.stringToAscii=function(){N("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF16ToString")||(e.UTF16ToString=function(){N("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF16")||(e.stringToUTF16=function(){N("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF16")||(e.lengthBytesUTF16=function(){N("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF32ToString")||(e.UTF32ToString=function(){N("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF32")||(e.stringToUTF32=function(){N("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF32")||(e.lengthBytesUTF32=function(){N("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8")||(e.allocateUTF8=function(){N("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8OnStack")||(e.allocateUTF8OnStack=function(){N("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.writeStackCookie=S,e.checkStackCookie=A,Object.getOwnPropertyDescriptor(e,"ALLOC_NORMAL")||Object.defineProperty(e,"ALLOC_NORMAL",{configurable:!0,get:function(){N("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(e,"ALLOC_STACK")||Object.defineProperty(e,"ALLOC_STACK",{configurable:!0,get:function(){N("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),k=function e(){re||oe(),re||(k=e)},e.run=oe,oe(),e.ready});let p,g,w=document.querySelector("canvas"),b=Object.assign(self.sock||(self.sock={}),{canvas:w,async toggleFullscreen(){if(document.fullscreenEnabled){if(document.fullscreenElement)return await document.exitFullscreen(),!0;try{return await document.body.requestFullscreen(),!0}catch(e){console.warn(e)}}else console.warn("fullscreen is blocked by the browser");return!1},togglePointerLock(){document.pointerLockElement?document.exitPointerLock():w.requestPointerLock()}}),E=!!b.messaging,_=[];function O(e,t){parent!==window&&parent.postMessage({type:e,data:t})}function y(){return p.HEAPU8.buffer}function m(){return p.HEAPU8}async function T(){if(p=await h(),b.Module=p,p.sock={write(e){console.log(e),E&&O("print",e)},error(e,t,r,n){let o;W=!0,0===e?(Z=n,o=`[WREN COMPILE ERROR]\n${n}\n  at ${z(t,r)}`,Y=[],Y.push([t,r,null])):1===e?(Z=n,o="[WREN RUNTIME ERROR]\n"+n,Y=[]):2===e&&(o=`  at ${n} ${z(t,r)}`,Y.push([t,r,n])),console.error(o),V=V?V+"\n"+o:o},loadModule:e=>(l("assets"+e+".wren","arraybuffer").then((t=>{0===D(e,t)&&D(e,"self__.transfer()")}),(t=>{console.warn(`Error loading module source "${e}"`,t),D(e,"self__.transferError("+function(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];t+="\\"===n?"\\\\":"%"===n||'"'===n?"\\"+n:n}return t+'"'}(String(t))+")")})),"var self__=Fiber.current\nFiber.suspend()\nself__=null"),bindMethod:(e,t,r,n)=>function(e,t,r,n){return s[i(e,t,r,n)]}(e,t,r,n),bindClass:(e,t)=>function(e,t){return c[a(e,t)]}(e,t)},g=p.ccall("sock_init","number"),0===g)throw Error("error loading VM")}function D(e,t){let r,n,o=0;"string"==typeof t?(r=t,n="string"):(o=p.stackSave(),r=$(t),n="number");let i=p.ccall("wrenInterpret","number",["number","string",n],[g,e,r]);return o&&p.stackRestore(o),i}function P(e,t){return p.ccall("wrenHasVariable","boolean",["number","string","string"],[g,e,t])}function R(e){p.ccall("wrenEnsureSlots",null,["number","number"],[g,e])}function M(e){return p.ccall("wrenGetSlotType","number",["number","number"],[g,e])}function S(e){return p.ccall("wrenGetSlotBool","boolean",["number","number"],[g,e])}function A(e){return p.ccall("wrenGetSlotString","string",["number","number"],[g,e])}function v(e){return p.ccall("wrenGetSlotDouble","number",["number","number"],[g,e])}function U(e){return p.ccall("wrenGetSlotForeign","number",["number","number"],[g,e])}function j(e,t){return p.ccall("wrenGetSlotIsInstanceOf","boolean",["number","number","number"],[g,e,t])}function I(e){return p.ccall("wrenGetSlotHandle","number",["number","number"],[g,e])}function x(e,t,r){p.ccall("wrenGetVariable",null,["number","string","string","number"],[g,e,t,r])}function F(e){p.ccall("wrenSetSlotNull",null,["number","number"],[g,e])}function k(e,t){p.ccall("wrenSetSlotBool",null,["number","number","boolean"],[g,e,t])}function L(e,t){p.ccall("wrenSetSlotDouble",null,["number","number","number"],[g,e,t])}function N(e,t,r,n,o){p.ccall("wrenSetSlotRange",null,["number","number","number","number","number","boolean"],[g,e,t,r,n,o])}function C(e,t){let r,n,o=0;"string"==typeof t?(r=t,n="string"):(o=p.stackSave(),r=$(t),n="number"),p.ccall("wrenSetSlotString",null,["number","number",n],[g,e,r]),o&&p.stackRestore(o)}function H(e,t){p.ccall("wrenSetSlotHandle",null,["number","number","number"],[g,e,t])}function G(e,t,r){return p.ccall("wrenSetSlotNewForeign","number",["number","number","number","number"],[g,e,t,r])}function X(e){return p.ccall("wrenCall","number",["number","number"],[g,e])}function B(e){p.ccall("wrenReleaseHandle",null,["number","number"],[g,e])}function Q(e){var t;R(1),C(0,e),t=0,p.ccall("wrenAbortFiber",null,["number","number"],[g,t])}E&&addEventListener("message",(e=>{let t=e.data;if(t&&"object"==typeof t){let e=t.type;if(e){let r=t.data,n=[],o=[];for(let t of _)t.type===e?o.push(t):n.push(t);_=n;for(let e of o)e(r)}}}));let Y,W=!1,Z=null,V=null;function z(e,t){return"/"===e[0]&&(e=e.slice(1)),e+":"+t}function $(e){let t=e instanceof ArrayBuffer?new Uint8Array(e):e,r=0===t[t.length-1],n=r?t.length:t.length+1,o=p.stackAlloc(n),i=m();return i.set(t,o),r||(i[o+n-1]=0),o}function q(e){return p.ccall("sock_get_transform","number",["number"],[e])}let K=0,J=0,ee=0,te=0,re=0,ne=0,oe=0;function ie(e){return p.ccall("wrenMakeCallHandle","number",["number","string"],[g,e])}let ae=0;function se(e){return e.arrayBuffer?e.arrayBuffer():new Promise(((t,r)=>{const n=new FileReader;n.addEventListener("loadend",(()=>{t(n.result)})),n.addEventListener("error",r),n.readAsArrayBuffer(e)}))}async function ce(e){const t=await se(e);return new Uint8Array(t)}function le(e){return"undefined"!=typeof Blob&&e instanceof Blob}function de(e){return"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}n("sock","Time",{epoch(){L(0,Date.now()/1e3)}});class ue{constructor(e){this.typedArray=e instanceof ArrayBuffer||de(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}}class fe{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){const r=this.blob.slice(e,e+t),n=await se(r);return new Uint8Array(n)}async sliceAsBlob(e,t,r=""){return this.blob.slice(e,e+t,r)}}function he(e,t){var r=e.length;if(t<=r)return e;var n=new Uint8Array(Math.max(r<<1,t));return n.set(e,0),n}function pe(e,t,r,n,o,i){for(var a=_e,s=ye,c=0;c<r;){var l=e[s(n,o)&t];o+=15&l;var d=l>>>4;if(d<=15)i[c]=d,c++;else{var u=0,f=0;16==d?(f=3+a(n,o,2),o+=2,u=i[c-1]):17==d?(f=3+a(n,o,3),o+=3):18==d&&(f=11+a(n,o,7),o+=7);for(var h=c+f;c<h;)i[c]=u,c++}}return o}function ge(e,t,r,n){for(var o=0,i=0,a=n.length>>>1;i<r;){var s=e[i+t];n[i<<1]=0,n[1+(i<<1)]=s,s>o&&(o=s),i++}for(;i<a;)n[i<<1]=0,n[1+(i<<1)]=0,i++;return o}function we(e,t){for(var r,n,o,i,a=e.length,s=me.bl_count,c=0;c<=t;c++)s[c]=0;for(c=1;c<a;c+=2)s[e[c]]++;var l=me.next_code;for(r=0,s[0]=0,n=1;n<=t;n++)r=r+s[n-1]<<1,l[n]=r;for(o=0;o<a;o+=2)0!=(i=e[o+1])&&(e[o]=l[i],l[i]++)}function be(e,t,r){for(var n=e.length,o=me.rev15,i=0;i<n;i+=2)if(0!=e[i+1])for(var a=i>>1,s=e[i+1],c=a<<4|s,l=t-s,d=e[i]<<l,u=d+(1<<l);d!=u;){r[o[d]>>>15-t]=c,d++}}function Ee(e,t){for(var r=me.rev15,n=15-t,o=0;o<e.length;o+=2){var i=e[o]<<t-e[o+1];e[o]=r[i]>>>n}}function _e(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1}function Oe(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1}function ye(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}const me=(Te=Uint16Array,De=Uint32Array,{next_code:new Te(16),bl_count:new Te(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new Te(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new De(32),flmap:new Te(512),fltree:[],fdmap:new Te(32),fdtree:[],lmap:new Te(32768),ltree:[],ttree:[],dmap:new Te(32768),dtree:[],imap:new Te(512),itree:[],rev15:new Te(32768),lhst:new De(286),dhst:new De(30),ihst:new De(19),lits:new De(15e3),strt:new Te(65536),prev:new Te(32768)});var Te,De;!function(){for(var e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,me.rev15[e]=(t>>>16|t<<16)>>>17}function r(e,t,r){for(;0!=t--;)e.push(0,r)}for(e=0;e<32;e++)me.ldef[e]=me.of0[e]<<3|me.exb[e],me.ddef[e]=me.df0[e]<<4|me.dxb[e];r(me.fltree,144,8),r(me.fltree,112,9),r(me.fltree,24,7),r(me.fltree,8,8),we(me.fltree,9),be(me.fltree,9,me.flmap),Ee(me.fltree,9),r(me.fdtree,32,5),we(me.fdtree,5),be(me.fdtree,5,me.fdmap),Ee(me.fdtree,5),r(me.itree,19,0),r(me.ltree,286,0),r(me.dtree,30,0),r(me.ttree,320,0)}();const Pe={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(e,t,r,n){for(var o=0;o<n;o++)e=Pe.table[255&(e^t[r+o])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^Pe.update(4294967295,e,t,r)}};function Re(e,t){return function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var n=Oe,o=_e,i=pe,a=ye,s=null==t;s&&(t=new r(e.length>>>2<<3));for(var c,l,d=0,u=0,f=0,h=0,p=0,g=0,w=0,b=0,E=0;0==d;)if(d=n(e,E,1),u=n(e,E+1,2),E+=3,0!=u){if(s&&(t=he(t,b+(1<<17))),1==u&&(c=me.flmap,l=me.fdmap,g=511,w=31),2==u){f=o(e,E,5)+257,h=o(e,E+5,5)+1,p=o(e,E+10,4)+4,E+=14;for(var _=0;_<38;_+=2)me.itree[_]=0,me.itree[_+1]=0;var O=1;for(_=0;_<p;_++){var y=o(e,E+3*_,3);me.itree[1+(me.ordr[_]<<1)]=y,y>O&&(O=y)}E+=3*p,we(me.itree,O),be(me.itree,O,me.imap),c=me.lmap,l=me.dmap,E=i(me.imap,(1<<O)-1,f+h,e,E,me.ttree);var m=ge(me.ttree,0,f,me.ltree);g=(1<<m)-1;var T=ge(me.ttree,f,h,me.dtree);w=(1<<T)-1,we(me.ltree,m),be(me.ltree,m,c),we(me.dtree,T),be(me.dtree,T,l)}for(;;){var D=c[a(e,E)&g];E+=15&D;var P=D>>>4;if(P>>>8==0)t[b++]=P;else{if(256==P)break;var R=b+P-254;if(P>264){var M=me.ldef[P-257];R=b+(M>>>3)+o(e,E,7&M),E+=7&M}var S=l[a(e,E)&w];E+=15&S;var A=S>>>4,v=me.ddef[A],U=(v>>>4)+n(e,E,15&v);for(E+=15&v,s&&(t=he(t,b+(1<<17)));b<R;)t[b]=t[b++-U],t[b]=t[b++-U],t[b]=t[b++-U],t[b]=t[b++-U];b=R}}}else{0!=(7&E)&&(E+=8-(7&E));var j=4+(E>>>3),I=e[j-4]|e[j-3]<<8;s&&(t=he(t,b+I)),t.set(new r(e.buffer,e.byteOffset+j,I),b),E=j+I<<3,b+=I}return t.length==b?t:t.slice(0,b)}(e,t)}const Me={numWorkers:1,workerURL:"",useWorkers:!1};let Se=0,Ae=0,ve=!0;const Ue=[],je=[],Ie=[],xe=new Map;function Fe(e){Ne(e.target);const{id:t,error:r,data:n}=e.data,o=xe.get(t);xe.delete(t),r?o.reject(r):o.resolve(n)}function ke(e){return new Promise(((t,r)=>{const n=new Worker(e);n.onmessage=e=>{"start"===e.data?(n.onerror=void 0,n.onmessage=void 0,t(n)):r(new Error(`unexpected message: ${e.data}`))},n.onerror=r}))}const Le={async createWorker(e){try{return await ke(e)}catch(t){console.warn("could not load worker:",e)}let t;try{const r=await fetch(e,{mode:"cors"});if(!r.ok)throw new Error(`could not load: ${e}`);t=await r.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const n=await ke(e);return Me.workerURL=e,n}catch(t){console.warn("could not load worker via fetch:",e)}if(void 0!==t)try{e=`data:application/javascript;base64,${btoa(t)}`;const r=await ke(e);return Me.workerURL=e,r}catch(e){console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}};function Ne(e){je.push(e),He()}function Ce(e,t,r,n){const o=new Uint8Array(t);Re(e,o),n(r?new Blob([o],{type:r}):o.buffer)}async function He(){if(0!==Ie.length){if(Me.useWorkers&&ve){const e=await async function(){if(0===je.length&&Ae<Me.numWorkers){++Ae;try{const e=await Le.createWorker(Me.workerURL);Ue.push(e),je.push(e),Le.addEventListener(e,Fe)}catch(e){ve=!1}}return je.pop()}();if(ve){if(e){if(0===Ie.length)return void Ne(e);const{id:t,src:r,uncompressedSize:n,type:o,resolve:i,reject:a}=Ie.shift();xe.set(t,{id:t,resolve:i,reject:a});const s=[];e.postMessage({type:"inflate",data:{id:t,type:o,src:r,uncompressedSize:n}},s)}return}}for(;Ie.length;){const{src:e,uncompressedSize:t,type:r,resolve:n}=Ie.shift();let o=e;le(e)&&(o=await ce(e)),Ce(o,t,r,n)}}}function Ge(e,t,r){return new Promise(((n,o)=>{Ie.push({src:e,uncompressedSize:t,type:r,resolve:n,reject:o,id:Se++}),He()}))}class Xe{constructor(e,t){this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=function(e,t){return new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0)}(t.lastModFileDate,t.lastModFileTime),this.isDirectory=0===t.uncompressedSize&&t.name.endsWith("/"),this.encrypted=!!(1&t.generalPurposeBitFlag),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(e="application/octet-stream"){return await async function(e,t,r){const{decompress:n,fileDataStart:o}=await Je(e,t);if(!n){const n=await Qe(e,o,t.compressedSize,r);return le(n)?n:new Blob([de(n.buffer)?new Uint8Array(n):n],{type:r})}const i=await Qe(e,o,t.compressedSize);return await Ge(i,t.uncompressedSize,r)}(this._reader,this._rawEntry,e)}async arrayBuffer(){return await async function(e,t){const{decompress:r,fileDataStart:n}=await Je(e,t);if(!r){const r=await Be(e,n,t.compressedSize);return 0===(o=r).byteOffset&&o.byteLength===o.buffer.byteLength?r.buffer:r.slice().buffer}var o;const i=await Qe(e,n,t.compressedSize);return await Ge(i,t.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const e=await this.arrayBuffer();return $e(new Uint8Array(e))}async json(){const e=await this.text();return JSON.parse(e)}}async function Be(e,t,r){return await e.read(t,r)}async function Qe(e,t,r,n){return e.sliceAsBlob?await e.sliceAsBlob(t,r,n):await e.read(t,r)}const Ye={unsigned:()=>0};function We(e,t){return e[t]+256*e[t+1]}function Ze(e,t){return e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function Ve(e,t){return Ze(e,t)+4294967296*Ze(e,t+4)}const ze=new TextDecoder;function $e(e,t){return de(e.buffer)&&(e=new Uint8Array(e)),ze.decode(e)}async function qe(e,t,r,n){const o=t-20,i=await Be(e,o,20);if(117853008!==Ze(i,0))throw new Error("invalid zip64 end of central directory locator signature");const a=Ve(i,8),s=await Be(e,a,56);if(101075792!==Ze(s,0))throw new Error("invalid zip64 end of central directory record signature");const c=Ve(s,32),l=Ve(s,40);return Ke(e,Ve(s,48),l,c,r,n)}async function Ke(e,t,r,n,o,i){let a=0;const s=await Be(e,t,r),c=[];for(let e=0;e<n;++e){const e=s.subarray(a,a+46),t=Ze(e,0);if(33639248!==t)throw new Error(`invalid central directory file header signature: 0x${t.toString(16)}`);const r={versionMadeBy:We(e,4),versionNeededToExtract:We(e,6),generalPurposeBitFlag:We(e,8),compressionMethod:We(e,10),lastModFileTime:We(e,12),lastModFileDate:We(e,14),crc32:Ze(e,16),compressedSize:Ze(e,20),uncompressedSize:Ze(e,24),fileNameLength:We(e,28),extraFieldLength:We(e,30),fileCommentLength:We(e,32),internalFileAttributes:We(e,36),externalFileAttributes:Ze(e,38),relativeOffsetOfLocalHeader:Ze(e,42)};if(64&r.generalPurposeBitFlag)throw new Error("strong encryption is not supported");a+=46;const n=s.subarray(a,a+r.fileNameLength+r.extraFieldLength+r.fileCommentLength);r.nameBytes=n.slice(0,r.fileNameLength),r.name=$e(r.nameBytes);const o=r.fileNameLength+r.extraFieldLength,i=n.slice(r.fileNameLength,o);r.extraFields=[];let l=0;for(;l<i.length-3;){const e=We(i,l+0),t=l+4,n=t+We(i,l+2);if(n>i.length)throw new Error("extra field length exceeds extra field buffer size");r.extraFields.push({id:e,data:i.slice(t,n)}),l=n}if(r.commentBytes=n.slice(o,o+r.fileCommentLength),r.comment=$e(r.commentBytes),a+=n.length,4294967295===r.uncompressedSize||4294967295===r.compressedSize||4294967295===r.relativeOffsetOfLocalHeader){const e=r.extraFields.find((e=>1===e.id));if(!e)throw new Error("expected zip64 extended information extra field");const t=e.data;let n=0;if(4294967295===r.uncompressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include uncompressed size");r.uncompressedSize=Ve(t,n),n+=8}if(4294967295===r.compressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include compressed size");r.compressedSize=Ve(t,n),n+=8}if(4294967295===r.relativeOffsetOfLocalHeader){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include relative header offset");r.relativeOffsetOfLocalHeader=Ve(t,n),n+=8}}const d=r.extraFields.find((e=>28789===e.id&&e.data.length>=6&&1===e.data[0]&&Ze(e.data,1)),Ye.unsigned(r.nameBytes));if(d&&(r.fileName=$e(d.data.slice(5))),0===r.compressionMethod){let e=r.uncompressedSize;if(0!=(1&r.generalPurposeBitFlag)&&(e+=12),r.compressedSize!==e)throw new Error(`compressed size mismatch for stored file: ${r.compressedSize} != ${e}`)}c.push(r)}return{zip:{comment:o,commentBytes:i},entries:c.map((t=>new Xe(e,t)))}}async function Je(e,t){if(1&t.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const r=await Be(e,t.relativeOffsetOfLocalHeader,30),n=await e.getLength(),o=Ze(r,0);if(67324752!==o)throw new Error(`invalid local file header signature: 0x${o.toString(16)}`);const i=We(r,26),a=We(r,28),s=t.relativeOffsetOfLocalHeader+r.length+i+a;let c;if(0===t.compressionMethod)c=!1;else{if(8!==t.compressionMethod)throw new Error(`unsupported compression method: ${t.compressionMethod}`);c=!0}const l=s,d=l+t.compressedSize;if(0!==t.compressedSize&&d>n)throw new Error(`file data overflows file bounds: ${l} +  ${t.compressedSize}  > ${n}`);return{decompress:c,fileDataStart:l}}async function et(e){let t;if("undefined"!=typeof Blob&&e instanceof Blob)t=new fe(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new ue(e);else if(de(e)||de(e.buffer))t=new ue(e);else if("string"==typeof e){const r=await fetch(e);if(!r.ok)throw new Error(`failed http request ${e}, status: ${r.status}: ${r.statusText}`);const n=await r.blob();t=new fe(n)}else{if("function"!=typeof e.getLength||"function"!=typeof e.read)throw new Error("unsupported source type");t=e}const r=await t.getLength();if(r>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${r}. Only file sizes up 4503599627370496 bytes are supported`);return await async function(e,t){const r=Math.min(65557,t),n=t-r,o=await Be(e,n,r);for(let t=r-22;t>=0;--t){if(101010256!==Ze(o,t))continue;const r=new Uint8Array(o.buffer,o.byteOffset+t,o.byteLength-t),i=We(r,4);if(0!==i)throw new Error(`multi-volume zip files are not supported. This is volume: ${i}`);const a=We(r,10),s=Ze(r,12),c=Ze(r,16),l=We(r,20),d=r.length-22;if(l!==d)throw new Error(`invalid comment length. expected: ${d}, actual: ${l}`);const u=new Uint8Array(r.buffer,r.byteOffset+22,l),f=$e(u);return 65535===a||4294967295===c?await qe(e,n+t,f,u):await Ke(e,c,s,a,f,u)}throw new Error("could not find end of central directory. maybe not zip file")}(t,r)}function tt(e,t,r){let n=document.createElement(e);if(t)for(let e in t){let r=t[e];e.startsWith("on")?n[e]=r:!0===r?n.setAttribute(e,""):null==r||!1===r||n.setAttribute(e,r)}if(r)if(Array.isArray(r))for(let e of r)n.append(e);else n.append(r);return n}function rt(e){let t=e.lastIndexOf(".");return t<0?"":e.slice(t+1).toLowerCase()}function nt(e){return"assets"+ot(e)}function ot(e){return"/"!==e[0]&&(e="/"+e),e}let it=Object.create(null);function at(e,t){e=ot(e);let r=it[e];return r?(t&&t(1),r instanceof Blob?r.arrayBuffer():r):l(nt(e),"arraybuffer",t).then((t=>it[e]=t))}async function st(e,t){let r;try{r=await l(e,"blob",((e,r)=>{r&&t&&t(.8*e)}))}catch(t){return["Error loading bundle '"+e+"'",t]}if(t&&t(.8),r){let n;try{n=await et(r)}catch(t){return["Error decoding bundle '"+e+"'",t]}if(t&&t(.9),n){let r=function(e){let t=null;for(let r of e.entries)if(!r.isDirectory){let e=r.name,n=e.indexOf("/");if(n<=0)return null;let o=e.slice(0,n+1);if(t){if(t!==o)return null}else t=o}return t}(n),o=[],i=n.entries.filter((e=>!e.isDirectory)),a=0;for(let n of i){let s=n.name;r&&(s=s.slice(r.length)),s="/"+s;let c,l=rt(s);c="png"===l?n.blob("image/png"):"jpg"===l||"jpeg"===l?n.blob("image/jpeg"):"gif"===l?n.blob("image/gif"):"bmp"===l?n.blob("image/bmp"):n.arrayBuffer(),o.push(c.then((e=>{it[s]=e,a++,t&&t(.9+a/i.length*(1-.9))}),(t=>{throw[`Error getting file '${s}' from bundle '${e}'`,t]})))}try{await Promise.all(o)}catch(e){return e}console.info(`[SOCK] loaded ${a} assets from bundle '${e}'`)}}}(function(e){Me.workerURL=e.workerURL||Me.workerURL,e.workerURL&&(Me.useWorkers=!0),Me.useWorkers=void 0!==e.useWorkers?e.useWorkers:Me.useWorkers,Me.numWorkers=e.numWorkers||Me.numWorkers})({workerURL:"unzipit.js"});let ct=0;function lt(e,t){t instanceof Promise?Promise.resolve(t).then((t=>{dt(e,!0,t)}),(t=>{dt(e,!1,String(t))})):function(e,t){B(e),ut(t,0)}(e,t)}function dt(e,t,r){for(R(3),H(0,e),k(1,t),ut(r,2);0===X(te)&&(R(3),0!==M(0));)H(0,e),F(1),F(2);B(e)}function ut(e,t){e instanceof ArrayBuffer||"string"==typeof e?C(t,e):e instanceof ft?(H(t,e.handle),B(e.handle)):"number"==typeof e?L(t,e):"boolean"==typeof e?k(t,e):F(t)}class ft{constructor(e){this.handle=e}}function ht(e){if(R(4),H(3,ct),6!==M(1)||!j(2,3))return void Q("args must be (string, Promise)");let t=A(1),r=I(2);H(0,r),lt(r,e(t))}n("sock","Asset",{"loadString_(_,_)"(){ht((e=>at(e)))},"exists_(_,_)"(){ht((e=>async function(e){try{return(await fetch(e,{method:"HEAD"})).ok}catch(t){return console.error("error for head request at "+e,t),!1}}(nt(e))))},"loadBundle_(_,_)"(){ht((e=>async function(e){let t=await st(e);return!t||(console.error(t[0]),console.error(t[1]),!1)}(nt(e))))}});const pt=["none","filter","echo","reverb","distortion"];let gt,wt,bt,Et=null,_t=0,Ot=0,yt=0;function mt(e,t,r){t=Math.max(0,t),r=Math.max(.002,r);let n=e.gain;n.cancelScheduledValues(gt.currentTime),n.value=n.value,n.linearRampToValueAtTime(t,gt.currentTime+r)}class Tt{constructor(e){this.effects=Array(8).fill(null),this.gain=gt.createGain(),this.destination=e,this.updateGraph()}getInput(){for(let e=0;e<8;e++){let t=this.effects[e];if(t)return t.input}return this.gain}getEffectType(e){let t=this.effects[e];return t?t.type:0}updateGraph(){let e=[];for(let t=0;t<8;t++){let r=this.effects[t];if(r){for(let t of e)t.connect(r.input);e=r.outputs;for(let t of e)t.disconnect();r.setupGraph&&r.setupGraph()}}for(let t of e)t.connect(this.gain);this.gain.disconnect(),this.gain.connect(this.destination?this.destination.getInput():wt)}}class Dt extends Tt{constructor(e){super(),this.ptr=e}}class Pt{constructor(e){this.ptr=e}setBuffer(e){this.buffer=e}}function Rt(e,t,r){t=Math.max(e.minValue,Math.min(e.maxValue,t)),r?e.linearRampToValueAtTime(t,gt.currentTime+r):e.value=t}class Mt{constructor(){this.filter=gt.createBiquadFilter()}getParam(e){if(0===e)switch(this.filter.type){case"lowpass":return 0;case"highpass":return 1;case"bandpass":return 2}else{if(1===e)return this.filter.frequency.value;if(2===e)return this.filter.Q.value}}checkParam(e,t){if(0===e&&((t=Math.floor(t))<0||t>2))return"invalid filter type"}setParam(e,t,r){if(0===e)switch(t=Math.floor(t)){case 0:this.filter.type="lowpass";break;case 1:this.filter.type="highpass";break;case 2:this.filter.type="bandpass"}else 1===e?Rt(this.filter.frequency,t,r):2===e&&Rt(this.filter.Q,t,r)}get type(){return 1}get input(){return this.filter}get outputs(){return[this.filter]}}class St{constructor(){this.maxDelay=-1,this.node=new GainNode(gt),this.decay=new GainNode(gt),this.mix=new GainNode(gt)}create(){this.delay=new DelayNode(gt,{delayTime:this.maxDelay,maxDelayTime:this.maxDelay}),this.delay.connect(this.mix),this.delay.connect(this.decay),this.decay.connect(this.delay)}setupGraph(){this.node.connect(this.delay)}getParam(e){return 0===e?this.delay?this.delay.delayTime.value:this.maxDelay:1===e?this.decay.gain.value:2===e?this.mix.gain.value:void 0}checkParam(e,t){if(0===e){if(t<.001)return"decay not be less than 1ms"}else if(1===e){if(t<0)return"decay must not be negative";if(t>=1)return"decay must less than 1"}}setParam(e,t,r){2===e?Rt(this.mix.gain,t,r):0===e?(this.maxDelay<0&&(this.maxDelay=t),this.delay&&Rt(this.delay.delayTime,t,r)):1===e&&Rt(this.decay.gain,t,r)}free(){this.delay.disconnect(),this.decay.disconnect(),this.delay=null,this.decay=null}get type(){return 2}get input(){return this.node}get outputs(){return[this.node,this.mix]}}class At{constructor(){this.gain=new GainNode(gt),this.wetGain=new GainNode(gt,{gain:1})}create(){bt||(bt=function(e){let t=Math.floor(e*gt.sampleRate),r=new AudioBuffer({length:t,sampleRate:gt.sampleRate,numberOfChannels:2}),n=r.getChannelData(0),o=r.getChannelData(1);for(let e=0;e<t;e++){let r=.022*Math.exp(e/t*-5);n[e]=(2*Math.random()-1)*r,o[e]=(2*Math.random()-1)*r}return r}(3)),this.convolver=new ConvolverNode(gt,{buffer:bt,disableNormalization:!0}),this.convolver.connect(this.wetGain)}setupGraph(){this.gain.connect(this.convolver)}getParam(e){if(0==e)return this.wetGain.gain.value}checkParam(e,t){}setParam(e,t,r){0===e&&Rt(this.wetGain.gain,t,r)}get type(){return 3}get input(){return this.gain}get outputs(){return[this.gain,this.wetGain]}}class vt extends Tt{constructor(e,t,r,n){super(n),this.ptr=e,this.audio=t,this.audioHandle=r,this._initSource(),this.state=0,this.time=0}_initSource(){this.source=gt.createBufferSource(),this.source.buffer=this.audio.buffer,this.source.onended=()=>{this.state=3,this.time=this.audio.buffer.duration}}play(){if(0===this.state||2===this.state){if(2===this.state){let e=this.source;this._initSource(),this.source.loop=e.loop,this.source.loopStart=e.loopStart,this.source.playbackRate.value=e.playbackRate.value}this.source.connect(this.getInput()),this.source.start(0,this.time),this.startTime=gt.currentTime,this.state=1}}saveTime(){this.time+=(gt.currentTime-this.startTime)*this.source.playbackRate.value,this.startTime=gt.currentTime}pause(){1===this.state&&(this.saveTime(),this.stopSource(),this.state=2)}stopSource(){this.source.onended=null,this.source.stop(),this.source.disconnect()}updateGraph(){super.updateGraph(),this.source&&(this.source.disconnect(),this.source.connect(this.getInput()))}}let Ut=new Map,jt=new Map,It=new Map;function xt(){return Ut.get(U(0))}function Ft(){return jt.get(U(0))}function kt(){return It.get(U(0))}let Lt,Nt=!0;async function Ct(e){if(null==Lt){Lt=new Promise((e=>{let t=()=>{removeEventListener("stbvorbis",t),e(self.stbvorbis)};addEventListener("stbvorbis",t)}));let e=document.createElement("script");e.src="stbvorbis.js",document.head.append(e)}let t=await Lt;return new Promise(((r,n)=>{let o,i=[];t.decode(e,(e=>{if(e.error)n(e.error);else if(e.eof){let e=i.reduce(((e,t)=>e+t[0].length),0),t=i[0].length,n=new AudioBuffer({sampleRate:o,numberOfChannels:t,length:e}),a=0;for(let e of i)for(let r=0;r<t;r++)n.copyToChannel(e[r],r,a),a+=e[r].length;r(n)}else i.push(e.data),o=e.sampleRate}))}))}function Ht(e){for(let e=1;e<=6;e++)if(1!==M(e))return void Q("args must be Nums");let t,r=v(1),n=v(2),o=Array(4);if(o[0]=v(3),o[1]=v(4),o[2]=v(5),o[3]=v(6),r<0||r>=8)return void Q("invalid effect index");if(n<1||n>4)return void Q("invalid effect type");if(t=1===n?new Mt:2===n?new St:3===n?new At:null,t){if(t.checkParam)for(let e=0;e<4;e++){let r=t.checkParam(e,o[e]);if(r)return t.free&&t.free(),void Q(r)}for(let e=0;e<4;e++)t.setParam(e,o[e])}t.create&&t.create();let i=e.effects[r];if(i){for(let e of i.outputs)e.disconnect();i.free&&i.free()}e.effects[r]=t,e.updateGraph()}function Gt(e){if(1!==M(1))return void Q("index must be a Num");let t=Math.trunc(v(1));t<0||t>=8?Q("invalid effect index"):L(0,e.getEffectType(t))}function Xt(e){for(let e=1;e<=3;e++)if(1!==M(e))return void Q("args must be Nums");let t=Math.trunc(v(1)),r=Math.trunc(v(2)),n=Math.trunc(v(3));t<0||t>=8?Q("invalid effect index"):r<1||r>4?Q("invalid effect type"):e.getEffectType(t)==r?n<0||n>=4?Q("invalid param index"):L(0,e.effects[t].getParam(n)??0):Q(`effect at ${t} is not a ${pt[r]}`)}function Bt(e){for(let e=1;e<=5;e++)if(1!==M(e))return void Q("args must be Nums");let t=Math.trunc(v(1)),r=Math.trunc(v(2)),n=Math.trunc(v(3)),o=v(4),i=v(5);if(t<0||t>=8)return void Q("invalid effect index");if(r<1||r>4)return void Q("invalid effect type");if(e.getEffectType(t)!=r)return void Q(`effect at ${t} is not a ${pt[r]}`);if(n<0||n>=4)return void Q("invalid param index");if(i<0)return void Q("fade time must be positive");let a=e.effects[t];if(a.checkParam){let e=a.checkParam(n,o);if(e)return void Q(e)}a.setParam(n,o,i)}function Qt(e){for(let e=1;e<=2;e++)if(1!==M(e))return void Q("volume and fade must be Nums");mt(e,v(1),v(2))}o("sock","AudioBus",[()=>{let e=G(0,0,0),t=new Dt(e);Ut.set(e,t)},e=>{Ut.delete(e)}],{volume(){L(0,xt().gain.gain.value)},"fadeVolume(_,_)"(){Qt(xt().gain)},"setEffect_(_,_,_,_,_,_)"(){Ht(xt())},"getEffect_(_)"(){Gt(xt())},"getParam_(_,_,_)"(){Xt(xt())},"setParam_(_,_,_,_,_)"(){Bt(xt())}}),o("sock","Audio",[()=>{let e=G(0,0,0),t=new Pt(e);jt.set(e,t)},e=>{jt.delete(e)}],{duration(){let e=Ft();L(0,e.buffer?e.buffer.duration:0)},"voice()"(){let e=I(0),t=Ft();if(!t.buffer)return void Q("audio not loaded");R(2),H(1,yt);let r=G(0,1,0),n=new vt(r,t,e);It.set(r,n)},"voice(_)"(){let e=I(0),t=Ft();if(!t.buffer)return void Q("audio not loaded");if(H(0,Ot),!j(1,0))return void Q("bus must be an AudioBus");let r=Ut.get(U(1));H(1,yt);let n=G(0,1,0),o=new vt(n,t,e,r);It.set(n,o)}},{"load_(_,_)"(){ht((async e=>{let t=await async function(e){let t=await at(e),r="ogg"===rt(e);try{if(r&&!Nt)return await Ct(t);null==Et&&(Et=new OfflineAudioContext(1,1,44100));try{return await Et.decodeAudioData(t)}catch(n){if(r)return console.info(`Failed to natively decode ${e}, switching to JavaScript OGG decoder`,n),Nt=!1,await Ct(t);throw n}}catch(t){throw console.error(t),Error(`failed to decode audio ${e}`)}}(e);R(1),H(0,_t);let r=G(0,0,0),n=new Pt(r);return jt.set(r,n),n.setBuffer(t),new ft(I(0))}))},volume(){L(0,wt.gain.value/.5)},"fadeVolume(_,_)"(){for(let e=1;e<=2;e++)if(1!==M(e))return void Q("args must be Nums");let e=.5*v(1),t=v(2);mt(wt,e,t)}}),o("sock","Voice",[()=>{},e=>{B(It.get(e).audioHandle),It.delete(e)}],{"play()"(){kt().play()},"pause()"(){kt().pause()},isPaused(){k(0,1!==kt().state)},"stop()"(){let e=kt();e.stopSource(),e.state=3},time(){let e=kt();1===e.state&&e.saveTime(),L(0,e.time)},"time=(_)"(){if(1!==M(1))return void Q("time must be Num");let e=v(1),t=kt();t.pause(),t.time=e,t.play()},volume(){L(0,kt().gain.gain.value)},"fadeVolume(_,_)"(){Qt(kt().gain)},rate(){L(0,kt().source.playbackRate.value)},"fadeRate(_,_)"(){for(let e=1;e<=2;e++)if(1!==M(e))return void Q("args must be Nums");let e=v(1),t=v(2);Rt(kt().source.playbackRate,e,t)},loop(){k(0,kt().source.loop)},"loop=(_)"(){if(0!==M(1))return void Q("loop must be a Bool");let e=kt(),t=S(1);e.source.loop=t,t&&(e.source.loopEnd=e.audio.buffer.duration)},loopStart(){L(0,kt().source.loopStart)},"loopStart=(_)"(){if(1!==M(1))return void Q("loopStart must be a Num");let e=kt(),t=v(1);e.source.loopStart=t},"setEffect_(_,_,_,_,_,_)"(){Ht(kt())},"getEffect_(_)"(){Gt(kt())},"getParam_(_,_,_)"(){Xt(kt())},"setParam_(_,_,_,_,_)"(){Bt(kt())}}),n("sock","Buffer",{"load_(_,_)"(){ht((async e=>{let t=await at(e),r=t.byteLength,n=0;if(r>0){if(n=p._malloc(r),!n)throw`could not allocate ${r} bytes`;p.HEAPU8.set(new Uint8Array(t),n)}return p.ccall("sock_new_buffer",null,["number","number"],[n,r]),new ft(I(0))}))}});let Yt=null;function Wt(e){if(null==Yt)return Q("id must be set before using other Storage methods"),null;if(6!==M(e))return Q("key must be a string"),null;let t=A(e);if(Zt(t))return Yt+"/"+t;Q("key may only contain letters, numbers, underscores and dashes")}function Zt(e){return/^[a-zA-Z0-9_\-]+$/.test(e)}n("sock","Storage",{id(){Yt?C(0,Yt):F(0)},"id=(_)"(){if(6!==M(1))return void Q("id must be a String");let e=A(1);Zt(e)?Yt=e:Q("id may only contain letters, numbers, underscores and dashes")},"contains(_)"(){let e=Wt(1);e&&k(0,null!==localStorage.getItem(e))},"load_(_)"(){let e=Wt(1);if(e){let t=localStorage.getItem(e);null==t?F(0):C(0,t)}},"save_(_,_)"(){if(6!==M(2))return void Q("value must be a String");let e=Wt(1);if(e){let t=A(2);localStorage.setItem(e,t)}},"delete(_)"(){let e=Wt(1);e&&(localStorage.removeItem(e),F(0))}});let Vt=0,zt=0,$t=0,qt=0,Kt=0,Jt=0,er=1,tr=1,rr=1,nr={pixelScaling:!1,resolution:null,maxScale:1/0},or=tt("div",{style:"position: fixed; pointer-events: none;"}),ir=0;let ar=!1;function sr(){ar=!0}function cr(){Vt=innerWidth,zt=innerHeight;let e,t,r,n=devicePixelRatio;w.width=Vt*n,w.height=zt*n,w.style.width=Vt+"px",w.style.height=zt+"px";let o=nr.resolution;if(o){e=o[0],t=o[1];let n=Vt/e,i=zt/t;r=Math.min(n,i,nr.maxScale),nr.pixelScaling&&r>1&&(r=Math.floor(r))}else e=Vt,t=zt,r=1;$t=e,qt=t,rr=r,er=Math.floor(r*e),tr=Math.floor(r*t),Kt=Math.floor((Vt-er)/2),Jt=Math.floor((zt-tr)/2);let i=or.style;i.left=Kt+"px",i.top=Jt+"px",i.width=er+"px",i.height=tr+"px"}addEventListener("resize",(()=>{sr()}));let lr=null;function dr(){return lr||ur(0,0),lr}function ur(e,t,r){lr||(lr=new Float32Array(9));let n=2/$t,o=-2/qt;r?(lr[0]=n*r[0],lr[1]=o*r[1],lr[2]=0,lr[3]=n*r[2],lr[4]=o*r[3],lr[5]=0,lr[6]=e*n-1+n*r[4],lr[7]=t*o+1+o*r[5],lr[8]=1):(lr[0]=n,lr[1]=0,lr[2]=0,lr[3]=0,lr[4]=o,lr[5]=0,lr[6]=e*n-1,lr[7]=t*o+1,lr[8]=1)}function fr(e,t,r){lr||(lr=new Float32Array(9));let n=2/$t,o=-2/qt,i=$t%2==0?0:.5,a=qt%2==0?0:.5;r?(lr[0]=n*r[0],lr[1]=o*r[1],lr[2]=0,lr[3]=n*r[2],lr[4]=o*r[3],lr[5]=0,lr[6]=n*(r[4]-r[0]*e-r[2]*t+i),lr[7]=o*(r[5]-r[1]*e-r[3]*t+a),lr[8]=1):(lr[0]=n,lr[1]=0,lr[2]=0,lr[3]=0,lr[4]=o,lr[5]=0,lr[6]=(i-e)*n,lr[7]=(a-t)*o,lr[8]=1)}function hr(e){for(let e=1;e<=2;e++)if(1!==M(e))return void Q("x/y must be Num");let t=v(1),r=v(2),n=null;if(5!==M(3)){let e=q(3);if(!e)return;n=new Float32Array(y(),e,6)}n||(t=Math.floor(t),r=Math.floor(r)),e(t,r,n)}n("sock","Camera",{"setOrigin(_,_,_)"(){hr(ur)},"lookAt(_,_,_)"(){hr(fr)},"reset()"(){ur(0,0)}});let pr=w.getContext("webgl",{antialias:!1});pr.enable(pr.BLEND),pr.blendFuncSeparate(pr.SRC_ALPHA,pr.ONE_MINUS_SRC_ALPHA,pr.ONE,pr.ONE_MINUS_SRC_ALPHA),b.gl=pr;const gr={linear:pr.LINEAR,nearest:pr.NEAREST},wr={clamp:pr.CLAMP_TO_EDGE,repeat:pr.REPEAT,mirror:pr.MIRRORED_REPEAT};function br(e){if(6!==M(e))return void Q("filter must be a String");let t=A(e);return gr.hasOwnProperty(t)?gr[t]:(Q(`invalid filter "${t}"`),null)}function Er(e){if(6!==M(e))return void Q("wrap mode must be a String");let t=A(e);return wr.hasOwnProperty(t)?wr[t]:(Q(`invalid wrap mode "${t}"`),null)}function _r(e){for(let t in gr)if(gr[t]===e)return t;return"???"}function Or(e){for(let t in wr)if(wr[t]===e)return t;return"???"}let yr=null,mr=0,Tr=pr.createBuffer();function Dr(e){if(pr.bindBuffer(pr.ELEMENT_ARRAY_BUFFER,Tr),null==yr||yr.length<e){let t=yr?yr.length:256;for(;t<e;)t*=2;let r=new Uint16Array(t);null!=yr&&r.set(yr);let n=mr/1.5;for(;mr+5<t;mr+=6)r[mr]=n,r[mr+1]=n+1,r[mr+2]=n+2,r[mr+3]=n+1,r[mr+4]=n+3,r[mr+5]=n+2,n+=4;pr.bufferData(pr.ELEMENT_ARRAY_BUFFER,r,pr.DYNAMIC_DRAW),yr=r,b.quadSize=t}}let Pr=[];class Rr{constructor(e){this.attributes={},this.uniforms={};let t=Mr("attribute",e.attributes,this.attributes,-1),r=Mr("varying",e.varyings,null,null),n=Mr("uniform",e.vertUniforms,this.uniforms,null),o=Mr("uniform",e.fragUniforms,this.uniforms,null);this.vertSource=t+r+n+Sr(e.vert??""),this.fragSource=r+o+Sr(e.frag??"gl_FragColor=vec4(1.0,0.0,1.0,1.0);"),this._vert=pr.createShader(pr.VERTEX_SHADER),pr.shaderSource(this._vert,this.vertSource),this._frag=pr.createShader(pr.FRAGMENT_SHADER),pr.shaderSource(this._frag,this.fragSource),this.prog=pr.createProgram(),pr.attachShader(this.prog,this._vert),pr.attachShader(this.prog,this._frag),this.compiled=!1}compile(){Rr.compile(this)}needsCompilation(){Pr.push(this)}free(){pr.deleteProgram(this.prog),pr.deleteShader(this._frag),pr.deleteShader(this._vert),this.prog=-1,this.compiled=!1}use(){if(!this.compiled)throw Error("shader not compiled");pr.useProgram(this.prog)}getUniformLocation(e){let t=this.uniforms[e];if(null==t)throw Error(`Shader does not contain a uniform named "${e}"`);return t}setUniformTexture(e,t,r){let n=this.getUniformLocation(e);r>=pr.TEXTURE0&&(r-=pr.TEXTURE0),pr.activeTexture(pr.TEXTURE0+r),pr.bindTexture(pr.TEXTURE_2D,t),pr.uniform1i(n,r)}setUniformFloat2(e,t,r){let n=this.getUniformLocation(e);pr.uniform2f(n,t,r)}setUniformMatrix3(e,t){let r=this.getUniformLocation(e);pr.uniformMatrix3fv(r,!1,t)}setUniformMatrix4(e,t){let r=this.getUniformLocation(e);pr.uniformMatrix4fv(r,!1,t)}static compileAll(){this.compile(Pr),Pr.length=0}static compile(e){e instanceof Rr&&(e=[e]);for(let t of e)pr.compileShader(t._vert),pr.compileShader(t._frag);for(let t of e)pr.linkProgram(t.prog);let t=[];for(let r of e)if(pr.getProgramParameter(r.prog,pr.LINK_STATUS))r.compiled=!0;else{let e=pr.getProgramInfoLog(r.prog),n=pr.getShaderInfoLog(r._vert),o=pr.getShaderInfoLog(r._frag),i="Shader Compilation Error:";e&&(i+="\n\n===   PROGRAM   ===\n"+e),n&&(i+="\n\n=== VERT SHADER ===\n"+n),o&&(i+="\n\n=== FRAG SHADER ===\n"+o),t.push(i)}if(t.length>0)throw Error(t.join("\n\n"));for(let t of e){for(let e in t.attributes)t.attributes[e]=pr.getAttribLocation(t.prog,e);for(let e in t.uniforms){let r=pr.getUniformLocation(t.prog,e);if(null==r)throw Error(`Failed to find uniform "${e}" in Shader.`);t.uniforms[e]=r}}}}function Mr(e,t,r,n){let o="";if(t)for(let i in t)r&&(r[i]=n),o+=e+" "+t[i]+" "+i+";\n";return o}function Sr(e){return Array.isArray(e)&&(e=e.join("")),"void main(){"+e+"}"}class Ar{constructor(e,t){this.x=e,this.y=t}}class vr{constructor(e,t){this.width=0,this.height=0,this.filter=e,this.wrap=t,this.size=1,this.texture=null}name(){return"Texture"}setFilter(e){this.filter!==e&&(this.filter=e,this.texture&&(pr.bindTexture(pr.TEXTURE_2D,this.texture),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MAG_FILTER,this.filter),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MIN_FILTER,this.filter)))}setWrap(e){this.wrap!==e&&(this.wrap=e,this.texture&&(pr.bindTexture(pr.TEXTURE_2D,this.texture),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_WRAP_S,this.wrap),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_WRAP_T,this.wrap)))}load(e){let t=function(e){return e instanceof HTMLImageElement?new Ar(e.naturalWidth,e.naturalHeight):e instanceof HTMLVideoElement?new Ar(e.videoWidth,e.videoHeight):new Ar(e.width,e.height)}(e);if(this.width=t.x,this.height=t.y,this.size=function(e,t){if(e instanceof HTMLImageElement){let t=performance.getEntriesByName(e.src)[0];if(t instanceof PerformanceResourceTiming)return t.decodedBodySize||t.transferSize}else if(e instanceof ImageData)return e.data.byteLength;return 1+Math.floor(t.x*t.y*.25)}(e,t),this.texture=pr.createTexture(),pr.bindTexture(pr.TEXTURE_2D,this.texture),pr.texImage2D(pr.TEXTURE_2D,0,pr.RGBA,pr.RGBA,pr.UNSIGNED_BYTE,e),!(Ur(this.width)&&Ur(this.height))){let e=[];this.wrap!==pr.CLAMP_TO_EDGE&&(this.wrap=pr.CLAMP_TO_EDGE,e.push("wrap mode to CLAMP_TO_EDGE")),e.length>0&&console.warn(`Forced settings on non power-of-two texture "${this.name()}": ${e.join(", ")}.\nThe texture would not function properly otherwise, see https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support`)}pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MAG_FILTER,this.filter),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MIN_FILTER,this.filter),null!=this.wrap&&this.wrap!==pr.REPEAT&&(pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_WRAP_S,this.wrap),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_WRAP_T,this.wrap))}free(){pr.deleteTexture(this.texture),this.texture=null}}function Ur(e){return 0==(e&e-1)}let jr=new Rr({attributes:{vertex:"vec3",color:"vec4",uv:"vec2"},varyings:{v_color:"lowp vec4",v_uv:"highp vec2"},vertUniforms:{mat:"mat3"},vert:["v_uv = uv;","v_color = color;","vec3 tv = mat * vec3(vertex.x, vertex.y, 1.0);","gl_Position = vec4(tv.x, tv.y, vertex.z, 1.0);"],fragUniforms:{tex:"sampler2D"},frag:"gl_FragColor = texture2D(tex, v_uv) * v_color;"});jr.needsCompilation();class Ir{constructor(){this._capacity=128,this._array=new ArrayBuffer(24*this._capacity),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=new Uint32Array(this._array),this._vertexCount=-1,this._vertexBuffer=pr.createBuffer(),this._vertexBufferCapacity=0}begin(e){if(this._vertexCount>=0)throw Error("already called begin()");return this._texture=e,this._vertexCount=0,this}drawQuad(e,t,r,n,o,i,a,s,c,l,d,u){if(this.checkResize(4),d){let f=e*d[0]+t*d[2]+d[4],h=e*d[1]+t*d[3]+d[5],p=e*d[0]+n*d[2]+d[4],g=e*d[1]+n*d[3]+d[5],w=r*d[0]+t*d[2]+d[4],b=r*d[1]+t*d[3]+d[5],E=r*d[0]+n*d[2]+d[4],_=r*d[1]+n*d[3]+d[5],O=u?e+u[0]:(e+r)/2,y=u?t+u[1]:(t+n)/2,m=O-d[0]*O-d[2]*y,T=y-d[1]*O-d[3]*y;this.addVertex(f+m,h+T,o,l,i,a),this.addVertex(p+m,g+T,o,l,i,c),this.addVertex(w+m,b+T,o,l,s,a),this.addVertex(E+m,_+T,o,l,s,c)}else this.addVertex(e,t,o,l,i,a),this.addVertex(e,n,o,l,i,c),this.addVertex(r,t,o,l,s,a),this.addVertex(r,n,o,l,s,c)}addVertex(e,t,r,n,o,i){let a=6*this._vertexCount;this._floats[a]=e,this._floats[a+1]=t,this._floats[a+2]=r,this._ints[a+3]=n,this._floats[a+4]=o,this._floats[a+5]=i,this._vertexCount++}checkResize(e){if(this._vertexCount+e>this._capacity){if(this._capacity*=2,this._capacity>=1048575)throw Error("exceeded max batch capacity of 1048575, did you forget to call end()?");this._array=new ArrayBuffer(24*this._capacity);let e=new Uint32Array(this._array);e.set(this._ints),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=e}}end(){if(this._vertexCount<0)throw Error("have not called begin()");if(this._vertexCount>0){jr.use(),pr.bindBuffer(pr.ARRAY_BUFFER,this._vertexBuffer),this._vertexCount>this._vertexBufferCapacity?(this._vertexBufferCapacity=this._capacity,pr.bufferData(pr.ARRAY_BUFFER,this._array,pr.DYNAMIC_DRAW)):pr.bufferSubData(pr.ARRAY_BUFFER,0,this._ints.subarray(0,6*this._vertexCount));let e=jr.attributes.vertex,t=jr.attributes.color,r=jr.attributes.uv;pr.vertexAttribPointer(e,3,pr.FLOAT,!1,24,0),pr.enableVertexAttribArray(e),pr.vertexAttribPointer(t,4,pr.UNSIGNED_BYTE,!0,24,12),pr.enableVertexAttribArray(t),pr.vertexAttribPointer(r,2,pr.FLOAT,!1,24,16),pr.enableVertexAttribArray(r),jr.setUniformTexture("tex",this._texture.texture,0),jr.setUniformMatrix3("mat",dr());let n=1.5*this._vertexCount;Dr(n),pr.drawElements(pr.TRIANGLES,n,pr.UNSIGNED_SHORT,0),pr.disableVertexAttribArray(e),pr.disableVertexAttribArray(t),pr.disableVertexAttribArray(r)}this._vertexCount=-1}free(){pr.deleteBuffer(this._vertexBuffer),this._array=this._bytes=this._floats=this._ints=null}}let xr=0;let Fr=pr.NEAREST,kr=pr.CLAMP_TO_EDGE;class Lr extends vr{constructor(e){super(Fr,kr),this.ptr=e,this.path=null,this.batcher=null,this.color=4294967295,this.tfo=null,this.tf=null}name(){return this.path||"Sprite#"+this.ptr}beginBatch(){this.batcher=Nr.length>0?Nr.pop():new Ir,this.batcher.begin(this)}endBatch(){this.batcher.end(),Nr.push(this.batcher),this.batcher=null}}let Nr=[];function Cr(){if(Nr.length>0)return Nr[0];{let e=new Ir;return Nr.push(e),e}}let Hr,Gr,Xr=new Map;function Br(){return Xr.get(U(0))}o("sock","Sprite",[()=>{let e=G(0,0,0),t=new Lr(e);Xr.set(e,t)},e=>{Xr.get(e).free(),Xr.delete(e)}],{width(){L(0,Br().width)},height(){L(0,Br().height)},scaleFilter(){C(0,_r(Br().filter))},"scaleFilter=(_)"(){let e=br(1);null!=e&&Br().setFilter(e)},wrapMode(){C(0,Or(Br().wrap))},"wrapMode=(_)"(){let e=Er(1);null!=e&&Br().setWrap(e)},color(){L(0,Br().color)},"color=(_)"(){1===M(1)?Br().color=v(1):Q("color must be Num")},"beginBatch()"(){let e=Br();e.batcher?Q("batch already started"):e.beginBatch()},"endBatch()"(){let e=Br();e.batcher?e.endBatch():Q("batch no yet started")},transform(){let e=Br();null==e.tf?F(0):p.ccall("sock_new_transform",null,["number","number","number","number","number","number"],e.tf)},"transform=(_)"(){let e=Br(),t=p.ccall("sock_get_transform","number",["number"],[1]);t&&(e.tfo=null,e.tf=Array.from(new Float32Array(y(),t,6)))},"setTransform(_,_,_)"(){let e=Br();if(1!==M(1)||1!==M(2))return void Q("x/y must be Nums");let t=v(1),r=v(2),n=q(3);n&&(e.tfo=[t,r],e.tf=Array.from(new Float32Array(y(),n,6)))},"draw(_,_,_,_)"(){let e=Br(),t=v(1),r=v(2),n=t+v(3),o=r+v(4),i=e.batcher||Cr().begin(e);i.drawQuad(t,r,n,o,0,0,0,1,1,e.color,e.tf,e.tfo),e.batcher||i.end()},"draw(_,_,_,_,_,_,_,_)"(){let e=Br(),t=v(1),r=v(2),n=t+v(3),o=r+v(4),i=v(5)/e.width,a=v(6)/e.height,s=i+v(7)/e.width,c=a+v(8)/e.height,l=e.batcher||Cr().begin(e);l.drawQuad(t,r,n,o,0,i,a,s,c,e.color,e.tf,e.tfo),e.batcher||l.end()},toString(){C(0,Br().name())}},{"load_(_,_)"(){ht((async e=>{let t=await function(e){e=ot(e);let t=it[e];if(t){t instanceof ArrayBuffer&&(t=new Blob([t]));let e=URL.createObjectURL(t);return setTimeout((()=>{URL.revokeObjectURL(e)}),5e3),d(e)}return d(nt(e))}(e);R(2),H(0,xr);let r=G(0,0,0),n=new Lr(r);return n.path=e,Xr.set(r,n),n.load(t),new ft(I(0))}))},defaultScaleFilter(){C(0,_r(Fr))},"defaultScaleFilter=(_)"(){let e=br(1);null!=e&&(Fr=e)},defaultWrapMode(){C(0,Or(kr))},"defaultWrapMode=(_)"(){let e=Er(1);null!=e&&(kr=e)}});let Qr=!1,Yr=navigator.platform,Wr=navigator.userAgent;"iPhone"===Yr||"iPad"===Yr||Wr.includes("iPhone")?(Hr="ios",Qr=!0):"Win32"===Yr?Hr="windows":Yr.includes("Mac")?Hr="mac":Wr.includes("Android")?(Hr="android",Qr=!0):Hr="linux",Gr=Wr.includes("Edg/")?"edge":Wr.includes("Chrome/")?"chrome":Wr.includes("Safari/")?"safari":Wr.includes("Firefox/")?"firefox":"unknown",b.device={os:Hr,isMobile:Qr,browser:Gr};let Zr=new Rr({attributes:{vertex:"vec2"},varyings:{v_uv:"highp vec2"},vert:["v_uv = 0.5 + vertex.xy * 0.5;","gl_Position = vec4(vertex, 0.0, 1.0);"],fragUniforms:{tex:"sampler2D"},frag:"gl_FragColor = texture2D(tex, v_uv);"});Zr.needsCompilation();let Vr,zr,$r=new class{constructor(e){this.filter=e??pr.LINEAR,this.texture=pr.createTexture(),this.depthBuffer=pr.createRenderbuffer(),this.framebuffer=pr.createFramebuffer(),this.quadBuffer=pr.createBuffer(),pr.bindBuffer(pr.ARRAY_BUFFER,this.quadBuffer),pr.bufferData(pr.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),pr.STATIC_DRAW),pr.bindTexture(pr.TEXTURE_2D,this.texture),pr.texImage2D(pr.TEXTURE_2D,0,pr.RGBA,8,8,0,pr.RGBA,pr.UNSIGNED_BYTE,null)}updateResolution(){pr.bindTexture(pr.TEXTURE_2D,this.texture),pr.texImage2D(pr.TEXTURE_2D,0,pr.RGBA,$t,qt,0,pr.RGBA,pr.UNSIGNED_BYTE,null),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MIN_FILTER,this.filter),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MAG_FILTER,this.filter),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_WRAP_S,pr.CLAMP_TO_EDGE),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_WRAP_T,pr.CLAMP_TO_EDGE),pr.bindRenderbuffer(pr.RENDERBUFFER,this.depthBuffer),pr.renderbufferStorage(pr.RENDERBUFFER,pr.DEPTH_COMPONENT16,$t,qt),pr.bindFramebuffer(pr.FRAMEBUFFER,this.framebuffer),pr.framebufferTexture2D(pr.FRAMEBUFFER,pr.COLOR_ATTACHMENT0,pr.TEXTURE_2D,this.texture,0),pr.framebufferRenderbuffer(pr.FRAMEBUFFER,pr.DEPTH_ATTACHMENT,pr.RENDERBUFFER,this.depthBuffer)}setFilter(e){this.filter=e,pr.bindTexture(pr.TEXTURE_2D,this.texture),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MIN_FILTER,this.filter),pr.texParameteri(pr.TEXTURE_2D,pr.TEXTURE_MAG_FILTER,this.filter)}bind(){pr.bindFramebuffer(pr.FRAMEBUFFER,this.framebuffer),pr.viewport(0,0,$t,qt)}unbind(){pr.bindFramebuffer(pr.FRAMEBUFFER,null);let e=devicePixelRatio;pr.viewport(Kt*e,Jt*e,er*e,tr*e)}draw(){this.unbind(),Zr.use(),Zr.setUniformTexture("tex",this.texture,0);let e=Zr.attributes.vertex;pr.bindBuffer(pr.ARRAY_BUFFER,this.quadBuffer),pr.vertexAttribPointer(e,2,pr.FLOAT,!1,0,0),pr.enableVertexAttribArray(e),pr.drawArrays(pr.TRIANGLES,0,6),pr.disableVertexAttribArray(e)}free(){pr.deleteFramebuffer(this.framebuffer),pr.deleteBuffer(this.quadBuffer),pr.deleteTexture(this.texture),pr.deleteRenderbuffer(this.depthBuffer)}}(pr.NEAREST);let qr=document.title,Kr=60,Jr=!1,en=!1,tn=null,rn="default",nn=4294967295,on=!1,an=!1,sn=null;n("sock","Game",{title(){C(0,qr)},"title=(_)"(){6===M(1)?document.title=qr=A(1):Q("title must be a String")},"layoutChanged_(_,_,_,_,_)"(){if(1!==M(1)||1!==M(2)||0!==M(3)||0!==M(4)||1!==M(5))return void Q("invalid args");let e=v(1),t=v(2),r=S(3),n=S(4),o=v(5);e<1||t<1||o<1?Q("resolution/scale must be positive"):(nr.pixelScaling=n,nr.resolution=r?[Math.trunc(e),Math.trunc(t)]:null,nr.maxScale=Math.trunc(o),sr())},scaleFilter:()=>$r.filter?"nearest":"linear","scaleFilter=(_)"(){let e=br(1);null!=e&&$r.setFilter(e)},fullscreenAllowed(){k(0,document.fullscreenEnabled)},fullscreen(){k(0,on||null!=document.fullscreenElement)},"setFullscreen_(_)"(){if(0!==M(1))return void Q("fullscreen must be a Bool");if(S(1)){if(!on&&!document.fullscreenElement){if(!document.fullscreenEnabled)return void console.warn("fullscreen is blocked by the browser, see Game.fullscreenAllowed");on=!0,document.body.requestFullscreen().then((()=>{on=!1}),(()=>{an=!0;let e=`Please ${Qr?"tap":"press any mouse or keyboard button"} to enter fullscreen.`,t=tt("div",{class:"overlay"},[tt("img",{style:"width: 185px; margin-bottom: 14px;",class:"pixel",alt:"icons of a mouse, keyboard, and fullscreen warning",src:"data:image/gif;base64,R0lGODdhJQAJAJAAAAAAAP///yH5BAkKAAAALAAAAAAlAAkAAAIzjB+ge2zrEFIJVHgxpJvW311Z6H2g1Wkph5rSuMFqY43ySrZenKOsGrP1gJGXMfQoIY0FADs="}),e]),r=()=>{document.body.requestFullscreen().catch((e=>{console.warn("DOM fullscreen fallback failed",e)})).then((()=>{on=!1,an=!1,t.remove(),removeEventListener("keydown",r)}))};t.onclick=r,addEventListener("keydown",r),document.body.append(t)}))}}else on=!1,document.fullscreenElement&&document.exitFullscreen()},fps(){Kr<0?F(0):L(0,Kr)},"fps=(_)"(){let e=M(1);if(5===e)Kr=-1;else if(1===e){let e=v(1);Kr<=0?Q("fps must be positive"):Kr=e}else Q("fps must be Num or null")},cursor(){C(0,rn)},"cursor=(_)"(){let e=M(1);if(5===e)rn="default";else{if(6!==e)return void Q("cursor must be null or a string");{let e=A(1);if(!cn.hasOwnProperty(e))return void Q(`invalid cursor type "${e}"`);rn=e}}w.style.cursor=cn[rn]||rn},"quit()"(){Jr=!0},"ready_()"(){en=!0,tn&&(tn(),tn=null)},"print_(_,_,_)"(){if(6!==M(1)||1!==M(2)||1!==M(3))return void Q("invalid args");L(0,function(e,t,r,n){"string"==typeof e&&(e=(new TextEncoder).encode(e));let o=null==n?4294967295:"number"==typeof n?n:n.int;zr||(zr=new Ir),zr.begin(Vr);let i=t,a=r;for(let r=0;r<e.length;r++){let n=e[r];if(9==n)i+=24;else if(10===n)i=t,a+=14;else if(13==n);else if(32==n)i+=6;else{(n<32||n>127)&&(n=127);let e=n-32,t=e%16*6,r=12*Math.trunc(e/16);zr.drawQuad(i,a,i+6,a+12,0,t/96,r/72,(t+6)/96,(r+12)/72,o),i+=6}}return zr.end(),a}(function(e){let t=p.stackSave(),r=p.stackAlloc(4),n=p.ccall("wrenGetSlotBytes","number",["number","number","number"],[g,e,r]),o=y(),i=new Int32Array(o,r)[0];return p.stackRestore(t),new Uint8Array(o,n,i)}(1),Math.trunc(v(2)),Math.trunc(v(3)),nn))},"setPrintColor_(_)"(){1===M(1)?nn=v(1):Q("color must be a Num")},"clear_(_,_,_)"(){for(let e=1;e<=3;e++)if(1!==M(e))return void Q("colors must be numbers");let e=v(1),t=v(2),r=v(3);pr.clearColor(e,t,r,1),pr.clear(pr.COLOR_BUFFER_BIT)},"openURL(_)"(){if(6!==M(1))return void Q("url must be a string");let e=A(1);open(e,"_blank","noreferrer")},arguments(){if(sn)H(0,sn);else{R(3),e=0,p.ccall("wrenSetSlotNewMap",null,["number","number"],[g,e]),new URL(location.href).searchParams.forEach(((e,t)=>{C(1,t),C(2,e),function(e,t,r){p.ccall("wrenSetMapValue",null,["number","number","number","number"],[g,e,t,r])}(0,1,2)})),sn=I(0)}var e}});let cn={default:"",pointer:"",wait:"progress",hidden:"none"},ln=0;function dn(){var e;R(1),x("sock","Game",0),ln=I(0),e=K,R(3),H(0,ln),L(1,Vt),L(2,zt),X(e||ee)}let un=60;n("sock","Screen",{width(){L(0,screen.width)},height(){L(0,screen.height)},availableWidth(){L(0,screen.availWidth)},availableHeight(){L(0,screen.availHeight)},refreshRate(){L(0,un)}});let fn=new Rr({attributes:{vertex:"vec3",color:"vec4"},varyings:{v_color:"lowp vec4"},vertUniforms:{mat:"mat3"},vert:["v_color = color;","vec3 tv = mat * vec3(vertex.x, vertex.y, 1.0);","gl_Position = vec4(tv.x, tv.y, vertex.z, 1.0);"],frag:"gl_FragColor = v_color;"});fn.needsCompilation();class hn extends class{constructor(){this._capacity=128,this._array=new ArrayBuffer(16*this._capacity),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=new Uint32Array(this._array),this._vertexCount=-1,this._vertexBuffer=pr.createBuffer(),this._vertexBufferCapacity=0}free(){pr.deleteBuffer(this._vertexBuffer),this._array=this._bytes=this._floats=this._ints=null}drawBatch(){}checkResize(e){if(this._vertexCount+e>this._capacity){if(console.log("expand vertex buffer"),this._capacity*=2,this._capacity>=1048575)throw Error("exceeded max batch capacity of 1048575, did you forget to call end()?");this._array=new ArrayBuffer(16*this._capacity);let e=new Uint32Array(this._array);e.set(this._ints),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=e}}addVertex(e,t,r,n){let o=4*this._vertexCount;this._floats[o]=e,this._floats[o+1]=t,this._floats[o+2]=r,this._ints[o+3]=n,this._vertexCount++}inBatch(){return this._vertexCount>=0}begin(){if(this.inBatch())throw Error("already called begin()");this._vertexCount=0}end(){if(!this.inBatch())throw Error("not yet called begin()");this._vertexCount>0&&this.drawBatch(),this._vertexCount=-1}}{drawRect(e,t,r,n,o,i,a,s){this.drawQuad(e,t,e,n,r,t,r,n,o,i,a,s)}drawQuad(e,t,r,n,o,i,a,s,c,l,d,u){if(this.checkResize(4),d){let f=e*d[0]+t*d[2]+d[4],h=e*d[1]+t*d[3]+d[5],p=r*d[0]+n*d[2]+d[4],g=r*d[1]+n*d[3]+d[5],w=o*d[0]+i*d[2]+d[4],b=o*d[1]+i*d[3]+d[5],E=a*d[0]+s*d[2]+d[4],_=a*d[1]+s*d[3]+d[5],O=u?e+u[0]:(e+r)/2,y=u?t+u[1]:(t+n)/2,m=O-d[0]*O-d[2]*y,T=y-d[1]*O-d[3]*y;this.addVertex(f+m,h+T,c,l),this.addVertex(p+m,g+T,c,l),this.addVertex(w+m,b+T,c,l),this.addVertex(E+m,_+T,c,l)}else this.addVertex(e,t,c,l),this.addVertex(r,n,c,l),this.addVertex(o,i,c,l),this.addVertex(a,s,c,l)}drawBatch(){if(this._vertexCount<0)throw Error("have not called begin()");if(this._vertexCount>0){fn.use(),pr.bindBuffer(pr.ARRAY_BUFFER,this._vertexBuffer),this._vertexCount>this._vertexBufferCapacity?(this._vertexBufferCapacity=this._capacity,pr.bufferData(pr.ARRAY_BUFFER,this._array,pr.DYNAMIC_DRAW)):pr.bufferSubData(pr.ARRAY_BUFFER,0,this._ints.subarray(0,6*this._vertexCount));let e=fn.attributes.vertex,t=fn.attributes.color;pr.vertexAttribPointer(e,3,pr.FLOAT,!1,16,0),pr.enableVertexAttribArray(e),pr.vertexAttribPointer(t,4,pr.UNSIGNED_BYTE,!0,16,12),pr.enableVertexAttribArray(t),fn.setUniformMatrix3("mat",dr());let r=1.5*this._vertexCount;Dr(r),b.quadInfo=`vertexCount=${this._vertexCount} indexCount=${r}`,pr.drawElements(pr.TRIANGLES,r,pr.UNSIGNED_SHORT,0),pr.disableVertexAttribArray(e),pr.disableVertexAttribArray(t)}this._vertexCount=-1}}let pn=null;n("sock","Quad",{"beginBatch()"(){pn||(pn=new hn),pn.inBatch()?Q("batch already started"):pn.begin()},"endBatch()"(){pn||(pn=new hn),pn.inBatch()?pn.end():Q("batch not yet started")},"draw(_,_,_,_,_)"(){for(let e=1;e<=5;e++)if(1!==M(e))return void Q("args must be Nums");let e=v(1),t=v(2),r=v(3),n=v(4),o=v(5);pn||(pn=new hn);let i=!pn.inBatch();i&&pn.begin(),pn.drawRect(e,t,e+r,t+n,0,o),i&&pn.end()},"draw(_,_,_,_,_,_,_,_,_)"(){for(let e=1;e<=9;e++)if(1!==M(e))return void Q("args must be Nums");let e=v(1),t=v(2),r=v(3),n=v(4),o=v(5),i=v(6),a=v(7),s=v(8),c=v(9);pn||(pn=new hn);let l=!pn.inBatch();l&&pn.begin(),pn.drawQuad(e,t,r,n,a,s,o,i,0,c),l&&pn.end()}});const gn="QWERTZ",wn="AZERTY";let bn="QWERTY";(navigator.language||"en-US").includes("fr")&&(bn=wn);let En=0,_n=e=>{let t=e.code,r=e.key.toLowerCase();"KeyQ"===t?(En++,"a"===r&&(bn=wn,console.log("layout is "+bn+"?"))):"KeyA"===t?(En++,"q"===r&&(bn=wn,console.log("layout is "+bn+"?"))):"KeyW"===t?(En++,"z"===r&&(bn=wn,console.log("layout is "+bn+"?"))):"KeyZ"===t?(En++,"w"===r&&(bn=wn,console.log("layout is "+bn+"?"))):"KeyY"===t?(En++,"z"===r&&(bn=gn,console.log("layout is "+bn+"?"))):"KeyZ"===t&&(En++,"y"===r&&(bn=gn,console.log("layout is "+bn+"?"))),En>=3&&removeEventListener("keydown",_n)};addEventListener("keydown",_n,{passive:!0});let On=tt("input"),yn=tt("form",{},[On]);function mn(){yn.parentNode&&(yn.remove(),ir--,0===ir&&or.remove())}On.placeholder="Text",yn.onsubmit=e=>{e.preventDefault(),mn()},On.onblur=()=>{setTimeout((()=>{document.activeElement!==On&&mn()}),1)},On.onkeydown=e=>{"Escape"===e.code&&mn()},n("sock","Input",{"localize(_)"(){let e=M(1);if(5===e)return void F(0);if(6!==e)return void Q("input ID must be a String");let t=A(1);"AZERTY"===bn?"Q"===t?t="A":"A"===t?t="Q":"Z"===t?t="W":"W"===t?t="Z":"M"===t?t=",":","===t?t=";":";"===t&&(t="M"):"QWERTZ"===bn&&("Z"===t?t="Y":"Y"===t&&(t="Z")),C(0,t)},"textBegin(_)"(){let e=M(1);if(5===e)On.type="text";else{if(6!==e)return void Q("type must be a String");{let e=A(1);if("text"!==e&&"number"!==e&&"password"!==e)return void Q(`invalid text type '${e}'`);On.type=e}}yn.className="text-form invisible",On.className="text",On.value="",yn.parentNode||(0===ir&&document.body.append(or),ir++,or).append(yn),(Qr||(On.focus(),document.activeElement!==On))&&(yn.className="text-form",yn.onclick=e=>{e.target===yn&&mn()},On.className="text")},textDescription(){C(0,On.placeholder)},"textDescription=(_)"(){6===M(1)?On.placeholder=A(1):Q("description must be String")},textIsActive(){k(0,document.activeElement===On)},textSelection(){if(document.activeElement===On){let e=On.selectionStart,t=On.selectionEnd;if("backward"===On.selectionDirection){let r=e;e=t,t=r}N(0,e,t,1,!0)}else N(0,0,0,1,!0)},textString(){C(0,On.value)}});let Tn=0,Dn=new Set,Pn=Object.create(null),Rn=0,Mn=0,Sn=0,An=0,vn=0,Un=0,jn=0;function In(){Gn(),xn()}function xn(){R(4),H(0,Tn),L(1,Rn),L(2,Mn),L(3,jn),X(ne)}function Fn(e,t){t!==Pn[e]&&(Pn[e]=t,Dn.add(e))}function kn(e,t,r){Fn(e,r<0?-r:0),Fn(t,r>0?r:0)}function Ln(e,t){Fn(Nn[e]||e,t)}const Nn=Object.assign(Object.create(null),{Backquote:"`",Minus:"-",Equal:"=",Comma:",",Period:".",Slash:"/",Semicolon:";",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\"});for(let e=0;e<=25;e++){let t=String.fromCharCode(65+e);Nn["Key"+t]=t}for(let e=0;e<=9;e++)Nn["Digit"+e]=String(e);function Cn(e,t){for(let r=0;r<e.length;r++){let n=e[r],o=n.identifier,i=(n.clientX-Kt)/rr,a=(n.clientY-Jt)/rr,s=n.force;0===s&&(s=t?1:0),R(6),H(0,Tn),L(1,o),k(2,t),L(3,s),L(4,i),L(5,a),X(oe)}}function Hn(e,t){vn=e,Un=t,Gn()}function Gn(){Sn=(vn-Kt)/rr,An=(Un-Jt)/rr,Rn=Math.floor(Sn),Mn=Math.floor(An)}function Xn(e,t){let r;0===e?r="Left":1===e?r="Middle":2===e&&(r="Right"),Fn("Mouse"+(r||e),t)}function Bn(e){return JSON.parse(e,((e,t)=>{if(Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&""===t[0][0]){let e=t[0].slice(1);if(t=t[1],"Num"===e)return"infinity"===t?1/0:"nan"===t?NaN:Number(t);if("Range"===e)return{from:t[0],to:t[1],step:t[2],isInclusive:t[3]};if("Map"===e){let e=new Map;for(let r=1;r<t.length;r+=2)e.set(t[r-1],t[r]);return e}if("Vec"===e)return{x:t[0],y:t[1]};if("Color"===e){let e=new Uint8Array(new Uint32Array([t]).buffer);return{r:e[0],g:e[1],b:e[2],a:e[3]}}if("Buffer"===e){let e=atob(t),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}}return t}))}function Qn(e){return JSON.stringify(Yn(e))}function Yn(e){if(null==e)return null;if("number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>Yn(e)));if(Object.getPrototypeOf(e)===Object.prototype){let t={};for(let r in e)t[r]=Yn(e[r]);return t}if(e instanceof Uint8Array||e instanceof Uint8ClampedArray){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return["Array",btoa(t)]}return null}function Wn(e){let t=M(e);return 5===t?[]:6===t?Bn(A(e)):(Q("expected string or null for JS args"),!1)}addEventListener("keydown",(e=>{e.repeat||Ln(e.code,1)}),{passive:!0}),addEventListener("keyup",(e=>{Ln(e.code,0)}),{passive:!0}),addEventListener("mousemove",(e=>{Hn(e.x,e.y)})),addEventListener("wheel",(e=>{e.preventDefault(),e.stopPropagation(),jn+=e.deltaY,kn("MouseWheelUp","MouseWheelDown",Math.sign(e.deltaY))}),{passive:!1}),addEventListener("mousedown",(e=>{Xn(e.button,1)})),addEventListener("mouseup",(e=>{Xn(e.button,0)})),w.addEventListener("contextmenu",(e=>{e.preventDefault()})),w.addEventListener("touchstart",(e=>{if(e.preventDefault(),Cn(e.changedTouches,!0),e.changedTouches.length===e.touches.length){let t=e.changedTouches[0];Fn("MouseLeft",1),Hn(t.clientX,t.clientY)}}),{passive:!1}),w.addEventListener("touchmove",(e=>{e.preventDefault(),Cn(e.changedTouches,!0);let t=e.changedTouches[0];Hn(t.clientX,t.clientY)}),{passive:!1}),w.addEventListener("touchend",(e=>{e.preventDefault(),Cn(e.changedTouches,!1),0===e.touches.length&&Fn("MouseLeft",0)}),{passive:!1}),addEventListener("gamepadconnected",(e=>{console.info("Gamepad: "+e.gamepad.id)})),n("sock","JavaScript",{"eval_(_,_,_,_)"(){if(6!==M(4))return void Q("script must be a string");let e=A(4),t=Wn(2);if(!t)return;let r=Wn(3);if(!r)return;if(!(n=r,Array.isArray(n)&&n.every((e=>"string"==typeof e))&&Array.isArray(t)))return void Q("arg values and names must be Lists, arg names must be a String List");var n;if(r.length!==t.length)return void Q("arg names and values must have same length");let o;if(5===M(1))o=null;else{if(H(2,ct),!j(1,2))return void Q("first arg must be null or Promise");o=I(1)}let i,a=null==o,s=r.concat(e);try{i=(a?new Function(...s):new Zn(...s)).apply(null,t)}catch(e){return void Q("JavaScript error: "+e)}a?C(0,Qn(i)):(lt(o,i.then((e=>Qn(e)))),H(0,o))}});let Zn=Object.getPrototypeOf((async function(){})).constructor;function Vn(e){return"sock"===e&&(e="sock_web"),"/"===e[0]&&(e="assets"+e),e+".wren"}n("sock","Platform",{os(){C(0,Hr)},browser(){C(0,Gr)}});let zn=!1,$n="_terminal";function qn(e){zn||(zn=!0,D($n,"var r__"));let t=!1;if((e=e.trim()).includes("\n"))t=!Kn(e);else if(e.startsWith("var ")){let t=/var\s+([_a-zA-Z][_a-zA-Z0-9]*)/.exec(e);if(t){let r=t[1];if(P($n,r)){if(!e.includes("="))return;e=e.slice(4)}return 0===D($n,e)?Jn(r):void 0}}else if(!Kn(e)){t=!0;let r=/^([_a-zA-Z][_a-zA-Z0-9]*)\s*=/.exec(e)||/^([_a-zA-Z][_a-zA-Z0-9]*)$/.exec(e);if(r){let e=r[1];P($n,e)||e[0]===e[0].toLowerCase()&&D($n,"var "+e)}}if(t){let t=D($n,`r__=JSON.toString(${e})`);if(0===t)return Jn("r__",!0);if(2===t)return"[error]"}return 0===D($n,e)?"[success]":"[error]"}function Kn(e){return e.startsWith("var ")||e.startsWith("if ")||e.startsWith("if(")||e.startsWith("for ")||e.startsWith("for(")||e.startsWith("while ")||e.startsWith("while(")||e.startsWith("import ")||e.startsWith("class ")||e.startsWith("#!")||e.startsWith("#?")}function Jn(e,t=!1){if(R(1),x($n,e,0),0===X(re)){let e=A(0);return t?Bn(e):e}return"[error]"}let eo,to=null,ro=null,no=0,oo=0,io=0,ao=0,so=!1,co=document.getElementById("loading-bar-progress"),lo=[];function uo(e=1,t=0){let r=[t,e];return lo.push(r),r}function fo(e,t){e[0]=t;let r=0,n=0;for(let e of lo)r+=e[1],n+=e[0]*e[1];let o=n/r;co.style.clipPath=`inset(-1px ${(100*(1-o)).toFixed(1)}% -1px -1px)`,co.hidden=!1}var ho;async function po(){let e,t=uo(.75),r=uo(.05),n=uo(.15),o=l("sock_web.wren","arraybuffer"),i=async function(e,t){return!await st(e,t)}("assets.zip",(t=>{e||(e=uo()),fo(e,t)}));eo||i.then((()=>{eo=at("main.wren",(e=>{fo(n,e)}))})),await T(),fo(t,1);let a=async function(){let e=p.ccall("sock_font","number"),t=URL.createObjectURL(new Blob([m().subarray(e,e+750)],{type:"image/gif"}));try{let e=await d(t);Vr=new vr(pr.NEAREST,pr.CLAMP_TO_EDGE),Vr.load(e)}finally{URL.revokeObjectURL(t)}}();ie("call()"),ie("transfer(_)"),ie("path"),ie("init_()"),K=ie("init_(_,_)"),ie("load_()"),ie("load_(_)"),ie("loaded_(_,_,_)"),J=ie("update_()"),ie("update_(_)"),ee=ie("update_(_,_)"),ie("update_(_,_,_)"),te=ie("resolve_(_,_)"),re=ie("toString"),ne=ie("updateMouse_(_,_,_)"),oe=ie("updateTouch_(_,_,_,_,_)"),cr(),w.hidden=!1,await a,fo(r,1);let s=D("sock",await o);if(0!==s)return void Eo();var c;c="sock",p.ccall("wrenAddImplicitImportModule",null,["number","string"],[g,c]),R(1),x("sock","Time",0),ae=I(0),R(1),x("sock","Promise",0),ct=I(0),R(1),x("sock","Asset",0),I(0),dn(),R(1),x("sock","Input",0),Tn=I(0),In(),R(1),x("sock","Sprite",0),xr=I(0),gt=b.audio??new AudioContext,"suspended"===gt.state&&console.warn("AudioContext is suspended"),wt=new GainNode(gt,{gain:.5}),wt.connect(gt.destination),R(1),x("sock","Audio",0),_t=I(0),x("sock","Voice",0),yt=I(0),x("sock","AudioBus",0),Ot=I(0),$r.updateResolution(),Rr.compileAll(),await i;let u=await eo;document.getElementById("setup").remove(),s=D("/main",u),0===s?await function(e,t,r){let n=0;return new Promise((o=>{let i=setInterval((()=>{n+=e,r()&&(clearInterval(i),o(!0)),n>=t&&(clearInterval(i),o(!1))}),e)}))}(100,6e4,(()=>en||W))?W?Eo():requestAnimationFrame(go):Eo("took to long for Game.begin() to be called..."):Eo()}function go(){let e=performance.now()/1e3;null==ro&&(ro=e),e-=ro;let t=null==to?0:Math.min(4/60,e-to);var r;if(to=e,io+=t,oo++,60===oo&&(r=Math.round(oo/io),un=r,oo=io=0),en&&!an&&(Kr?ao-=t:ao=0,!Kr||ao<=0)){if(Kr&&(ao+=1/Kr),function(e,t){R(3),H(0,ae),L(1,e),L(2,t),X(ee)}(e,e-no),no=e,function(){if(navigator.getGamepads)for(let e of navigator.getGamepads())if(null!=e){let t=e.buttons,r=e.axes;Fn("FaceDown",t[0].value),Fn("FaceRight",t[1].value),Fn("FaceLeft",t[2].value),Fn("FaceUp",t[3].value),Fn("LeftBumper",t[4].value),Fn("RightBumper",t[5].value),Fn("LeftTrigger",t[6].value),Fn("RightTrigger",t[7].value),Fn("Select",t[8].value),Fn("Start",t[9].value),Fn("LeftStick",t[10].value),Fn("RightStick",t[11].value),Fn("DPadUp",t[12].value),Fn("DPadDown",t[13].value),Fn("DPadLeft",t[14].value),Fn("DPadRight",t[15].value),Fn("Guide",t[16].value),kn("LeftStickLeft","LeftStickRight",r[0]),kn("LeftStickUp","LeftStickDown",r[1]),kn("RightStickLeft","RightStickRight",r[2]),kn("RightStickUp","RightStickDown",r[3])}xn();for(let e of Dn)R(3),H(0,Tn),C(1,e),L(2,Pn[e]),X(ee);Dn.clear(),jn=0}(),function(){if(ar)return ar=!1,cr(),!0}()&&(In(),$r.updateResolution()),$r.bind(),0!==(en=!1,R(1),H(0,ln),X(J))&&(so=!0),!en&&!so&&!Jr)return console.info("[SOCK] awaiting update completion"),void new Promise((e=>{tn=e})).then((()=>{wo(),bo()}));wo()}bo()}function wo(){$r.draw()}function bo(){so||Jr?(w.classList.add("quit"),Eo()):requestAnimationFrame(go)}function Eo(e){gt&&(gt.close(),gt=null,wt=null),e?function(e){console.error(e),document.body.append(tt("div",{class:"error"},[tt("pre",{class:"message"},e)]))}(e):W&&function(){if(0===Y.length)return void document.body.append(tt("div",{class:"error"},[tt("pre",{class:"message"},V),tt("pre",{style:"padding:.6em"},"[no stack trace]")]));let e=tt("pre",{class:"message"},tt("div",{},Z));for(let d=0;d<Y.length;d++){let[u,f,h]=Y[d],p="/"===u[0]?u.slice(1):u,g=tt("div",{},[h?`  ${h} at `:"  at ",tt("a",{href:Vn(u),onclick:w},p+":"+f)]);function w(e){e.preventDefault(),l(d)}e.append(g)}let t,r,n,o,i,a,s,c=tt("div",{class:"error"},e);async function l(e){let[l,d]=Y[e];if(t!==l){r&&r.remove(),n&&n.remove();let e=Vn(l),a=await(await fetch(e)).text();t=l;let s=a.split(/\r\n|\n/);if("sock"===l){let e=0;s=s.map((t=>{"}"===t[0]&&e--;let r="\t".repeat(e)+t;return"}"!==t[0]&&t.endsWith("}")&&e--,t.includes("{")&&e++,r}))}o=[],i=[];for(let e=0;e<s.length;e++)o.push(tt("div",{},1+e)),i.push(tt("div",{},s[e]||""));c.append(n=tt("div",{class:"code-name"},l+".wren"),r=tt("div",{class:"code"},[tt("pre",{class:"code-lines"},o),tt("pre",{class:"code-source"},i)]))}a&&(a.className=s.className=""),a=i[d-1],s=o[d-1],a&&(a.className=s.className="code-target",s.scrollIntoView({block:"center"}))}document.body.append(c),l(0)}()}E&&(ho="script",eo=new Promise((e=>{e.type=ho,_.push(e)})),eo.then((()=>{po()})),O("ready")),self.wren=function(...e){let t=e[0];if("string"==typeof t)return qn(t);if(t.raw&&t.map){let e=t.raw,r="";for(let n=0;n<e.length;n++)n>0&&(r+=t[n]),r+=e[n];return qn(r)}throw console.error(t),TypeError("call like this: wren`script`")},b.quit=()=>{so=!0},b.play?(uo(.2,1),po()):b.play=()=>{b.play=null,po()}}();
//# sourceMappingURL=sock.js.map
