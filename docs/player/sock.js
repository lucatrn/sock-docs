!function(){"use strict";let e=Document.prototype,t=Element.prototype;function n(e,t,n,r,o){s[i(e||"sock",t,n,r)]=o}function r(e,t,r){for(let o in r)n(e,t,!0,o,r[o])}function o(e,t,o,i,s){c[a(e,t)]=o,i&&function(e,t,r){for(let o in r)n(e,t,!1,o,r[o])}(e,t,i),s&&r(e,t,s)}function i(e,t,n,r){return`${e}:${t}:${n}:${r}`}function a(e,t){return`${e}:${t}`}t.requestFullscreen||t.webkitRequestFullscreen&&(Object.defineProperty(e,"fullscreenElement",{get(){return this.webkitFullscreenElement}}),Object.defineProperty(e,"fullscreenEnabled",{get(){return this.webkitFullscreenEnabled}}),e.exitFullscreen=function(){return this.webkitExitFullscreen(),Promise.resolve()},t.requestFullscreen=function(){return new Promise(((e,t)=>{let n=()=>{o(),e()},r=()=>{o(),t(new TypeError("failed to get fullscreen"))},o=()=>{this.removeEventListener("webkitfullscreenchange",n),this.removeEventListener("webkitfullscreenerror",r)};this.addEventListener("webkitfullscreenchange",n),this.addEventListener("webkitfullscreenerror",r),this.webkitRequestFullscreen()}))});let s={},c={};function l(e,t,n){return new Promise(((r,o)=>{let i=new XMLHttpRequest;i.responseType=t,i.open("GET",e),n&&(i.onprogress=e=>{e.lengthComputable&&n(e.loaded/e.total)}),i.onerror=()=>{o("Could not connect to server")},i.onload=()=>{200===i.status?r(i.response):o(i.status+": "+i.statusText+": "+e)},i.send()}))}function d(e){return new Promise((t=>{let n=new Image;n.onload=()=>{t(n)},n.onerror=()=>{t(null)},n.src=e}))}var u,f=(u=document.currentScript&&document.currentScript.src||new URL("sock.js",document.baseURI).href,function(e){var t,n;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,r){t=e,n=r})),Object.getOwnPropertyDescriptor(e.ready,"_malloc")||(Object.defineProperty(e.ready,"_malloc",{configurable:!0,get:function(){L("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_malloc",{configurable:!0,set:function(){L("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_realloc")||(Object.defineProperty(e.ready,"_realloc",{configurable:!0,get:function(){L("You are getting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_realloc",{configurable:!0,set:function(){L("You are setting _realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_free")||(Object.defineProperty(e.ready,"_free",{configurable:!0,get:function(){L("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_free",{configurable:!0,set:function(){L("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_init")||(Object.defineProperty(e.ready,"_sock_init",{configurable:!0,get:function(){L("You are getting _sock_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_init",{configurable:!0,set:function(){L("You are setting _sock_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_font")||(Object.defineProperty(e.ready,"_sock_font",{configurable:!0,get:function(){L("You are getting _sock_font on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_font",{configurable:!0,set:function(){L("You are setting _sock_font on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sock_new_buffer")||(Object.defineProperty(e.ready,"_sock_new_buffer",{configurable:!0,get:function(){L("You are getting _sock_new_buffer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sock_new_buffer",{configurable:!0,set:function(){L("You are setting _sock_new_buffer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetVersionNumber")||(Object.defineProperty(e.ready,"_wrenGetVersionNumber",{configurable:!0,get:function(){L("You are getting _wrenGetVersionNumber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetVersionNumber",{configurable:!0,set:function(){L("You are setting _wrenGetVersionNumber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInitConfiguration")||(Object.defineProperty(e.ready,"_wrenInitConfiguration",{configurable:!0,get:function(){L("You are getting _wrenInitConfiguration on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInitConfiguration",{configurable:!0,set:function(){L("You are setting _wrenInitConfiguration on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenNewVM")||(Object.defineProperty(e.ready,"_wrenNewVM",{configurable:!0,get:function(){L("You are getting _wrenNewVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenNewVM",{configurable:!0,set:function(){L("You are setting _wrenNewVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenFreeVM")||(Object.defineProperty(e.ready,"_wrenFreeVM",{configurable:!0,get:function(){L("You are getting _wrenFreeVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenFreeVM",{configurable:!0,set:function(){L("You are setting _wrenFreeVM on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenCollectGarbage")||(Object.defineProperty(e.ready,"_wrenCollectGarbage",{configurable:!0,get:function(){L("You are getting _wrenCollectGarbage on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenCollectGarbage",{configurable:!0,set:function(){L("You are setting _wrenCollectGarbage on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInterpret")||(Object.defineProperty(e.ready,"_wrenInterpret",{configurable:!0,get:function(){L("You are getting _wrenInterpret on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInterpret",{configurable:!0,set:function(){L("You are setting _wrenInterpret on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenMakeCallHandle")||(Object.defineProperty(e.ready,"_wrenMakeCallHandle",{configurable:!0,get:function(){L("You are getting _wrenMakeCallHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenMakeCallHandle",{configurable:!0,set:function(){L("You are setting _wrenMakeCallHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenCall")||(Object.defineProperty(e.ready,"_wrenCall",{configurable:!0,get:function(){L("You are getting _wrenCall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenCall",{configurable:!0,set:function(){L("You are setting _wrenCall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenReleaseHandle")||(Object.defineProperty(e.ready,"_wrenReleaseHandle",{configurable:!0,get:function(){L("You are getting _wrenReleaseHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenReleaseHandle",{configurable:!0,set:function(){L("You are setting _wrenReleaseHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotCount")||(Object.defineProperty(e.ready,"_wrenGetSlotCount",{configurable:!0,get:function(){L("You are getting _wrenGetSlotCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotCount",{configurable:!0,set:function(){L("You are setting _wrenGetSlotCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenEnsureSlots")||(Object.defineProperty(e.ready,"_wrenEnsureSlots",{configurable:!0,get:function(){L("You are getting _wrenEnsureSlots on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenEnsureSlots",{configurable:!0,set:function(){L("You are setting _wrenEnsureSlots on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotType")||(Object.defineProperty(e.ready,"_wrenGetSlotType",{configurable:!0,get:function(){L("You are getting _wrenGetSlotType on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotType",{configurable:!0,set:function(){L("You are setting _wrenGetSlotType on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotBool")||(Object.defineProperty(e.ready,"_wrenGetSlotBool",{configurable:!0,get:function(){L("You are getting _wrenGetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotBool",{configurable:!0,set:function(){L("You are setting _wrenGetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotBytes")||(Object.defineProperty(e.ready,"_wrenGetSlotBytes",{configurable:!0,get:function(){L("You are getting _wrenGetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotBytes",{configurable:!0,set:function(){L("You are setting _wrenGetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotDouble")||(Object.defineProperty(e.ready,"_wrenGetSlotDouble",{configurable:!0,get:function(){L("You are getting _wrenGetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotDouble",{configurable:!0,set:function(){L("You are setting _wrenGetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotForeign")||(Object.defineProperty(e.ready,"_wrenGetSlotForeign",{configurable:!0,get:function(){L("You are getting _wrenGetSlotForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotForeign",{configurable:!0,set:function(){L("You are setting _wrenGetSlotForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotIsInstanceOf")||(Object.defineProperty(e.ready,"_wrenGetSlotIsInstanceOf",{configurable:!0,get:function(){L("You are getting _wrenGetSlotIsInstanceOf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotIsInstanceOf",{configurable:!0,set:function(){L("You are setting _wrenGetSlotIsInstanceOf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotString")||(Object.defineProperty(e.ready,"_wrenGetSlotString",{configurable:!0,get:function(){L("You are getting _wrenGetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotString",{configurable:!0,set:function(){L("You are setting _wrenGetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetSlotHandle")||(Object.defineProperty(e.ready,"_wrenGetSlotHandle",{configurable:!0,get:function(){L("You are getting _wrenGetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetSlotHandle",{configurable:!0,set:function(){L("You are setting _wrenGetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotBool")||(Object.defineProperty(e.ready,"_wrenSetSlotBool",{configurable:!0,get:function(){L("You are getting _wrenSetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotBool",{configurable:!0,set:function(){L("You are setting _wrenSetSlotBool on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotBytes")||(Object.defineProperty(e.ready,"_wrenSetSlotBytes",{configurable:!0,get:function(){L("You are getting _wrenSetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotBytes",{configurable:!0,set:function(){L("You are setting _wrenSetSlotBytes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotDouble")||(Object.defineProperty(e.ready,"_wrenSetSlotDouble",{configurable:!0,get:function(){L("You are getting _wrenSetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotDouble",{configurable:!0,set:function(){L("You are setting _wrenSetSlotDouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotRange")||(Object.defineProperty(e.ready,"_wrenSetSlotRange",{configurable:!0,get:function(){L("You are getting _wrenSetSlotRange on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotRange",{configurable:!0,set:function(){L("You are setting _wrenSetSlotRange on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewForeign")||(Object.defineProperty(e.ready,"_wrenSetSlotNewForeign",{configurable:!0,get:function(){L("You are getting _wrenSetSlotNewForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewForeign",{configurable:!0,set:function(){L("You are setting _wrenSetSlotNewForeign on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewList")||(Object.defineProperty(e.ready,"_wrenSetSlotNewList",{configurable:!0,get:function(){L("You are getting _wrenSetSlotNewList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewList",{configurable:!0,set:function(){L("You are setting _wrenSetSlotNewList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNewMap")||(Object.defineProperty(e.ready,"_wrenSetSlotNewMap",{configurable:!0,get:function(){L("You are getting _wrenSetSlotNewMap on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNewMap",{configurable:!0,set:function(){L("You are setting _wrenSetSlotNewMap on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotNull")||(Object.defineProperty(e.ready,"_wrenSetSlotNull",{configurable:!0,get:function(){L("You are getting _wrenSetSlotNull on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotNull",{configurable:!0,set:function(){L("You are setting _wrenSetSlotNull on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotString")||(Object.defineProperty(e.ready,"_wrenSetSlotString",{configurable:!0,get:function(){L("You are getting _wrenSetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotString",{configurable:!0,set:function(){L("You are setting _wrenSetSlotString on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetSlotHandle")||(Object.defineProperty(e.ready,"_wrenSetSlotHandle",{configurable:!0,get:function(){L("You are getting _wrenSetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetSlotHandle",{configurable:!0,set:function(){L("You are setting _wrenSetSlotHandle on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetListCount")||(Object.defineProperty(e.ready,"_wrenGetListCount",{configurable:!0,get:function(){L("You are getting _wrenGetListCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetListCount",{configurable:!0,set:function(){L("You are setting _wrenGetListCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetListElement")||(Object.defineProperty(e.ready,"_wrenGetListElement",{configurable:!0,get:function(){L("You are getting _wrenGetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetListElement",{configurable:!0,set:function(){L("You are setting _wrenGetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetListElement")||(Object.defineProperty(e.ready,"_wrenSetListElement",{configurable:!0,get:function(){L("You are getting _wrenSetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetListElement",{configurable:!0,set:function(){L("You are setting _wrenSetListElement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenInsertInList")||(Object.defineProperty(e.ready,"_wrenInsertInList",{configurable:!0,get:function(){L("You are getting _wrenInsertInList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenInsertInList",{configurable:!0,set:function(){L("You are setting _wrenInsertInList on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapCount")||(Object.defineProperty(e.ready,"_wrenGetMapCount",{configurable:!0,get:function(){L("You are getting _wrenGetMapCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapCount",{configurable:!0,set:function(){L("You are setting _wrenGetMapCount on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapContainsKey")||(Object.defineProperty(e.ready,"_wrenGetMapContainsKey",{configurable:!0,get:function(){L("You are getting _wrenGetMapContainsKey on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapContainsKey",{configurable:!0,set:function(){L("You are setting _wrenGetMapContainsKey on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetMapValue")||(Object.defineProperty(e.ready,"_wrenGetMapValue",{configurable:!0,get:function(){L("You are getting _wrenGetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetMapValue",{configurable:!0,set:function(){L("You are setting _wrenGetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetMapValue")||(Object.defineProperty(e.ready,"_wrenSetMapValue",{configurable:!0,get:function(){L("You are getting _wrenSetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetMapValue",{configurable:!0,set:function(){L("You are setting _wrenSetMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenRemoveMapValue")||(Object.defineProperty(e.ready,"_wrenRemoveMapValue",{configurable:!0,get:function(){L("You are getting _wrenRemoveMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenRemoveMapValue",{configurable:!0,set:function(){L("You are setting _wrenRemoveMapValue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetVariable")||(Object.defineProperty(e.ready,"_wrenGetVariable",{configurable:!0,get:function(){L("You are getting _wrenGetVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetVariable",{configurable:!0,set:function(){L("You are setting _wrenGetVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenHasVariable")||(Object.defineProperty(e.ready,"_wrenHasVariable",{configurable:!0,get:function(){L("You are getting _wrenHasVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenHasVariable",{configurable:!0,set:function(){L("You are setting _wrenHasVariable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenHasModule")||(Object.defineProperty(e.ready,"_wrenHasModule",{configurable:!0,get:function(){L("You are getting _wrenHasModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenHasModule",{configurable:!0,set:function(){L("You are setting _wrenHasModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenAbortFiber")||(Object.defineProperty(e.ready,"_wrenAbortFiber",{configurable:!0,get:function(){L("You are getting _wrenAbortFiber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenAbortFiber",{configurable:!0,set:function(){L("You are setting _wrenAbortFiber on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenGetUserData")||(Object.defineProperty(e.ready,"_wrenGetUserData",{configurable:!0,get:function(){L("You are getting _wrenGetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenGetUserData",{configurable:!0,set:function(){L("You are setting _wrenGetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenSetUserData")||(Object.defineProperty(e.ready,"_wrenSetUserData",{configurable:!0,get:function(){L("You are getting _wrenSetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenSetUserData",{configurable:!0,set:function(){L("You are setting _wrenSetUserData on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_wrenAddImplicitImportModule")||(Object.defineProperty(e.ready,"_wrenAddImplicitImportModule",{configurable:!0,get:function(){L("You are getting _wrenAddImplicitImportModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_wrenAddImplicitImportModule",{configurable:!0,set:function(){L("You are setting _wrenAddImplicitImportModule on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_end")||(Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){L("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){L("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_free")||(Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){L("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){L("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_init")||(Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,get:function(){L("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,set:function(){L("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackSave")||(Object.defineProperty(e.ready,"_stackSave",{configurable:!0,get:function(){L("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackSave",{configurable:!0,set:function(){L("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackRestore")||(Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,get:function(){L("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,set:function(){L("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackAlloc")||(Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,get:function(){L("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,set:function(){L("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___wasm_call_ctors")||(Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,get:function(){L("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,set:function(){L("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___errno_location")||(Object.defineProperty(e.ready,"___errno_location",{configurable:!0,get:function(){L("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___errno_location",{configurable:!0,set:function(){L("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"onRuntimeInitialized")||(Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,get:function(){L("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,set:function(){L("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);var i=[];if(e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var a="";if("undefined"!=typeof document&&document.currentScript&&(a=document.currentScript.src),u&&(a=u),a=0!==a.indexOf("blob:")?a.substr(0,a.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var s=console.log.bind(console),c=console.warn.bind(console);for(r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);function l(e){l.shown||(l.shown={}),l.shown[e]||(l.shown[e]=1,c(e))}o=null,Object.getOwnPropertyDescriptor(e,"arguments")||Object.defineProperty(e,"arguments",{configurable:!0,get:function(){L("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"thisProgram")||Object.defineProperty(e,"thisProgram",{configurable:!0,get:function(){L("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"quit")||Object.defineProperty(e,"quit",{configurable:!0,get:function(){L("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(void 0===e.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),g(void 0===e.read,"Module.read option was removed (modify read_ in JS)"),g(void 0===e.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),g(void 0===e.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),g(void 0===e.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),g(void 0===e.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(e,"read")||Object.defineProperty(e,"read",{configurable:!0,get:function(){L("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readAsync")||Object.defineProperty(e,"readAsync",{configurable:!0,get:function(){L("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readBinary")||Object.defineProperty(e,"readBinary",{configurable:!0,get:function(){L("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"setWindowTitle")||Object.defineProperty(e,"setWindowTitle",{configurable:!0,get:function(){L("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-s ENVIRONMENT` to enable."),g(!0,"node environment detected but not enabled at build time.  Add 'node' to `-s ENVIRONMENT` to enable."),g(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");var d,f,h=[];Object.getOwnPropertyDescriptor(e,"wasmBinary")||Object.defineProperty(e,"wasmBinary",{configurable:!0,get:function(){L("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"noExitRuntime")||Object.defineProperty(e,"noExitRuntime",{configurable:!0,get:function(){L("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),"object"!=typeof WebAssembly&&L("no native wasm support detected");var p=!1;function g(e,t){e||L("Assertion failed: "+t)}var E,_,b,w,O,y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&y)return y.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|c:(240!=(248&a)&&l("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|c<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var d=a-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function m(e,t){return e?T(b,e,t):""}function D(e,t,n){return g("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),function(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>1114111&&l("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}(e,b,t,n)}function P(t){E=t,e.HEAP8=_=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=w=new Int32Array(t),e.HEAPU8=b=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=O=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var R,M=5242880;function S(){var e=re();g(0==(3&e)),w[e+4>>2]=34821223,w[e+8>>2]=2310721022,w[0]=1668509029}function A(){if(!p){var e=re(),t=O[e+4>>2],n=O[e+8>>2];34821223==t&&2310721022==n||L("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" 0x"+t.toString(16)),1668509029!==w[0]&&L("Runtime error: The application has corrupted its heap memory area (address zero)!")}}e.TOTAL_STACK&&g(M===e.TOTAL_STACK,"the stack size can no longer be determined at runtime"),Object.getOwnPropertyDescriptor(e,"INITIAL_MEMORY")||Object.defineProperty(e,"INITIAL_MEMORY",{configurable:!0,get:function(){L("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),g(!0,"INITIAL_MEMORY should be larger than TOTAL_STACK, was 16777216! (TOTAL_STACK=5242880)"),g("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),g(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),g(!0,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically"),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"}();var v=[],U=[],j=[],I=!1;g(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),g(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var F=0,x=null,k=null,N={};function L(e){c(e="Aborted("+e+")"),p=!0;var t=new WebAssembly.RuntimeError(e);throw n(t),t}e.preloadedImages={},e.preloadedAudios={};var C,H={error:function(){L("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){H.error()},createDataFile:function(){H.error()},createPreloadedFile:function(){H.error()},createLazyFile:function(){H.error()},open:function(){H.error()},mkdev:function(){H.error()},registerDevice:function(){H.error()},analyzePath:function(){H.error()},loadFilesFromDB:function(){H.error()},ErrnoError:function(){H.error()}};function G(e){return e.startsWith("data:application/octet-stream;base64,")}function X(t,n){return function(){var r=t,o=n;return n||(o=e.asm),g(I,"native function `"+r+"` called before runtime initialization"),g(!0,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),o[t]||g(o[t],"exported native function `"+r+"` not found"),o[t].apply(null,arguments)}}function Q(e){try{throw"both async and sync fetching of the wasm failed"}catch(e){L(e)}}function B(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?W(r)():W(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(e)}}e.FS_createDataFile=H.createDataFile,e.FS_createPreloadedFile=H.createPreloadedFile,e.locateFile?G(C="sock_c.wasm")||(C=a+C):C=new URL("sock_c.wasm",document.currentScript&&document.currentScript.src||new URL("sock.js",document.baseURI).href).toString();var Y=[];function W(e){var t=Y[e];return t||(e>=Y.length&&(Y.length=e+1),Y[e]=t=R.get(e)),g(R.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t}function Z(e,t){R.set(e,t),Y[e]=t}function V(e){try{return f.grow(e-E.byteLength+65535>>>16),P(f.buffer),1}catch(t){c("emscripten_realloc_buffer: Attempted to grow heap from "+E.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}var z={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=z.buffers[e];g(n),0===t||10===t?((1===e?s:c)(T(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return g(null!=z.varargs),z.varargs+=4,w[z.varargs-4>>2]},getStr:function(e){return m(e)},get64:function(e,t){return g(e>=0?0===t:-1===t),e}},q={abort:function(){L("native code called abort()")},clock:function e(){return void 0===e.start&&(e.start=Date.now()),1e3*(Date.now()-e.start)|0},emscripten_memcpy_big:function(e,t,n){b.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=b.length;g((e>>>=0)>t);var n,r,o=2147483648;if(e>o)return c("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,e+100663296);var s=Math.min(o,((n=Math.max(e,a))%(r=65536)>0&&(n+=r-n%r),n));if(V(s))return!0}return c("Failed to grow the heap from "+t+" bytes to "+s+" bytes, not enough memory!"),!1},fd_close:function(e){return L("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0},fd_seek:function(e,t,n,r,o){L("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM")},fd_write:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=w[t>>2],s=w[t+4>>2];t+=8;for(var c=0;c<s;c++)z.printChar(e,b[a+c]);o+=s}return w[r>>2]=o,0},js_bindClass:function(t,n,r,o){let i=e.sock.bindClass(m(n),m(r));if(i){let t=i[0],n=i[1];if(t){let r=new Uint32Array(e.HEAP8.buffer,o);r[0]=e.addFunction(t,"vi"),n&&(r[1]=e.addFunction(n,"vi"))}}},js_bindMethod:function(t,n,r,o,i){let a=e.sock.bindMethod(m(n),m(r),!!o,m(i));return a?e.addFunction(a,"vi"):0},js_error:function(t,n,r,o,i){e.sock.error(n,m(r),o,m(i))},js_loadModule:function(t,n){return function(e){if(!e)return 0;if("string"==typeof e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1;return D(e,r=K(t),t),r}e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n=0===e[e.length-1],r=(t=n?e.length:e.length+1,K(t));return b.set(e,r),n||(b[ptr+t-1]=0),r}(e.sock.loadModule(m(n)))},js_write:function(t,n){e.sock.write(m(n))},setTempRet0:function(e){},time:function(e){var t=Date.now()/1e3|0;return e&&(w[e>>2]=t),t}};!function(){var t,r={env:q,wasi_snapshot_preview1:q};function o(t,n){var r,o=t.exports;e.asm=o,g(f=e.asm.memory,"memory not found in wasm exports"),P(f.buffer),g(R=e.asm.__indirect_function_table,"table not found in wasm exports"),r=e.asm.__wasm_call_ctors,U.unshift(r),function(e){if(F--,e?(g(N[e]),delete N[e]):c("warning: run dependency removed without ID"),0==F&&(null!==x&&(clearInterval(x),x=null),k)){var t=k;k=null,t()}}("wasm-instantiate")}F++,(t="wasm-instantiate")?(g(!N[t]),N[t]=1,null===x&&"undefined"!=typeof setInterval&&(x=setInterval((function(){if(p)return clearInterval(x),void(x=null);var e=!1;for(var t in N)e||(e=!0,c("still waiting on run dependencies:")),c("dependency: "+t);e&&c("(end of list)")}),1e4))):c("warning: run dependency added without ID");var i=e;function a(t){g(e===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,o(t.instance)}function s(e){return("function"==typeof fetch?fetch(C,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+C+"'";return e.arrayBuffer()})).catch((function(){return Q()})):Promise.resolve().then((function(){return Q()}))).then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(e,(function(e){c("failed to asynchronously prepare wasm: "+e),C.startsWith("file://")&&c("warning: Loading from a file URI ("+C+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),L(e)}))}if(e.instantiateWasm)try{return e.instantiateWasm(r,o)}catch(e){return c("Module.instantiateWasm callback failed with error: "+e),!1}("function"!=typeof WebAssembly.instantiateStreaming||G(C)||"function"!=typeof fetch?s(a):fetch(C,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(a,(function(e){return c("wasm streaming compile failed: "+e),c("falling back to ArrayBuffer instantiation"),s(a)}))}))).catch(n)}(),e.___wasm_call_ctors=X("__wasm_call_ctors"),e._wrenInterpret=X("wrenInterpret"),e.___errno_location=X("__errno_location"),e._wrenCollectGarbage=X("wrenCollectGarbage"),e._wrenGetVersionNumber=X("wrenGetVersionNumber"),e._wrenInitConfiguration=X("wrenInitConfiguration"),e._free=X("free"),e._realloc=X("realloc"),e._wrenNewVM=X("wrenNewVM"),e._wrenFreeVM=X("wrenFreeVM"),e._wrenMakeCallHandle=X("wrenMakeCallHandle"),e._wrenCall=X("wrenCall"),e._wrenReleaseHandle=X("wrenReleaseHandle"),e._wrenGetSlotCount=X("wrenGetSlotCount"),e._wrenEnsureSlots=X("wrenEnsureSlots"),e._wrenGetSlotType=X("wrenGetSlotType"),e._wrenGetSlotBool=X("wrenGetSlotBool"),e._wrenGetSlotBytes=X("wrenGetSlotBytes"),e._wrenGetSlotDouble=X("wrenGetSlotDouble"),e._wrenGetSlotForeign=X("wrenGetSlotForeign"),e._wrenGetSlotIsInstanceOf=X("wrenGetSlotIsInstanceOf"),e._wrenGetSlotString=X("wrenGetSlotString"),e._wrenGetSlotHandle=X("wrenGetSlotHandle"),e._wrenSetSlotBool=X("wrenSetSlotBool"),e._wrenSetSlotBytes=X("wrenSetSlotBytes"),e._wrenSetSlotDouble=X("wrenSetSlotDouble"),e._wrenSetSlotRange=X("wrenSetSlotRange"),e._wrenSetSlotNewForeign=X("wrenSetSlotNewForeign"),e._wrenSetSlotNewList=X("wrenSetSlotNewList"),e._wrenSetSlotNewMap=X("wrenSetSlotNewMap"),e._wrenSetSlotNull=X("wrenSetSlotNull"),e._wrenSetSlotString=X("wrenSetSlotString"),e._wrenSetSlotHandle=X("wrenSetSlotHandle"),e._wrenGetListCount=X("wrenGetListCount"),e._wrenGetListElement=X("wrenGetListElement"),e._wrenSetListElement=X("wrenSetListElement"),e._wrenInsertInList=X("wrenInsertInList"),e._wrenGetMapCount=X("wrenGetMapCount"),e._wrenGetMapContainsKey=X("wrenGetMapContainsKey"),e._wrenGetMapValue=X("wrenGetMapValue"),e._wrenSetMapValue=X("wrenSetMapValue"),e._wrenRemoveMapValue=X("wrenRemoveMapValue"),e._wrenGetVariable=X("wrenGetVariable"),e._wrenHasVariable=X("wrenHasVariable"),e._wrenHasModule=X("wrenHasModule"),e._wrenAbortFiber=X("wrenAbortFiber"),e._wrenGetUserData=X("wrenGetUserData"),e._wrenSetUserData=X("wrenSetUserData"),e._wrenAddImplicitImportModule=X("wrenAddImplicitImportModule");var K=e._malloc=X("malloc");e._sock_font=X("sock_font"),e._sock_init=X("sock_init"),e._sock_new_buffer=X("sock_new_buffer");var $=e.stackSave=X("stackSave"),J=e.stackRestore=X("stackRestore"),ee=e.stackAlloc=X("stackAlloc"),te=e._emscripten_stack_init=function(){return(te=e._emscripten_stack_init=e.asm.emscripten_stack_init).apply(null,arguments)};e._emscripten_stack_get_free=function(){return(e._emscripten_stack_get_free=e.asm.emscripten_stack_get_free).apply(null,arguments)};var ne,re=e._emscripten_stack_get_end=function(){return(re=e._emscripten_stack_get_end=e.asm.emscripten_stack_get_end).apply(null,arguments)};function oe(n){n=n||i,F>0||(te(),S(),B(v),F>0||(ne||(ne=!0,e.calledRun=!0,p||(A(),g(!I),I=!0,B(U),t(e),g(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),A(),B(j))),A()))}return e.dynCall_jiji=X("dynCall_jiji"),Object.getOwnPropertyDescriptor(e,"intArrayFromString")||(e.intArrayFromString=function(){L("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"intArrayToString")||(e.intArrayToString=function(){L("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.ccall=function(t,n,r,o,i){var a={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);D(e,t=ee(n),n)}return t},array:function(e){var t=ee(e.length);return function(e,t){g(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),_.set(e,t)}(e,t),t}},s=function(t){var n=e["_"+t];return g(n,"Cannot call unknown function "+t+", make sure it is exported"),n}(t),c=[],l=0;if(g("array"!==n,'Return type should not be "array".'),o)for(var d=0;d<o.length;d++){var u=a[r[d]];u?(0===l&&(l=$()),c[d]=u(o[d])):c[d]=o[d]}var f=s.apply(null,c);return f=function(e){return 0!==l&&J(l),function(e){return"string"===n?m(e):"boolean"===n?Boolean(e):e}(e)}(f)},Object.getOwnPropertyDescriptor(e,"cwrap")||(e.cwrap=function(){L("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setValue")||(e.setValue=function(){L("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getValue")||(e.getValue=function(){L("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocate")||(e.allocate=function(){L("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ArrayToString")||(e.UTF8ArrayToString=function(){L("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ToString")||(e.UTF8ToString=function(){L("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8Array")||(e.stringToUTF8Array=function(){L("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8")||(e.stringToUTF8=function(){L("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF8")||(e.lengthBytesUTF8=function(){L("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){L("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreRun")||(e.addOnPreRun=function(){L("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnInit")||(e.addOnInit=function(){L("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreMain")||(e.addOnPreMain=function(){L("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnExit")||(e.addOnExit=function(){L("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPostRun")||(e.addOnPostRun=function(){L("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeStringToMemory")||(e.writeStringToMemory=function(){L("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeArrayToMemory")||(e.writeArrayToMemory=function(){L("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeAsciiToMemory")||(e.writeAsciiToMemory=function(){L("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addRunDependency")||(e.addRunDependency=function(){L("'addRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"removeRunDependency")||(e.removeRunDependency=function(){L("'removeRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createFolder")||(e.FS_createFolder=function(){L("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createPath")||(e.FS_createPath=function(){L("'FS_createPath' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createDataFile")||(e.FS_createDataFile=function(){L("'FS_createDataFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createPreloadedFile")||(e.FS_createPreloadedFile=function(){L("'FS_createPreloadedFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLazyFile")||(e.FS_createLazyFile=function(){L("'FS_createLazyFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLink")||(e.FS_createLink=function(){L("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createDevice")||(e.FS_createDevice=function(){L("'FS_createDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_unlink")||(e.FS_unlink=function(){L("'FS_unlink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"getLEB")||(e.getLEB=function(){L("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFunctionTables")||(e.getFunctionTables=function(){L("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignFunctionTables")||(e.alignFunctionTables=function(){L("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFunctions")||(e.registerFunctions=function(){L("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.addFunction=function(e,t){if(g(void 0!==e),d||(d=new WeakMap,function(e,t){for(var n=e;n<e+t;n++){var r=W(n);r&&d.set(r,n)}}(0,R.length)),d.has(e))return d.get(e);var n=function(){if(h.length)return h.pop();try{R.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return R.length-1}();try{Z(n,e)}catch(o){if(!(o instanceof TypeError))throw o;g(void 0!==t,"Missing signature argument to addFunction: "+e);var r=function(e,t){if("function"==typeof WebAssembly.Function){for(var n={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==t[0]?[]:[n[t[0]]]},o=1;o<t.length;++o)r.parameters.push(n[t[o]]);return new WebAssembly.Function(r,e)}var i=[1,0,1,96],a=t.slice(0,1),s=t.slice(1),c={i:127,j:126,f:125,d:124};for(i.push(s.length),o=0;o<s.length;++o)i.push(c[s[o]]);"v"==a?i.push(0):i=i.concat([1,c[a]]),i[1]=i.length-2;var l=new Uint8Array([0,97,115,109,1,0,0,0].concat(i,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),d=new WebAssembly.Module(l);return new WebAssembly.Instance(d,{e:{f:e}}).exports.f}(e,t);Z(n,r)}return d.set(e,n),n},Object.getOwnPropertyDescriptor(e,"removeFunction")||(e.removeFunction=function(){L("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){L("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"prettyPrint")||(e.prettyPrint=function(){L("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){L("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCompilerSetting")||(e.getCompilerSetting=function(){L("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"print")||(e.print=function(){L("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"printErr")||(e.printErr=function(){L("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getTempRet0")||(e.getTempRet0=function(){L("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setTempRet0")||(e.setTempRet0=function(){L("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callMain")||(e.callMain=function(){L("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"abort")||(e.abort=function(){L("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"keepRuntimeAlive")||(e.keepRuntimeAlive=function(){L("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"zeroMemory")||(e.zeroMemory=function(){L("'zeroMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToNewUTF8")||(e.stringToNewUTF8=function(){L("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setFileTime")||(e.setFileTime=function(){L("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscripten_realloc_buffer")||(e.emscripten_realloc_buffer=function(){L("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ENV")||(e.ENV=function(){L("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"withStackSave")||(e.withStackSave=function(){L("'withStackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_CODES")||(e.ERRNO_CODES=function(){L("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_MESSAGES")||(e.ERRNO_MESSAGES=function(){L("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setErrNo")||(e.setErrNo=function(){L("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton4")||(e.inetPton4=function(){L("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop4")||(e.inetNtop4=function(){L("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton6")||(e.inetPton6=function(){L("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop6")||(e.inetNtop6=function(){L("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readSockaddr")||(e.readSockaddr=function(){L("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeSockaddr")||(e.writeSockaddr=function(){L("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"DNS")||(e.DNS=function(){L("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getHostByName")||(e.getHostByName=function(){L("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GAI_ERRNO_MESSAGES")||(e.GAI_ERRNO_MESSAGES=function(){L("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Protocols")||(e.Protocols=function(){L("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Sockets")||(e.Sockets=function(){L("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getRandomDevice")||(e.getRandomDevice=function(){L("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"traverseStack")||(e.traverseStack=function(){L("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UNWIND_CACHE")||(e.UNWIND_CACHE=function(){L("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgsArray")||(e.readAsmConstArgsArray=function(){L("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgs")||(e.readAsmConstArgs=function(){L("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mainThreadEM_ASM")||(e.mainThreadEM_ASM=function(){L("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_q")||(e.jstoi_q=function(){L("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_s")||(e.jstoi_s=function(){L("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getExecutableName")||(e.getExecutableName=function(){L("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"listenOnce")||(e.listenOnce=function(){L("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"autoResumeAudioContext")||(e.autoResumeAudioContext=function(){L("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCallLegacy")||(e.dynCallLegacy=function(){L("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getDynCaller")||(e.getDynCaller=function(){L("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){L("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callRuntimeCallbacks")||(e.callRuntimeCallbacks=function(){L("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wasmTableMirror")||(e.wasmTableMirror=function(){L("'wasmTableMirror' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setWasmTableEntry")||(e.setWasmTableEntry=function(){L("'setWasmTableEntry' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getWasmTableEntry")||(e.getWasmTableEntry=function(){L("'getWasmTableEntry' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"handleException")||(e.handleException=function(){L("'handleException' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePush")||(e.runtimeKeepalivePush=function(){L("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePop")||(e.runtimeKeepalivePop=function(){L("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callUserCallback")||(e.callUserCallback=function(){L("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeExit")||(e.maybeExit=function(){L("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"safeSetTimeout")||(e.safeSetTimeout=function(){L("'safeSetTimeout' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asmjsMangle")||(e.asmjsMangle=function(){L("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asyncLoad")||(e.asyncLoad=function(){L("'asyncLoad' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignMemory")||(e.alignMemory=function(){L("'alignMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mmapAlloc")||(e.mmapAlloc=function(){L("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reallyNegative")||(e.reallyNegative=function(){L("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"unSign")||(e.unSign=function(){L("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reSign")||(e.reSign=function(){L("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"formatString")||(e.formatString=function(){L("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH")||(e.PATH=function(){L("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH_FS")||(e.PATH_FS=function(){L("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SYSCALLS")||(e.SYSCALLS=function(){L("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMmap2")||(e.syscallMmap2=function(){L("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMunmap")||(e.syscallMunmap=function(){L("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketFromFD")||(e.getSocketFromFD=function(){L("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketAddress")||(e.getSocketAddress=function(){L("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"JSEvents")||(e.JSEvents=function(){L("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerKeyEventCallback")||(e.registerKeyEventCallback=function(){L("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"specialHTMLTargets")||(e.specialHTMLTargets=function(){L("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeCStringToJsString")||(e.maybeCStringToJsString=function(){L("'maybeCStringToJsString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findEventTarget")||(e.findEventTarget=function(){L("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findCanvasEventTarget")||(e.findCanvasEventTarget=function(){L("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getBoundingClientRect")||(e.getBoundingClientRect=function(){L("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillMouseEventData")||(e.fillMouseEventData=function(){L("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerMouseEventCallback")||(e.registerMouseEventCallback=function(){L("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerWheelEventCallback")||(e.registerWheelEventCallback=function(){L("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerUiEventCallback")||(e.registerUiEventCallback=function(){L("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFocusEventCallback")||(e.registerFocusEventCallback=function(){L("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceOrientationEventData")||(e.fillDeviceOrientationEventData=function(){L("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceOrientationEventCallback")||(e.registerDeviceOrientationEventCallback=function(){L("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceMotionEventData")||(e.fillDeviceMotionEventData=function(){L("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceMotionEventCallback")||(e.registerDeviceMotionEventCallback=function(){L("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"screenOrientation")||(e.screenOrientation=function(){L("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillOrientationChangeEventData")||(e.fillOrientationChangeEventData=function(){L("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerOrientationChangeEventCallback")||(e.registerOrientationChangeEventCallback=function(){L("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillFullscreenChangeEventData")||(e.fillFullscreenChangeEventData=function(){L("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFullscreenChangeEventCallback")||(e.registerFullscreenChangeEventCallback=function(){L("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerRestoreOldStyle")||(e.registerRestoreOldStyle=function(){L("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"hideEverythingExceptGivenElement")||(e.hideEverythingExceptGivenElement=function(){L("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreHiddenElements")||(e.restoreHiddenElements=function(){L("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setLetterbox")||(e.setLetterbox=function(){L("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"currentFullscreenStrategy")||(e.currentFullscreenStrategy=function(){L("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreOldWindowedStyle")||(e.restoreOldWindowedStyle=function(){L("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"softFullscreenResizeWebGLRenderTarget")||(e.softFullscreenResizeWebGLRenderTarget=function(){L("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"doRequestFullscreen")||(e.doRequestFullscreen=function(){L("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillPointerlockChangeEventData")||(e.fillPointerlockChangeEventData=function(){L("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockChangeEventCallback")||(e.registerPointerlockChangeEventCallback=function(){L("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockErrorEventCallback")||(e.registerPointerlockErrorEventCallback=function(){L("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"requestPointerLock")||(e.requestPointerLock=function(){L("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillVisibilityChangeEventData")||(e.fillVisibilityChangeEventData=function(){L("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerVisibilityChangeEventCallback")||(e.registerVisibilityChangeEventCallback=function(){L("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerTouchEventCallback")||(e.registerTouchEventCallback=function(){L("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillGamepadEventData")||(e.fillGamepadEventData=function(){L("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerGamepadEventCallback")||(e.registerGamepadEventCallback=function(){L("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBeforeUnloadEventCallback")||(e.registerBeforeUnloadEventCallback=function(){L("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillBatteryEventData")||(e.fillBatteryEventData=function(){L("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"battery")||(e.battery=function(){L("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBatteryEventCallback")||(e.registerBatteryEventCallback=function(){L("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setCanvasElementSize")||(e.setCanvasElementSize=function(){L("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCanvasElementSize")||(e.getCanvasElementSize=function(){L("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangle")||(e.demangle=function(){L("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangleAll")||(e.demangleAll=function(){L("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jsStackTrace")||(e.jsStackTrace=function(){L("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){L("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getEnvStrings")||(e.getEnvStrings=function(){L("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"checkWasiClock")||(e.checkWasiClock=function(){L("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"flush_NO_FILESYSTEM")||(e.flush_NO_FILESYSTEM=function(){L("'flush_NO_FILESYSTEM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64")||(e.writeI53ToI64=function(){L("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Clamped")||(e.writeI53ToI64Clamped=function(){L("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Signaling")||(e.writeI53ToI64Signaling=function(){L("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Clamped")||(e.writeI53ToU64Clamped=function(){L("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Signaling")||(e.writeI53ToU64Signaling=function(){L("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromI64")||(e.readI53FromI64=function(){L("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromU64")||(e.readI53FromU64=function(){L("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertI32PairToI53")||(e.convertI32PairToI53=function(){L("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertU32PairToI53")||(e.convertU32PairToI53=function(){L("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setImmediateWrapped")||(e.setImmediateWrapped=function(){L("'setImmediateWrapped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"clearImmediateWrapped")||(e.clearImmediateWrapped=function(){L("'clearImmediateWrapped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"polyfillSetImmediate")||(e.polyfillSetImmediate=function(){L("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"uncaughtExceptionCount")||(e.uncaughtExceptionCount=function(){L("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionLast")||(e.exceptionLast=function(){L("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionCaught")||(e.exceptionCaught=function(){L("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ExceptionInfo")||(e.ExceptionInfo=function(){L("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"CatchInfo")||(e.CatchInfo=function(){L("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_addRef")||(e.exception_addRef=function(){L("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_decRef")||(e.exception_decRef=function(){L("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Browser")||(e.Browser=function(){L("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"funcWrappers")||(e.funcWrappers=function(){L("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){L("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setMainLoop")||(e.setMainLoop=function(){L("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wget")||(e.wget=function(){L("'wget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"tempFixedLengthArray")||(e.tempFixedLengthArray=function(){L("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"miniTempWebGLFloatBuffers")||(e.miniTempWebGLFloatBuffers=function(){L("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapObjectForWebGLType")||(e.heapObjectForWebGLType=function(){L("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapAccessShiftForWebGLHeap")||(e.heapAccessShiftForWebGLHeap=function(){L("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GL")||(e.GL=function(){L("'GL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGet")||(e.emscriptenWebGLGet=function(){L("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"computeUnpackAlignedImageSize")||(e.computeUnpackAlignedImageSize=function(){L("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetTexPixelData")||(e.emscriptenWebGLGetTexPixelData=function(){L("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetUniform")||(e.emscriptenWebGLGetUniform=function(){L("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetUniformLocation")||(e.webglGetUniformLocation=function(){L("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglPrepareUniformLocationsBeforeFirstUse")||(e.webglPrepareUniformLocationsBeforeFirstUse=function(){L("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetLeftBracePos")||(e.webglGetLeftBracePos=function(){L("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetVertexAttrib")||(e.emscriptenWebGLGetVertexAttrib=function(){L("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeGLArray")||(e.writeGLArray=function(){L("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AL")||(e.AL=function(){L("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_unicode")||(e.SDL_unicode=function(){L("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_ttfContext")||(e.SDL_ttfContext=function(){L("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_audio")||(e.SDL_audio=function(){L("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL")||(e.SDL=function(){L("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_gfx")||(e.SDL_gfx=function(){L("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLUT")||(e.GLUT=function(){L("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"EGL")||(e.EGL=function(){L("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW_Window")||(e.GLFW_Window=function(){L("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW")||(e.GLFW=function(){L("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLEW")||(e.GLEW=function(){L("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"IDBStore")||(e.IDBStore=function(){L("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runAndAbortIfError")||(e.runAndAbortIfError=function(){L("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"warnOnce")||(e.warnOnce=function(){L("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackSave")||(e.stackSave=function(){L("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackRestore")||(e.stackRestore=function(){L("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackAlloc")||(e.stackAlloc=function(){L("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AsciiToString")||(e.AsciiToString=function(){L("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToAscii")||(e.stringToAscii=function(){L("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF16ToString")||(e.UTF16ToString=function(){L("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF16")||(e.stringToUTF16=function(){L("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF16")||(e.lengthBytesUTF16=function(){L("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF32ToString")||(e.UTF32ToString=function(){L("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF32")||(e.stringToUTF32=function(){L("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF32")||(e.lengthBytesUTF32=function(){L("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8")||(e.allocateUTF8=function(){L("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8OnStack")||(e.allocateUTF8OnStack=function(){L("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.writeStackCookie=S,e.checkStackCookie=A,Object.getOwnPropertyDescriptor(e,"ALLOC_NORMAL")||Object.defineProperty(e,"ALLOC_NORMAL",{configurable:!0,get:function(){L("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(e,"ALLOC_STACK")||Object.defineProperty(e,"ALLOC_STACK",{configurable:!0,get:function(){L("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),k=function e(){ne||oe(),ne||(k=e)},e.run=oe,oe(),e.ready});let h;function p(){return h.HEAPU8}let g,E,_="";async function b(){if(h=await f(),h.sock={write(e){g&&clearTimeout(g);let t,n=0;for(;(t=e.indexOf("\n",n))>=0;){let r=_+e.slice(n,t);_="",n=t+1,console.log("[WREN] "+r)}_+=e.slice(n),_&&(g=setTimeout((()=>{console.log("(WREN) "+_),_=""}),50))},error(e,t,n,r){let o;B=!0,0===e?(Y=r,o=`[WREN COMPILE ERROR]\n${r}\n  at ${Z(t,n)}`,Q=[],Q.push([t,n,null])):1===e?(Y=r,o="[WREN RUNTIME ERROR]\n"+r,Q=[]):2===e&&(o=`  at ${r} ${Z(t,n)}`,Q.push([t,n,r])),console.error(o),W=W?W+"\n"+o:o},loadModule:e=>(l("assets"+e+".wren","arraybuffer").then((t=>{0===w(e,t)&&w(e,"self__.transfer()")}),(t=>{console.warn(`Error loading module source "${e}"`,t),w(e,"self__.transferError("+function(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];t+="\\"===r?"\\\\":"%"===r||'"'===r?"\\"+r:r}return t+'"'}(String(t))+")")})),"var self__=Fiber.current\nFiber.suspend()\nself__=null"),bindMethod:(e,t,n,r)=>function(e,t,n,r){return s[i(e,t,n,r)]}(e,t,n,r),bindClass:(e,t)=>function(e,t){return c[a(e,t)]}(e,t)},E=h.ccall("sock_init","number"),0===E)throw Error("error loading VM")}function w(e,t){let n,r,o=0;"string"==typeof t?(n=t,r="string"):(o=h.stackSave(),n=V(t),r="number");let i=h.ccall("wrenInterpret","number",["number","string",r],[E,e,n]);return o&&h.stackRestore(o),i}function O(e,t){return h.ccall("wrenHasVariable","boolean",["number","string","string"],[E,e,t])}function y(e){h.ccall("wrenEnsureSlots",null,["number","number"],[E,e])}function T(e){return h.ccall("wrenGetSlotType","number",["number","number"],[E,e])}function m(e){return h.ccall("wrenGetSlotBool","boolean",["number","number"],[E,e])}function D(e){return h.ccall("wrenGetSlotString","string",["number","number"],[E,e])}function P(e){let t=h.stackSave(),n=h.stackAlloc(4),r=h.ccall("wrenGetSlotBytes","number",["number","number","number"],[E,e,n]),o=h.HEAPU8.buffer,i=new Int32Array(o,n)[0];return h.stackRestore(t),new Uint8Array(o,r,i)}function R(e){return h.ccall("wrenGetSlotDouble","number",["number","number"],[E,e])}function M(e,t,n){h.ccall("wrenInsertInList",null,["number","number","number","number"],[E,e,t,n])}function S(e){return h.ccall("wrenGetSlotForeign","number",["number","number"],[E,e])}function A(e,t){return h.ccall("wrenGetSlotIsInstanceOf","boolean",["number","number","number"],[E,e,t])}function v(e){return h.ccall("wrenGetSlotHandle","number",["number","number"],[E,e])}function U(e,t,n){h.ccall("wrenGetVariable",null,["number","string","string","number"],[E,e,t,n])}function j(e){h.ccall("wrenSetSlotNull",null,["number","number"],[E,e])}function I(e,t){h.ccall("wrenSetSlotBool",null,["number","number","boolean"],[E,e,t])}function F(e,t){h.ccall("wrenSetSlotDouble",null,["number","number","number"],[E,e,t])}function x(e,t,n,r,o){h.ccall("wrenSetSlotRange",null,["number","number","number","number","number","boolean"],[E,e,t,n,r,o])}function k(e,t){let n,r,o=0;"string"==typeof t?(n=t,r="string"):(o=h.stackSave(),n=V(t),r="number"),h.ccall("wrenSetSlotString",null,["number","number",r],[E,e,n]),o&&h.stackRestore(o)}function N(e,t){h.ccall("wrenSetSlotHandle",null,["number","number","number"],[E,e,t])}function L(e,t,n){return h.ccall("wrenSetSlotNewForeign","number",["number","number","number","number"],[E,e,t,n])}function C(e){h.ccall("wrenSetSlotNewList","number",["number","number"],[E,e])}function H(e){return h.ccall("wrenCall","number",["number","number"],[E,e])}function G(e){h.ccall("wrenReleaseHandle",null,["number","number"],[E,e])}function X(e){var t;y(1),k(0,e),t=0,h.ccall("wrenAbortFiber",null,["number","number"],[E,t])}let Q,B=!1,Y=null,W=null;function Z(e,t){return"/"===e[0]&&(e=e.slice(1)),e+":"+t}function V(e){let t=e instanceof ArrayBuffer?new Uint8Array(e):e,n=0===t[t.length-1],r=n?t.length:t.length+1,o=h.stackAlloc(r),i=p();return i.set(t,o),n||(i[o+r-1]=0),o}let z=0,q=0,K=0,$=0,J=0,ee=0,te=0;function ne(e){return h.ccall("wrenMakeCallHandle","number",["number","string"],[E,e])}let re=0;let oe=document.querySelector("canvas"),ie=Object.assign(self.sock||(self.sock={}),{canvas:oe,async toggleFullscreen(){if(document.fullscreenEnabled){if(document.fullscreenElement)return await document.exitFullscreen(),!0;try{return await document.body.requestFullscreen(),!0}catch(e){console.warn(e)}}else console.warn("fullscreen is blocked by the browser");return!1},togglePointerLock(){document.pointerLockElement?document.exitPointerLock():oe.requestPointerLock()}});let ae=0;function se(e,t){t.then((t=>{ce(e,!0,t)}),(t=>{ce(e,!1,String(t))}))}function ce(e,t,n){for(y(3),N(0,e),I(1,t),n instanceof ArrayBuffer||"string"==typeof n?k(2,n):n instanceof le?(N(2,n.handle),G(n.handle)):"number"==typeof n?F(2,n):"boolean"==typeof n?I(2,n):j(2);0===H($)&&(y(3),0!==T(0));)N(0,e),j(1),j(2);G(e)}class le{constructor(e){this.handle=e}}function de(e){if(y(4),N(3,ae),6!==T(1)||!A(2,3))return void X("args must be (string, Promise)");let t=D(1),n=function(e){return"/"!==e[0]&&(e="/"+e),"assets"+e}(t),r=v(2);N(0,r),se(r,e(n,t))}r("sock","Asset",{"loadString_(_,_)"(){de((e=>l(e,"arraybuffer")))},"exists_(_,_)"(){de((e=>async function(e){try{return(await fetch(e,{method:"HEAD"})).ok}catch(t){return console.error("error for head request at "+e,t),!1}}(e)))}});const ue=["none","filter","echo","reverb","distortion"];let fe,he,pe,ge=null,Ee=0,_e=0,be=0;function we(){pe=function(e){let t=Math.floor(e*fe.sampleRate),n=new AudioBuffer({length:t,sampleRate:fe.sampleRate,numberOfChannels:2}),r=n.getChannelData(0),o=n.getChannelData(1);for(let e=0;e<t;e++){let n=.022*Math.exp(e/t*-5);r[e]=(2*Math.random()-1)*n,o[e]=(2*Math.random()-1)*n}return n}(3)}function Oe(e,t,n){t=Math.max(0,t),n=Math.max(.002,n);let r=e.gain;r.cancelScheduledValues(fe.currentTime),r.value=r.value,r.linearRampToValueAtTime(t,fe.currentTime+n)}class ye{constructor(e){this.effects=Array(8).fill(null),this.gain=fe.createGain(),this.destination=e,this.updateGraph()}getInput(){for(let e=0;e<8;e++){let t=this.effects[e];if(t)return t.input}return this.gain}getEffectType(e){let t=this.effects[e];return t?t.type:0}updateGraph(){let e=[];for(let t=0;t<8;t++){let n=this.effects[t];if(n){for(let t of e)t.connect(n.input);e=n.outputs;for(let t of e)t.disconnect();n.setupGraph&&n.setupGraph()}}for(let t of e)t.connect(this.gain);this.gain.disconnect(),this.gain.connect(this.destination?this.destination.getInput():he)}}class Te extends ye{constructor(e){super(),this.ptr=e}}class me{constructor(e){this.ptr=e}setBuffer(e){this.buffer=e}}function De(e,t,n){t=Math.max(e.minValue,Math.min(e.maxValue,t)),n?e.linearRampToValueAtTime(t,fe.currentTime+n):e.value=t}class Pe{constructor(){this.filter=fe.createBiquadFilter()}getParam(e){if(0===e)switch(this.filter.type){case"lowpass":return 0;case"highpass":return 1;case"bandpass":return 2}else{if(1===e)return this.filter.frequency.value;if(2===e)return this.filter.Q.value}}checkParam(e,t){if(0===e&&((t=Math.floor(t))<0||t>2))return"invalid filter type"}setParam(e,t,n){if(0===e)switch(t=Math.floor(t)){case 0:this.filter.type="lowpass";break;case 1:this.filter.type="highpass";break;case 2:this.filter.type="bandpass"}else 1===e?De(this.filter.frequency,t,n):2===e&&De(this.filter.Q,t,n)}get type(){return 1}get input(){return this.filter}get outputs(){return[this.filter]}}class Re{constructor(){this.maxDelay=-1,this.node=new GainNode(fe),this.decay=new GainNode(fe),this.mix=new GainNode(fe)}create(){this.delay=new DelayNode(fe,{delayTime:this.maxDelay,maxDelayTime:this.maxDelay}),this.delay.connect(this.mix),this.delay.connect(this.decay),this.decay.connect(this.delay)}setupGraph(){this.node.connect(this.delay)}getParam(e){return 0===e?this.delay?this.delay.delayTime.value:this.maxDelay:1===e?this.decay.gain.value:2===e?this.mix.gain.value:void 0}checkParam(e,t){if(0===e){if(t<.001)return"decay not be less than 1ms"}else if(1===e){if(t<0)return"decay must not be negative";if(t>=1)return"decay must less than 1"}}setParam(e,t,n){2===e?De(this.mix.gain,t,n):0===e?(this.maxDelay<0&&(this.maxDelay=t),this.delay&&De(this.delay.delayTime,t,n)):1===e&&De(this.decay.gain,t,n)}free(){this.delay.disconnect(),this.decay.disconnect(),this.delay=null,this.decay=null}get type(){return 2}get input(){return this.node}get outputs(){return[this.node,this.mix]}}class Me{constructor(){this.gain=new GainNode(fe),this.wetGain=new GainNode(fe,{gain:1})}create(){this.convolver=new ConvolverNode(fe,{buffer:pe,disableNormalization:!0}),this.convolver.connect(this.wetGain)}setupGraph(){this.gain.connect(this.convolver)}getParam(e){if(0==e)return this.wetGain.gain.value}checkParam(e,t){}setParam(e,t,n){0===e&&De(this.wetGain.gain,t,n)}get type(){return 3}get input(){return this.gain}get outputs(){return[this.gain,this.wetGain]}}class Se extends ye{constructor(e,t,n,r){super(r),this.ptr=e,this.audio=t,this.audioHandle=n,this._initSource(),this.state=0,this.time=0}_initSource(){this.source=fe.createBufferSource(),this.source.buffer=this.audio.buffer}play(){if(0===this.state||2===this.state){if(2===this.state){let e=this.source;this._initSource(),this.source.loop=e.loop,this.source.loopStart=e.loopStart,this.source.playbackRate.value=e.playbackRate.value}this.source.connect(this.getInput()),this.source.start(0,this.time),this.startTime=fe.currentTime,this.state=1}}saveTime(){this.time+=(fe.currentTime-this.startTime)*this.source.playbackRate.value,this.startTime=fe.currentTime}pause(){1===this.state&&(console.log(this.source.playbackRate.value),this.time+=(fe.currentTime-this.startTime)*this.source.playbackRate.value,this.source.stop(),this.source.disconnect(),this.state=2)}updateGraph(){super.updateGraph(),this.source&&(this.source.disconnect(),this.source.connect(this.getInput()))}}let Ae=new Map,ve=new Map,Ue=new Map;function je(){return Ae.get(S(0))}function Ie(){return ve.get(S(0))}function Fe(){return Ue.get(S(0))}let xe,ke=!0;async function Ne(e){if(null==xe){xe=new Promise((e=>{let t=()=>{removeEventListener("stbvorbis",t),e(self.stbvorbis)};addEventListener("stbvorbis",t)}));let e=document.createElement("script");e.src="stbvorbis.js",document.head.append(e)}let t=await xe;return new Promise(((n,r)=>{let o,i=[];t.decode(e,(e=>{if(e.error)r(e.error);else if(e.eof){let e=i.reduce(((e,t)=>e+t[0].length),0),t=i[0].length,r=new AudioBuffer({sampleRate:o,numberOfChannels:t,length:e}),a=0;for(let e of i)for(let n=0;n<t;n++)r.copyToChannel(e[n],n,a),a+=e[n].length;n(r)}else i.push(e.data),o=e.sampleRate}))}))}function Le(e){for(let e=1;e<=6;e++)if(1!==T(e))return void X("args must be Nums");let t,n=R(1),r=R(2),o=Array(4);if(o[0]=R(3),o[1]=R(4),o[2]=R(5),o[3]=R(6),n<0||n>=8)return void X("invalid effect index");if(r<1||r>4)return void X("invalid effect type");if(t=1===r?new Pe:2===r?new Re:3===r?new Me:null,t){if(t.checkParam)for(let e=0;e<4;e++){let n=t.checkParam(e,o[e]);if(n)return t.free&&t.free(),void X(n)}for(let e=0;e<4;e++)t.setParam(e,o[e])}t.create&&t.create();let i=e.effects[n];if(i){for(let e of i.outputs)e.disconnect();i.free&&i.free()}e.effects[n]=t,e.updateGraph()}function Ce(e){if(1!==T(1))return void X("index must be a Num");let t=Math.trunc(R(1));t<0||t>=8?X("invalid effect index"):F(0,e.getEffectType(t))}function He(e){for(let e=1;e<=3;e++)if(1!==T(e))return void X("args must be Nums");let t=Math.trunc(R(1)),n=Math.trunc(R(2)),r=Math.trunc(R(3));t<0||t>=8?X("invalid effect index"):n<1||n>4?X("invalid effect type"):e.getEffectType(t)==n?r<0||r>=4?X("invalid param index"):F(0,e.effects[t].getParam(r)??0):X(`effect at ${t} is not a ${ue[n]}`)}function Ge(e){for(let e=1;e<=5;e++)if(1!==T(e))return void X("args must be Nums");let t=Math.trunc(R(1)),n=Math.trunc(R(2)),r=Math.trunc(R(3)),o=R(4),i=R(5);if(t<0||t>=8)return void X("invalid effect index");if(n<1||n>4)return void X("invalid effect type");if(e.getEffectType(t)!=n)return void X(`effect at ${t} is not a ${ue[n]}`);if(r<0||r>=4)return void X("invalid param index");if(i<0)return void X("fade time must be positive");let a=e.effects[t];if(a.checkParam){let e=a.checkParam(r,o);if(e)return void X(e)}a.setParam(r,o,i)}function Xe(e){for(let e=1;e<=2;e++)if(1!==T(e))return void X("volume and fade must be Nums");Oe(e,R(1),R(2))}o("sock","AudioBus",[()=>{let e=L(0,0,0),t=new Te(e);Ae.set(e,t)},e=>{Ae.delete(e)}],{volume(){F(0,je().gain.gain.value)},"fadeVolume(_,_)"(){Xe(je().gain)},"setEffect_(_,_,_,_,_,_)"(){Le(je())},"getEffect_(_)"(){Ce(je())},"getParam_(_,_,_)"(){He(je())},"setParam_(_,_,_,_,_)"(){Ge(je())}}),o("sock","Audio",[()=>{let e=L(0,0,0),t=new me(e);ve.set(e,t)},e=>{ve.delete(e)}],{duration(){let e=Ie();F(0,e.buffer?e.buffer.duration:0)},"voice()"(){let e=v(0),t=Ie();if(!t.buffer)return void X("audio not loaded");y(2),N(1,be);let n=L(0,1,0),r=new Se(n,t,e);Ue.set(n,r)},"voice(_)"(){let e=v(0),t=Ie();if(!t.buffer)return void X("audio not loaded");if(N(0,_e),!A(1,0))return void X("bus must be an AudioBus");let n=Ae.get(S(1));N(1,be);let r=L(0,1,0),o=new Se(r,t,e,n);Ue.set(r,o)}},{"load_(_,_)"(){de((async e=>{let t=await async function(e,t){let n=await l(e,"arraybuffer",t),r="ogg"===function(e){let t=e.lastIndexOf(".");return t<0?"":e.slice(t+1).toLowerCase()}(e);try{if(r&&!ke)return await Ne(n);null==ge&&(ge=new OfflineAudioContext(1,1,44100));try{return await ge.decodeAudioData(n)}catch(t){if(r)return console.info(`Failed to natively decode ${e}, switching to JavaScript OGG decoder`,t),ke=!1,await Ne(n);throw t}}catch(t){throw console.error(t),Error(`failed to decode audio ${e}`)}}(e);y(1),N(0,Ee);let n=L(0,0,0),r=new me(n);return ve.set(n,r),r.setBuffer(t),new le(v(0))}))},volume(){F(0,he.gain.value/.5)},"fadeVolume(_,_)"(){for(let e=1;e<=2;e++)if(1!==T(e))return void X("args must be Nums");let e=.5*R(1),t=R(2);Oe(he,e,t)}}),o("sock","Voice",[()=>{},e=>{G(Ue.get(e).audioHandle),Ue.delete(e)}],{"play()"(){Fe().play()},"pause()"(){Fe().pause()},isPaused(){let e=Fe();I(0,0===e.state||2===e.state)},"stop()"(){let e=Fe();e.source.stop(),e.state=3},volume(){F(0,Fe().gain.gain.value)},"fadeVolume(_,_)"(){Xe(Fe().gain)},rate(){F(0,Fe().source.playbackRate.value)},"fadeRate(_,_)"(){for(let e=1;e<=2;e++)if(1!==T(e))return void X("args must be Nums");let e=R(1),t=R(2);De(Fe().source.playbackRate,e,t)},loop(){I(0,Fe().source.loop)},"loop=(_)"(){if(0!==T(1))return void X("loop must be a Bool");let e=Fe(),t=m(1);e.source.loop=t,t&&(e.source.loopEnd=e.audio.buffer.duration)},loopStart(){F(0,Fe().source.loopStart)},"loopStart=(_)"(){if(1!==T(1))return void X("loopStart must be a Num");let e=Fe(),t=R(1);e.source.loopStart=t},"setEffect_(_,_,_,_,_,_)"(){Le(Fe())},"getEffect_(_)"(){Ce(Fe())},"getParam_(_,_,_)"(){He(Fe())},"setParam_(_,_,_,_,_)"(){Ge(Fe())}}),r("sock","Buffer",{"load_(_,_)"(){de((async e=>{let t=await l(e,"arraybuffer"),n=t.byteLength,r=0;if(n>0){if(r=h._malloc(n),!r)throw`could not allocate ${n} bytes`;h.HEAPU8.set(new Uint8Array(t),r)}return h.ccall("sock_new_buffer",null,["number","number"],[r,n]),new le(v(0))}))}});let Qe=null;function Be(e){if(null==Qe)return X("id must be set before using other Storage methods"),null;if(6!==T(e))return X("key must be a string"),null;let t=D(e);if(Ye(t))return Qe+"/"+t;X("key may only contain letters, numbers, underscores and dashes")}function Ye(e){return/^[a-zA-Z0-9_\-]+$/.test(e)}function We(e,t,n){let r=document.createElement(e);if(t)for(let e in t){let n=t[e];e.startsWith("on")?r[e]=n:!0===n?r.setAttribute(e,""):null==n||!1===n||r.setAttribute(e,n)}if(n)if(Array.isArray(n))for(let e of n)r.append(e);else r.append(n);return r}r("sock","Storage",{id(){Qe?k(0,Qe):j(0)},"id=(_)"(){if(6!==T(1))return void X("id must be a String");let e=D(1);Ye(e)?Qe=e:X("id may only contain letters, numbers, underscores and dashes")},"contains(_)"(){let e=Be(1);e&&I(0,null!==localStorage.getItem(e))},"load_(_)"(){let e=Be(1);if(e){let t=localStorage.getItem(e);null==t?j(0):k(0,t)}},"save_(_,_)"(){if(6!==T(2))return void X("value must be a String");let e=Be(1);if(e){let t=D(2);localStorage.setItem(e,t)}},"delete(_)"(){let e=Be(1);e&&localStorage.removeItem(e)}});let Ze=0,Ve=0,ze=0,qe=0,Ke=0,$e=0,Je=1,et=1,tt=1,nt={pixelScaling:!1,resolution:null,maxScale:1/0},rt=We("div",{style:"position: fixed; pointer-events: none;"}),ot=0;let it=!1;function at(){it=!0}function st(){Ze=innerWidth,Ve=innerHeight;let e,t,n,r=devicePixelRatio;oe.width=Ze*r,oe.height=Ve*r,oe.style.width=Ze+"px",oe.style.height=Ve+"px";let o=nt.resolution;if(o){e=o[0],t=o[1];let r=Ze/e,i=Ve/t;n=Math.min(r,i,nt.maxScale),nt.pixelScaling&&n>1&&(n=Math.floor(n))}else e=Ze,t=Ve,n=1;ze=e,qe=t,tt=n,Je=Math.floor(n*e),et=Math.floor(n*t),Ke=Math.floor((Ze-Je)/2),$e=Math.floor((Ve-et)/2);let i=rt.style;i.left=Ke+"px",i.top=$e+"px",i.width=Je+"px",i.height=et+"px"}addEventListener("resize",(()=>{at()}));let ct=0,lt=0,dt=1,ut=new Float32Array(9),ft=!0;function ht(){if(ft){ft=!1;let e=2/ze,t=-2/qe;ut[0]=e,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=t,ut[5]=0,ut[6]=-ct*e-1,ut[7]=-lt*t+1,ut[8]=1}return ut}n("","Camera",!0,"update_(_,_,_)",(()=>{for(let e=1;e<=3;e++)if(1!==T(e))return void X("args must be Num");ct=R(1),lt=R(2),dt=R(3),ft=!0}));let pt=oe.getContext("webgl",{antialias:!1});pt.enable(pt.BLEND),pt.blendFuncSeparate(pt.SRC_ALPHA,pt.ONE_MINUS_SRC_ALPHA,pt.ONE,pt.ONE_MINUS_SRC_ALPHA),ie.gl=pt;const gt={linear:pt.LINEAR,nearest:pt.NEAREST},Et={clamp:pt.CLAMP_TO_EDGE,repeat:pt.REPEAT,mirror:pt.MIRRORED_REPEAT};function _t(e){if(6!==T(e))return void X("filter must be a String");let t=D(e);return gt.hasOwnProperty(t)?gt[t]:(X(`invalid filter "${t}"`),null)}function bt(e){if(6!==T(e))return void X("wrap mode must be a String");let t=D(e);return Et.hasOwnProperty(t)?Et[t]:(X(`invalid wrap mode "${t}"`),null)}function wt(e){for(let t in gt)if(gt[t]===e)return t;return"???"}function Ot(e){for(let t in Et)if(Et[t]===e)return t;return"???"}let yt=null,Tt=0,mt=pt.createBuffer();function Dt(e){if(pt.bindBuffer(pt.ELEMENT_ARRAY_BUFFER,mt),null==yt||yt.length<e){let t=yt?yt.length:256;for(;t<e;)t*=2;let n=new Uint16Array(t);null!=yt&&n.set(yt);let r=Tt/1.5;for(;Tt+5<t;Tt+=6)n[Tt]=r,n[Tt+1]=r+1,n[Tt+2]=r+2,n[Tt+3]=r+1,n[Tt+4]=r+3,n[Tt+5]=r+2,r+=4;pt.bufferData(pt.ELEMENT_ARRAY_BUFFER,n,pt.DYNAMIC_DRAW),yt=n,ie.quadSize=t}}let Pt=[];class Rt{constructor(e){this.attributes={},this.uniforms={};let t=Mt("attribute",e.attributes,this.attributes,-1),n=Mt("varying",e.varyings,null,null),r=Mt("uniform",e.vertUniforms,this.uniforms,null),o=Mt("uniform",e.fragUniforms,this.uniforms,null);this.vertSource=t+n+r+St(e.vert??""),this.fragSource=n+o+St(e.frag??"gl_FragColor=vec4(1.0,0.0,1.0,1.0);"),this._vert=pt.createShader(pt.VERTEX_SHADER),pt.shaderSource(this._vert,this.vertSource),this._frag=pt.createShader(pt.FRAGMENT_SHADER),pt.shaderSource(this._frag,this.fragSource),this.prog=pt.createProgram(),pt.attachShader(this.prog,this._vert),pt.attachShader(this.prog,this._frag),this.compiled=!1}compile(){Rt.compile(this)}needsCompilation(){Pt.push(this)}free(){pt.deleteProgram(this.prog),pt.deleteShader(this._frag),pt.deleteShader(this._vert),this.prog=-1,this.compiled=!1}use(){if(!this.compiled)throw Error("shader not compiled");pt.useProgram(this.prog)}getUniformLocation(e){let t=this.uniforms[e];if(null==t)throw Error(`Shader does not contain a uniform named "${e}"`);return t}setUniformTexture(e,t,n){let r=this.getUniformLocation(e);n>=pt.TEXTURE0&&(n-=pt.TEXTURE0),pt.activeTexture(pt.TEXTURE0+n),pt.bindTexture(pt.TEXTURE_2D,t),pt.uniform1i(r,n)}setUniformMatrix3(e,t){let n=this.getUniformLocation(e);pt.uniformMatrix3fv(n,!1,t)}setUniformMatrix4(e,t){let n=this.getUniformLocation(e);pt.uniformMatrix4fv(n,!1,t)}static compileAll(){this.compile(Pt),Pt.length=0}static compile(e){e instanceof Rt&&(e=[e]);for(let t of e)pt.compileShader(t._vert),pt.compileShader(t._frag);for(let t of e)pt.linkProgram(t.prog);let t=[];for(let n of e)if(pt.getProgramParameter(n.prog,pt.LINK_STATUS))n.compiled=!0;else{let e=pt.getProgramInfoLog(n.prog),r=pt.getShaderInfoLog(n._vert),o=pt.getShaderInfoLog(n._frag),i="Shader Compilation Error:";e&&(i+="\n\n===   PROGRAM   ===\n"+e),r&&(i+="\n\n=== VERT SHADER ===\n"+r),o&&(i+="\n\n=== FRAG SHADER ===\n"+o),t.push(i)}if(t.length>0)throw Error(t.join("\n\n"));for(let t of e){for(let e in t.attributes)t.attributes[e]=pt.getAttribLocation(t.prog,e);for(let e in t.uniforms){let n=pt.getUniformLocation(t.prog,e);if(null==n)throw Error(`Failed to find uniform "${e}" in Shader.`);t.uniforms[e]=n}}}}function Mt(e,t,n,r){let o="";if(t)for(let i in t)n&&(n[i]=r),o+=e+" "+t[i]+" "+i+";\n";return o}function St(e){return Array.isArray(e)&&(e=e.join("")),"void main(){"+e+"}"}class At{constructor(e,t){this.x=e,this.y=t}}class vt{constructor(e,t){this.width=0,this.height=0,this.filter=e,this.wrap=t,this.size=1,this.texture=null}name(){return"Texture"}setFilter(e){this.filter!==e&&(this.filter=e,this.texture&&(pt.bindTexture(pt.TEXTURE_2D,this.texture),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MAG_FILTER,this.filter),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MIN_FILTER,this.filter)))}setWrap(e){this.wrap!==e&&(this.wrap=e,this.texture&&(pt.bindTexture(pt.TEXTURE_2D,this.texture),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_S,this.wrap),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_T,this.wrap)))}load(e){let t=function(e){return e instanceof HTMLImageElement?new At(e.naturalWidth,e.naturalHeight):e instanceof HTMLVideoElement?new At(e.videoWidth,e.videoHeight):new At(e.width,e.height)}(e);if(this.width=t.x,this.height=t.y,this.size=function(e,t){if(e instanceof HTMLImageElement){let t=performance.getEntriesByName(e.src)[0];if(t instanceof PerformanceResourceTiming)return t.decodedBodySize||t.transferSize}else if(e instanceof ImageData)return e.data.byteLength;return 1+Math.floor(t.x*t.y*.25)}(e,t),this.texture=pt.createTexture(),pt.bindTexture(pt.TEXTURE_2D,this.texture),pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,pt.RGBA,pt.UNSIGNED_BYTE,e),!(Ut(this.width)&&Ut(this.height))){let e=[];this.wrap!==pt.CLAMP_TO_EDGE&&(this.wrap=pt.CLAMP_TO_EDGE,e.push("wrap mode to CLAMP_TO_EDGE")),e.length>0&&console.warn(`Forced settings on non power-of-two texture "${this.name()}": ${e.join(", ")}.\nThe texture would not function properly otherwise, see https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support`)}pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MAG_FILTER,this.filter),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MIN_FILTER,this.filter),null!=this.wrap&&this.wrap!==pt.REPEAT&&(pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_S,this.wrap),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_T,this.wrap))}free(){pt.deleteTexture(this.texture),this.texture=null}}function Ut(e){return 0==(e&e-1)}let jt=new Rt({attributes:{vertex:"vec3",color:"vec4",uv:"vec2"},varyings:{v_color:"lowp vec4",v_uv:"highp vec2"},vertUniforms:{mat:"mat3"},vert:["v_uv = uv;","v_color = color;","vec3 tv = mat * vec3(vertex.x, vertex.y, 1.0);","gl_Position = vec4(tv.x, tv.y, vertex.z, 1.0);"],fragUniforms:{tex:"sampler2D"},frag:"gl_FragColor = texture2D(tex, v_uv) * v_color;"});jt.needsCompilation();class It{constructor(){this._capacity=128,this._array=new ArrayBuffer(24*this._capacity),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=new Uint32Array(this._array),this._vertexCount=-1,this._vertexBuffer=pt.createBuffer(),this._vertexBufferCapacity=0}begin(e){if(this._vertexCount>=0)throw Error("already called begin()");return this._texture=e,this._vertexCount=0,this}drawQuad(e,t,n,r,o,i,a,s,c,l,d,u){if(this.checkResize(4),d){let f=e*d[0]+t*d[2]+d[4],h=e*d[1]+t*d[3]+d[5],p=e*d[0]+r*d[2]+d[4],g=e*d[1]+r*d[3]+d[5],E=n*d[0]+t*d[2]+d[4],_=n*d[1]+t*d[3]+d[5],b=n*d[0]+r*d[2]+d[4],w=n*d[1]+r*d[3]+d[5],O=u?e+u[0]:(e+n)/2,y=u?t+u[1]:(t+r)/2,T=O-d[0]*O-d[2]*y,m=y-d[1]*O-d[3]*y;this.addVertex(f+T,h+m,o,l,i,a),this.addVertex(p+T,g+m,o,l,i,c),this.addVertex(E+T,_+m,o,l,s,a),this.addVertex(b+T,w+m,o,l,s,c)}else this.addVertex(e,t,o,l,i,a),this.addVertex(e,r,o,l,i,c),this.addVertex(n,t,o,l,s,a),this.addVertex(n,r,o,l,s,c)}addVertex(e,t,n,r,o,i){let a=6*this._vertexCount;this._floats[a]=e,this._floats[a+1]=t,this._floats[a+2]=n,this._ints[a+3]=r,this._floats[a+4]=o,this._floats[a+5]=i,this._vertexCount++}checkResize(e){if(this._vertexCount+e>this._capacity){if(this._capacity*=2,this._capacity>=1048575)throw Error("exceeded max batch capacity of 1048575, did you forget to call end()?");this._array=new ArrayBuffer(24*this._capacity);let e=new Uint32Array(this._array);e.set(this._ints),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=e}}end(){if(this._vertexCount<0)throw Error("have not called begin()");if(this._vertexCount>0){jt.use(),pt.bindBuffer(pt.ARRAY_BUFFER,this._vertexBuffer),this._vertexCount>this._vertexBufferCapacity?(this._vertexBufferCapacity=this._capacity,pt.bufferData(pt.ARRAY_BUFFER,this._array,pt.DYNAMIC_DRAW)):pt.bufferSubData(pt.ARRAY_BUFFER,0,this._ints.subarray(0,6*this._vertexCount));let e=jt.attributes.vertex,t=jt.attributes.color,n=jt.attributes.uv;pt.vertexAttribPointer(e,3,pt.FLOAT,!1,24,0),pt.enableVertexAttribArray(e),pt.vertexAttribPointer(t,4,pt.UNSIGNED_BYTE,!0,24,12),pt.enableVertexAttribArray(t),pt.vertexAttribPointer(n,2,pt.FLOAT,!1,24,16),pt.enableVertexAttribArray(n),jt.setUniformTexture("tex",this._texture.texture,0),jt.setUniformMatrix3("mat",ht());let r=1.5*this._vertexCount;Dt(r),pt.drawElements(pt.TRIANGLES,r,pt.UNSIGNED_SHORT,0),pt.disableVertexAttribArray(e),pt.disableVertexAttribArray(t),pt.disableVertexAttribArray(n)}this._vertexCount=-1}free(){pt.deleteBuffer(this._vertexBuffer),this._array=this._bytes=this._floats=this._ints=null}}let Ft=0;let xt=pt.NEAREST,kt=pt.CLAMP_TO_EDGE;class Nt extends vt{constructor(e){super(xt,kt),this.ptr=e,this.path=null,this.batcher=null,this.color=4294967295,this.tfo=null,this.tf=null}name(){return this.path||"Sprite#"+this.ptr}beginBatch(){this.batcher=Lt.length>0?Lt.pop():(console.log("allocate new sprite batcher"),new It),this.batcher.begin(this)}endBatch(){this.batcher.end(),Lt.push(this.batcher),this.batcher=null}}let Lt=[];function Ct(){if(Lt.length>0)return Lt[0];{console.log("allocate new sprite batcher");let e=new It;return Lt.push(e),e}}let Ht,Gt,Xt=new Map;function Qt(){return Xt.get(S(0))}o("sock","Sprite",[()=>{let e=L(0,0,0),t=new Nt(e);Xt.set(e,t)},e=>{Xt.get(e).free(),Xt.delete(e)}],{width(){F(0,Qt().width)},height(){F(0,Qt().height)},scaleFilter(){k(0,wt(Qt().filter))},"scaleFilter=(_)"(){let e=_t(1);null!=e&&Qt().setFilter(e)},wrapMode(){k(0,Ot(Qt().wrap))},"wrapMode=(_)"(){let e=bt(1);null!=e&&Qt().setWrap(e)},color(){F(0,Qt().color)},"color=(_)"(){1===T(1)?Qt().color=R(1):X("color must be Num")},"beginBatch()"(){let e=Qt();e.batcher?X("batch already started"):e.beginBatch()},"endBatch()"(){let e=Qt();e.batcher?e.endBatch():X("batch no yet started")},transform_(){let e=Qt();if(null==e.tf)j(0);else{y(2),C(0);for(let t=0;t<6;t++)F(1,e.tf[t]),M(0,-1,1)}},"setTransform_(_,_,_,_,_,_)"(){for(let e=1;e<=6;e++)if(1!==T(e))return void X("args must be Nums");let e=Qt(),t=R(1);isNaN(t)?e.tf=null:e.tf=[t,R(2),R(3),R(4),R(5),R(6)]},transformOrigin_(){let e=Qt();if(null==e.tfo)j(0);else{y(2),C(0);for(let t=0;t<2;t++)F(1,e.tfo[t]),M(0,-1,1)}},"setTransformOrigin(_,_)"(){for(let e=1;e<=2;e++)if(1!==T(e))return void X("args must be Nums");let e=Qt(),t=R(1);isNaN(t)?e.tfo=null:e.tfo=[t,R(2)]},"draw(_,_,_,_,_)"(){let e=Qt(),t=R(1),n=R(2),r=R(3),o=t+R(4),i=n+R(5),a=e.batcher||Ct().begin(e);a.drawQuad(t,n,o,i,r,0,0,1,1,e.color,e.tf,e.tfo),e.batcher||a.end()},"draw(_,_,_,_,_,_,_,_,_)"(){let e=Qt(),t=R(1),n=R(2),r=R(3),o=t+R(4),i=n+R(5),a=R(6)/e.width,s=R(7)/e.height,c=a+R(8)/e.width,l=s+R(9)/e.height,d=e.batcher||Ct().begin(e);d.drawQuad(t,n,o,i,r,a,s,c,l,e.color,e.tf,e.tfo),e.batcher||d.end()},toString(){k(0,Qt().name())}},{"load_(_,_)"(){de((async(e,t)=>{let n=await d(e);y(2),N(0,Ft);let r=L(0,0,0),o=new Nt(r);return o.path=t,Xt.set(r,o),o.load(n),new le(v(0))}))},defaultScaleFilter(){k(0,wt(xt))},"defaultScaleFilter=(_)"(){let e=_t(1);null!=e&&(xt=e)},defaultWrapMode(){k(0,Ot(kt))},"defaultWrapMode=(_)"(){let e=bt(1);null!=e&&(kt=e)}});let Bt=!1,Yt=navigator.platform,Wt=navigator.userAgent;"iPhone"===Yt||"iPad"===Yt||Wt.includes("iPhone")?(Ht="ios",Bt=!0):"Win32"===Yt?Ht="windows":Yt.includes("Mac")?Ht="mac":Wt.includes("Android")?(Ht="android",Bt=!0):Ht="linux",Gt=Wt.includes("Edg/")?"edge":Wt.includes("Chrome/")?"chrome":Wt.includes("Safari/")?"safari":Wt.includes("Firefox/")?"firefox":"unknown",ie.device={os:Ht,isMobile:Bt,browser:Gt};let Zt=new Rt({attributes:{vertex:"vec2"},varyings:{v_uv:"highp vec2"},vert:["v_uv = 0.5 + vertex.xy * 0.5;","gl_Position = vec4(vertex, 0.0, 1.0);"],fragUniforms:{tex:"sampler2D"},frag:"gl_FragColor = texture2D(tex, v_uv);"});Zt.needsCompilation();let Vt,zt,qt=new class{constructor(e){this.filter=e??pt.LINEAR,this.texture=pt.createTexture(),this.depthBuffer=pt.createRenderbuffer(),this.framebuffer=pt.createFramebuffer(),this.quadBuffer=pt.createBuffer(),pt.bindBuffer(pt.ARRAY_BUFFER,this.quadBuffer),pt.bufferData(pt.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),pt.STATIC_DRAW),pt.bindTexture(pt.TEXTURE_2D,this.texture),pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,8,8,0,pt.RGBA,pt.UNSIGNED_BYTE,null)}updateResolution(){pt.bindTexture(pt.TEXTURE_2D,this.texture),pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,ze,qe,0,pt.RGBA,pt.UNSIGNED_BYTE,null),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MIN_FILTER,this.filter),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MAG_FILTER,this.filter),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_S,pt.CLAMP_TO_EDGE),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_WRAP_T,pt.CLAMP_TO_EDGE),pt.bindRenderbuffer(pt.RENDERBUFFER,this.depthBuffer),pt.renderbufferStorage(pt.RENDERBUFFER,pt.DEPTH_COMPONENT16,ze,qe),pt.bindFramebuffer(pt.FRAMEBUFFER,this.framebuffer),pt.framebufferTexture2D(pt.FRAMEBUFFER,pt.COLOR_ATTACHMENT0,pt.TEXTURE_2D,this.texture,0),pt.framebufferRenderbuffer(pt.FRAMEBUFFER,pt.DEPTH_ATTACHMENT,pt.RENDERBUFFER,this.depthBuffer)}setFilter(e){this.filter=e,pt.bindTexture(pt.TEXTURE_2D,this.texture),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MIN_FILTER,this.filter),pt.texParameteri(pt.TEXTURE_2D,pt.TEXTURE_MAG_FILTER,this.filter)}bind(){pt.bindFramebuffer(pt.FRAMEBUFFER,this.framebuffer),pt.viewport(0,0,ze,qe)}unbind(){pt.bindFramebuffer(pt.FRAMEBUFFER,null);let e=devicePixelRatio;pt.viewport(Ke*e,$e*e,Je*e,et*e)}draw(){this.unbind(),Zt.use(),Zt.setUniformTexture("tex",this.texture,0);let e=Zt.attributes.vertex;pt.bindBuffer(pt.ARRAY_BUFFER,this.quadBuffer),pt.vertexAttribPointer(e,2,pt.FLOAT,!1,0,0),pt.enableVertexAttribArray(e),pt.drawArrays(pt.TRIANGLES,0,6),pt.disableVertexAttribArray(e)}free(){pt.deleteFramebuffer(this.framebuffer),pt.deleteBuffer(this.quadBuffer),pt.deleteTexture(this.texture),pt.deleteRenderbuffer(this.depthBuffer)}}(pt.NEAREST);function Kt(e,t,n,r){"string"==typeof e&&(e=(new TextEncoder).encode(e));let o=null==r?4294967295:"number"==typeof r?r:r.int,i=[ct,lt,dt];ct=0,lt=0,dt=1,ft=!0,zt||(zt=new It),zt.begin(Vt);let a=t,s=n;for(let n=0;n<e.length;n++){let r=e[n];if(9==r)a+=24;else if(10===r)a=t,s+=14;else if(13==r);else if(32==r)a+=6;else{(r<32||r>127)&&(r=127);let e=r-32,t=e%16*6,n=12*Math.trunc(e/16);zt.drawQuad(a,s,a+6,s+12,0,t/96,n/72,(t+6)/96,(n+12)/72,o),a+=6}}var c;return zt.end(),c=i,[ct,lt,dt]=c,ft=!0,s}let $t=document.title,Jt=60,en=!1,tn=!1,nn=null,rn="default",on=4294967295,an=!1,sn=!1;r("sock","Game",{title(){k(0,$t)},"title=(_)"(){6===T(1)?document.title=$t=D(1):X("title must be a String")},"layoutChanged_(_,_,_,_,_)"(){if(1!==T(1)||1!==T(2)||0!==T(3)||0!==T(4)||1!==T(5))return void X("invalid args");let e=R(1),t=R(2),n=m(3),r=m(4),o=R(5);e<1||t<1||o<1?X("resolution/scale must be positive"):(nt.pixelScaling=r,nt.resolution=n?[Math.trunc(e),Math.trunc(t)]:null,nt.maxScale=Math.trunc(o),at())},scaleFilter:()=>qt.filter?"nearest":"linear","scaleFilter=(_)"(){let e=_t(1);null!=e&&qt.setFilter(e)},fullscreenAllowed(){I(0,document.fullscreenEnabled)},fullscreen(){I(0,an||null!=document.fullscreenElement)},"setFullscreen_(_)"(){if(0!==T(1))return void X("fullscreen must be a Bool");if(m(1)){if(!an&&!document.fullscreenElement){if(!document.fullscreenEnabled)return void console.warn("fullscreen is blocked by the browser, see Game.fullscreenAllowed");an=!0,document.body.requestFullscreen().then((()=>{an=!1}),(()=>{sn=!0;let e=`Please ${Bt?"tap":"press any mouse or keyboard button"} to enter fullscreen.`,t=We("div",{class:"overlay"},[We("img",{style:"width: 185px; margin-bottom: 14px;",class:"pixel",alt:"icons of a mouse, keyboard, and fullscreen warning",src:"data:image/gif;base64,R0lGODdhJQAJAJAAAAAAAP///yH5BAkKAAAALAAAAAAlAAkAAAIzjB+ge2zrEFIJVHgxpJvW311Z6H2g1Wkph5rSuMFqY43ySrZenKOsGrP1gJGXMfQoIY0FADs="}),e]),n=()=>{document.body.requestFullscreen().catch((e=>{console.warn("DOM fullscreen fallback failed",e)})).then((()=>{an=!1,sn=!1,t.remove(),removeEventListener("keydown",n)}))};t.onclick=n,addEventListener("keydown",n),document.body.append(t)}))}}else an=!1,document.fullscreenElement&&document.exitFullscreen()},fps(){Jt<0?j(0):F(0,Jt)},"fps=(_)"(){let e=T(1);if(5===e)Jt=-1;else if(1===e){let e=R(1);Jt<=0?X("fps must be positive"):Jt=e}else X("fps must be Num or null")},cursor(){k(0,rn)},"cursor=(_)"(){let e=T(1);if(5===e)rn="default";else{if(6!==e)return void X("cursor must be null or a string");{let e=D(1);if(!cn.hasOwnProperty(e))return void X(`invalid cursor type "${e}"`);rn=e}}oe.style.cursor=cn[rn]||rn},"quit()"(){en=!0},"ready_()"(){tn=!0,nn&&(nn(),nn=null)},"print_(_,_,_)"(){if(6!==T(1)||1!==T(2)||1!==T(3))return void X("invalid args");F(0,Kt(P(1),Math.trunc(R(2)),Math.trunc(R(3)),on))},"setPrintColor_(_)"(){1===T(1)?on=R(1):X("color must be a Num")},"clear_(_,_,_)"(){for(let e=1;e<=3;e++)if(1!==T(e))return void X("colors must be numbers");let e=R(1),t=R(2),n=R(3);pt.clearColor(e,t,n,1),pt.clear(pt.COLOR_BUFFER_BIT)},"openURL(_)"(){if(6!==T(1))return void X("url must be a string");let e=D(1);open(e,"_blank","noreferrer")}});let cn={default:"",pointer:"",wait:"progress",hidden:"none"},ln=0;function dn(){var e;y(1),U("sock","Game",0),ln=v(0),e=z,y(3),N(0,ln),F(1,Ze),F(2,Ve),H(e||K)}function un(e){y(2),C(0);for(let t of e)F(1,t),M(0,-1,1)}r("sock","Screen",{sz_(){un([screen.width,screen.height])},sza_(){un([screen.availWidth,screen.availHeight])}});let fn=new Rt({attributes:{vertex:"vec3",color:"vec4"},varyings:{v_color:"lowp vec4"},vertUniforms:{mat:"mat3"},vert:["v_color = color;","vec3 tv = mat * vec3(vertex.x, vertex.y, 1.0);","gl_Position = vec4(tv.x, tv.y, vertex.z, 1.0);"],frag:"gl_FragColor = v_color;"});fn.needsCompilation();class hn extends class{constructor(){this._capacity=128,this._array=new ArrayBuffer(16*this._capacity),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=new Uint32Array(this._array),this._vertexCount=-1,this._vertexBuffer=pt.createBuffer(),this._vertexBufferCapacity=0}free(){pt.deleteBuffer(this._vertexBuffer),this._array=this._bytes=this._floats=this._ints=null}drawBatch(){}checkResize(e){if(this._vertexCount+e>this._capacity){if(console.log("expand vertex buffer"),this._capacity*=2,this._capacity>=1048575)throw Error("exceeded max batch capacity of 1048575, did you forget to call end()?");this._array=new ArrayBuffer(16*this._capacity);let e=new Uint32Array(this._array);e.set(this._ints),this._floats=new Float32Array(this._array),this._bytes=new Uint8Array(this._array),this._ints=e}}addVertex(e,t,n,r){let o=4*this._vertexCount;this._floats[o]=e,this._floats[o+1]=t,this._floats[o+2]=n,this._ints[o+3]=r,this._vertexCount++}inBatch(){return this._vertexCount>=0}begin(){if(this.inBatch())throw Error("already called begin()");this._vertexCount=0}end(){if(!this.inBatch())throw Error("not yet called begin()");this._vertexCount>0&&this.drawBatch(),this._vertexCount=-1}}{drawRect(e,t,n,r,o,i,a,s){this.drawQuad(e,t,e,r,n,t,n,r,o,i,a,s)}drawQuad(e,t,n,r,o,i,a,s,c,l,d,u){if(this.checkResize(4),d){let f=e*d[0]+t*d[2]+d[4],h=e*d[1]+t*d[3]+d[5],p=n*d[0]+r*d[2]+d[4],g=n*d[1]+r*d[3]+d[5],E=o*d[0]+i*d[2]+d[4],_=o*d[1]+i*d[3]+d[5],b=a*d[0]+s*d[2]+d[4],w=a*d[1]+s*d[3]+d[5],O=u?e+u[0]:(e+n)/2,y=u?t+u[1]:(t+r)/2,T=O-d[0]*O-d[2]*y,m=y-d[1]*O-d[3]*y;this.addVertex(f+T,h+m,c,l),this.addVertex(p+T,g+m,c,l),this.addVertex(E+T,_+m,c,l),this.addVertex(b+T,w+m,c,l)}else this.addVertex(e,t,c,l),this.addVertex(n,r,c,l),this.addVertex(o,i,c,l),this.addVertex(a,s,c,l)}drawBatch(){if(this._vertexCount<0)throw Error("have not called begin()");if(this._vertexCount>0){fn.use(),pt.bindBuffer(pt.ARRAY_BUFFER,this._vertexBuffer),this._vertexCount>this._vertexBufferCapacity?(this._vertexBufferCapacity=this._capacity,pt.bufferData(pt.ARRAY_BUFFER,this._array,pt.DYNAMIC_DRAW)):pt.bufferSubData(pt.ARRAY_BUFFER,0,this._ints.subarray(0,6*this._vertexCount));let e=fn.attributes.vertex,t=fn.attributes.color;pt.vertexAttribPointer(e,3,pt.FLOAT,!1,16,0),pt.enableVertexAttribArray(e),pt.vertexAttribPointer(t,4,pt.UNSIGNED_BYTE,!0,16,12),pt.enableVertexAttribArray(t),fn.setUniformMatrix3("mat",ht());let n=1.5*this._vertexCount;Dt(n),ie.quadInfo=`vertexCount=${this._vertexCount} indexCount=${n}`,pt.drawElements(pt.TRIANGLES,n,pt.UNSIGNED_SHORT,0),pt.disableVertexAttribArray(e),pt.disableVertexAttribArray(t)}this._vertexCount=-1}}let pn=null;r("sock","Quad",{"beginBatch()"(){pn||(pn=new hn),pn.inBatch()?X("batch already started"):pn.begin()},"endBatch()"(){pn||(pn=new hn),pn.inBatch()?pn.end():X("batch not yet started")},"draw(_,_,_,_,_)"(){for(let e=1;e<=5;e++)if(1!==T(e))return void X("args must be Nums");let e=R(1),t=R(2),n=R(3),r=R(4),o=R(5);pn||(pn=new hn);let i=!pn.inBatch();i&&pn.begin(),pn.drawRect(e,t,e+n,t+r,0,o),i&&pn.end()},"draw(_,_,_,_,_,_,_,_,_)"(){for(let e=1;e<=9;e++)if(1!==T(e))return void X("args must be Nums");let e=R(1),t=R(2),n=R(3),r=R(4),o=R(5),i=R(6),a=R(7),s=R(8),c=R(9);pn||(pn=new hn);let l=!pn.inBatch();l&&pn.begin(),pn.drawQuad(e,t,n,r,o,i,a,s,0,c),l&&pn.end()}});const gn="QWERTZ",En="AZERTY";let _n="QWERTY";(navigator.language||"en-US").includes("fr")&&(_n=En);let bn=0,wn=e=>{let t=e.code,n=e.key.toLowerCase();"KeyQ"===t?(bn++,"a"===n&&(_n=En,console.log("layout is "+_n+"?"))):"KeyA"===t?(bn++,"q"===n&&(_n=En,console.log("layout is "+_n+"?"))):"KeyW"===t?(bn++,"z"===n&&(_n=En,console.log("layout is "+_n+"?"))):"KeyZ"===t?(bn++,"w"===n&&(_n=En,console.log("layout is "+_n+"?"))):"KeyY"===t?(bn++,"z"===n&&(_n=gn,console.log("layout is "+_n+"?"))):"KeyZ"===t&&(bn++,"y"===n&&(_n=gn,console.log("layout is "+_n+"?"))),bn>=3&&removeEventListener("keydown",wn)};addEventListener("keydown",wn,{passive:!0});let On=We("input"),yn=We("form",{},[On]);function Tn(){yn.parentNode&&(yn.remove(),ot--,0===ot&&rt.remove())}On.placeholder="Text",yn.onsubmit=e=>{e.preventDefault(),Tn()},On.onblur=()=>{setTimeout((()=>{document.activeElement!==On&&Tn()}),1)},On.onkeydown=e=>{"Escape"===e.code&&Tn()},r("sock","Input",{"localize(_)"(){let e=T(1);if(5===e)return void j(0);if(6!==e)return void X("input ID must be a String");let t=D(1);"AZERTY"===_n?"Q"===t?t="A":"A"===t?t="Q":"Z"===t?t="W":"W"===t?t="Z":"M"===t?t=",":","===t?t=";":";"===t&&(t="M"):"QWERTZ"===_n&&("Z"===t?t="Y":"Y"===t&&(t="Z")),k(0,t)},"textBegin(_)"(){let e=T(1);if(5===e)On.type="text";else{if(6!==e)return void X("type must be a String");{let e=D(1);if("text"!==e&&"number"!==e&&"password"!==e)return void X(`invalid text type '${e}'`);On.type=e}}yn.className="text-form invisible",On.className="text",On.value="",yn.parentNode||(0===ot&&document.body.append(rt),ot++,rt).append(yn),(Bt||(On.focus(),document.activeElement!==On))&&(yn.className="text-form",yn.onclick=e=>{e.target===yn&&Tn()},On.className="text")},textDescription(){k(0,On.placeholder)},"textDescription=(_)"(){6===T(1)?On.placeholder=D(1):X("description must be String")},textIsActive(){I(0,document.activeElement===On)},textSelection(){if(document.activeElement===On){let e=On.selectionStart,t=On.selectionEnd;if("backward"===On.selectionDirection){let n=e;e=t,t=n}x(0,e,t,1,!0)}else x(0,0,0,1,!0)},textString(){k(0,On.value)}});let mn=0,Dn=new Set,Pn=Object.create(null),Rn=0,Mn=0,Sn=0,An=0,vn=0,Un=0,jn=0;function In(){Gn(),Fn()}function Fn(){y(4),N(0,mn),F(1,Rn),F(2,Mn),F(3,jn),H(ee)}function xn(e,t){t!==Pn[e]&&(Pn[e]=t,Dn.add(e))}function kn(e,t,n){xn(e,n<0?-n:0),xn(t,n>0?n:0)}function Nn(e,t){xn(Ln[e]||e,t)}const Ln=Object.assign(Object.create(null),{Backquote:"`",Minus:"-",Equal:"=",Comma:",",Period:".",Slash:"/",Semicolon:";",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\"});for(let e=0;e<=25;e++){let t=String.fromCharCode(65+e);Ln["Key"+t]=t}for(let e=0;e<=9;e++)Ln["Digit"+e]=String(e);function Cn(e,t){for(let n=0;n<e.length;n++){let r=e[n],o=r.identifier,i=(r.clientX-Ke)/tt,a=(r.clientY-$e)/tt,s=r.force;0===s&&(s=t?1:0),y(6),N(0,mn),F(1,o),I(2,t),F(3,s),F(4,i),F(5,a),H(te)}}function Hn(e,t){vn=e,Un=t,Gn()}function Gn(){Sn=(vn-Ke)/tt,An=(Un-$e)/tt,Rn=Math.floor(Sn),Mn=Math.floor(An)}function Xn(e,t){let n;0===e?n="Left":1===e?n="Middle":2===e&&(n="Right"),xn("Mouse"+(n||e),t)}function Qn(e){return JSON.parse(e,((e,t)=>{if(Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&""===t[0][0]){let e=t[0].slice(1);if(t=t[1],"Num"===e)return"infinity"===t?1/0:"nan"===t?NaN:Number(t);if("Map"===e){let e=new Map;for(let n=1;n<t.length;n+=2)e.set(t[n-1],t[n]);return e}if("Vec"===e)return{x:t[0],y:t[1]};if("Color"===e){let e=new Uint8Array(new Uint32Array([t]).buffer);return{r:e[0],g:e[1],b:e[2],a:e[3]}}if("Buffer"===e){let e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}}return t}))}function Bn(e){return JSON.stringify(Yn(e))}function Yn(e){if(null==e)return null;if("number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map((e=>Yn(e)));if(Object.getPrototypeOf(e)===Object.prototype){let t={};for(let n in e)t[n]=Yn(e[n]);return t}if(e instanceof Uint8Array||e instanceof Uint8ClampedArray){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return["Array",btoa(t)]}return null}function Wn(e){let t=T(e);return 5===t?[]:6===t?Qn(D(e)):(X("expected string or null for JS args"),!1)}addEventListener("keydown",(e=>{e.repeat||Nn(e.code,1)}),{passive:!0}),addEventListener("keyup",(e=>{Nn(e.code,0)}),{passive:!0}),addEventListener("mousemove",(e=>{Hn(e.x,e.y)})),addEventListener("wheel",(e=>{e.preventDefault(),e.stopPropagation(),jn+=e.deltaY,kn("MouseWheelUp","MouseWheelDown",Math.sign(e.deltaY))}),{passive:!1}),addEventListener("mousedown",(e=>{Xn(e.button,1)})),addEventListener("mouseup",(e=>{Xn(e.button,0)})),oe.addEventListener("contextmenu",(e=>{e.preventDefault()})),oe.addEventListener("touchstart",(e=>{if(e.preventDefault(),Cn(e.changedTouches,!0),e.changedTouches.length===e.touches.length){let t=e.changedTouches[0];xn("MouseLeft",1),Hn(t.clientX,t.clientY)}}),{passive:!1}),oe.addEventListener("touchmove",(e=>{e.preventDefault(),Cn(e.changedTouches,!0);let t=e.changedTouches[0];Hn(t.clientX,t.clientY)}),{passive:!1}),oe.addEventListener("touchend",(e=>{e.preventDefault(),Cn(e.changedTouches,!1),0===e.touches.length&&xn("MouseLeft",0)}),{passive:!1}),addEventListener("gamepadconnected",(e=>{console.info("Gamepad: "+e.gamepad.id)})),r("sock","JavaScript_",{"eval_(_,_,_,_)"(){if(6!==T(4))return void X("script must be a string");let e=D(4),t=Wn(2);if(!t)return;let n=Wn(3);if(!n)return;if(!(r=n,Array.isArray(r)&&r.every((e=>"string"==typeof e))&&Array.isArray(t)))return void X("arg values and names must be Lists, arg names must be a String List");var r;if(n.length!==t.length)return void X("arg names and values must have same length");let o;if(5===T(1))o=null;else{if(N(2,ae),!A(1,2))return void X("first arg must be null or Promise");o=v(1)}let i,a=null==o,s=n.concat(e);try{i=(a?new Function(...s):new Zn(...s)).apply(null,t)}catch(e){return void X("JavaScript error: "+e)}a?k(0,Bn(i)):(se(o,i.then((e=>Bn(e)))),N(0,o))}});let Zn=Object.getPrototypeOf((async function(){})).constructor;function Vn(e){return"sock"===e&&(e="sock_web"),"/"===e[0]&&(e="assets"+e),e+".wren"}r("sock","Platform",{os(){k(0,Ht)},browser(){k(0,Gt)}});let zn=!1,qn="_terminal";function Kn(e){zn||(zn=!0,w(qn,"var r__"));let t=!1;if((e=e.trim()).includes("\n"))t=!$n(e);else if(e.startsWith("var ")){let t=/var\s+([_a-zA-Z][_a-zA-Z0-9]*)/.exec(e);if(t){let n=t[1];if(O(qn,n)){if(!e.includes("="))return;e=e.slice(4)}return 0===w(qn,e)?Jn(n):void 0}}else if(!$n(e)){t=!0;let n=/^([_a-zA-Z][_a-zA-Z0-9]*)\s*=/.exec(e)||/^([_a-zA-Z][_a-zA-Z0-9]*)$/.exec(e);if(n){let e=n[1];O(qn,e)||e[0]===e[0].toLowerCase()&&w(qn,"var "+e)}}if(t){let t=w(qn,`r__=JSON.toString(${e})`);if(0===t)return Jn("r__",!0);if(2===t)return"[error]"}return 0===w(qn,e)?"[success]":"[error]"}function $n(e){return e.startsWith("var ")||e.startsWith("if ")||e.startsWith("if(")||e.startsWith("for ")||e.startsWith("for(")||e.startsWith("while ")||e.startsWith("while(")||e.startsWith("import ")||e.startsWith("class ")}function Jn(e,t=!1){if(y(1),U(qn,e,0),0===H(J)){let e=D(0);return t?Qn(e):e}return"[error]"}let er,tr=null,nr=null,rr=0,or=0,ir=!1,ar=document.getElementById("play-button");ar.tabIndex=0;let sr=!!ie.messaging,cr=[];var lr;function dr(){let e=performance.now()/1e3;null==nr&&(nr=e),e-=nr;let t=null==tr?0:Math.min(4/60,e-tr);if(tr=e,tn&&!sn&&(Jt?or-=t:or=0,!Jt||or<=0)){if(Jt&&(or+=1/Jt),function(e,t){y(3),N(0,re),F(1,e),F(2,t),H(K)}(e,e-rr),rr=e,function(){if(navigator.getGamepads)for(let e of navigator.getGamepads())if(null!=e){let t=e.buttons,n=e.axes;xn("FaceDown",t[0].value),xn("FaceRight",t[1].value),xn("FaceLeft",t[2].value),xn("FaceUp",t[3].value),xn("LeftBumper",t[4].value),xn("RightBumper",t[5].value),xn("LeftTrigger",t[6].value),xn("RightTrigger",t[7].value),xn("Select",t[8].value),xn("Start",t[9].value),xn("LeftStick",t[10].value),xn("RightStick",t[11].value),xn("DPadUp",t[12].value),xn("DPadDown",t[13].value),xn("DPadLeft",t[14].value),xn("DPadRight",t[15].value),xn("Guide",t[16].value),kn("LeftStickLeft","LeftStickRight",n[0]),kn("LeftStickUp","LeftStickDown",n[1]),kn("RightStickLeft","RightStickRight",n[2]),kn("RightStickUp","RightStickDown",n[3])}Fn();for(let e of Dn)y(3),N(0,mn),k(1,e),F(2,Pn[e]),H(K);Dn.clear(),jn=0}(),function(){if(it)return it=!1,st(),!0}()&&(In(),qt.updateResolution()),qt.bind(),0!==(tn=!1,y(1),N(0,ln),H(q))&&(ir=!0),!tn&&!ir&&!en)return console.log("awaiting update completion..."),void new Promise((e=>{nn=e})).then((()=>{ur(),fr()}));ur()}fr()}function ur(){qt.draw()}function fr(){ir||en?(oe.classList.add("quit"),hr()):requestAnimationFrame(dr)}function hr(e){fe&&(fe.close(),fe=null,he=null),e?function(e){console.error(e),document.body.append(We("div",{class:"error"},[We("pre",{class:"message"},e)]))}(e):B&&function(){if(0===Q.length)return void document.body.append(We("div",{class:"error"},[We("pre",{class:"message"},W),We("pre",{style:"padding:.6em"},"[no stack trace]")]));let e=We("pre",{class:"message"},We("div",{},Y));for(let d=0;d<Q.length;d++){let[u,f,h]=Q[d],p="/"===u[0]?u.slice(1):u,g=We("div",{},[h?`  ${h} at `:"  at ",We("a",{href:Vn(u),onclick:E},p+":"+f)]);function E(e){e.preventDefault(),l(d)}e.append(g)}let t,n,r,o,i,a,s,c=We("div",{class:"error"},e);async function l(e){let[l,d]=Q[e];if(t!==l){n&&n.remove(),r&&r.remove();let e=Vn(l),a=await(await fetch(e)).text();t=l;let s=a.split(/\r\n|\n/);if("sock"===l){let e=0;s=s.map((t=>{"}"===t[0]&&e--;let n="\t".repeat(e)+t;return"}"!==t[0]&&t.endsWith("}")&&e--,t.includes("{")&&e++,n}))}o=[],i=[];for(let e=0;e<s.length;e++)o.push(We("div",{},1+e)),i.push(We("div",{},s[e]||""));c.append(r=We("div",{class:"code-name"},l+".wren"),n=We("div",{class:"code"},[We("pre",{class:"code-lines"},o),We("pre",{class:"code-source"},i)]))}a&&(a.className=s.className=""),a=i[d-1],s=o[d-1],a&&(a.className=s.className="code-target",s.scrollIntoView({block:"center"}))}document.body.append(c),l(0)}()}sr?(addEventListener("message",(e=>{let t=e.data;if(t&&"object"==typeof t){let e=t.type;if(e){let n=t.data,r=[],o=[];for(let t of cr)t.type===e?o.push(t):r.push(t);cr=r;for(let e of o)e(n)}}})),ar.remove(),lr="script",er=new Promise((e=>{e.type=lr,cr.push(e)})),parent!==window&&parent.postMessage({type:"ready"})):er=l("assets/main.wren","arraybuffer"),async function(){let e=l("sock_web.wren","arraybuffer");await b();let t=async function(){let e=h.ccall("sock_font","number"),t=URL.createObjectURL(new Blob([p().subarray(e,e+750)],{type:"image/gif"}));try{let e=await d(t);Vt=new vt(pt.NEAREST,pt.CLAMP_TO_EDGE),Vt.load(e)}finally{URL.revokeObjectURL(t)}}();ne("call()"),ne("transfer(_)"),ne("path"),ne("init_()"),z=ne("init_(_,_)"),ne("load_()"),ne("load_(_)"),ne("loaded_(_,_,_)"),q=ne("update_()"),ne("update_(_)"),K=ne("update_(_,_)"),ne("update_(_,_,_)"),$=ne("resolve_(_,_)"),J=ne("toString"),ee=ne("updateMouse_(_,_,_)"),te=ne("updateTouch_(_,_,_,_,_)"),st(),await t;let n=w("sock",await e);if(0!==n)return void hr();var r;r="sock",h.ccall("wrenAddImplicitImportModule",null,["number","string"],[E,r]),y(1),U("sock","Time",0),re=v(0),y(1),U("sock","Promise",0),ae=v(0),y(1),U("sock","Asset",0),v(0),dn(),y(1),U("sock","Input",0),mn=v(0),In(),y(1),U("sock","Sprite",0),Ft=v(0),y(1),U("sock","Audio",0),Ee=v(0),U("sock","Voice",0),be=v(0),U("sock","AudioBus",0),_e=v(0),await function(){return sr?(e(),Promise.resolve()):new Promise((t=>{function n(){e(),t()}ar.onclick=n}));function e(){fe=new AudioContext,ie.audio=fe,he=new GainNode(fe,{gain:.5}),he.connect(fe.destination)}}(),ar.remove(),qt.updateResolution(),Rt.compileAll(),we(),n=w("/main",await er),0===n?await function(e,t,n){let r=0;return new Promise((o=>{let i=setInterval((()=>{r+=e,n()&&(clearInterval(i),o(!0)),r>=t&&(clearInterval(i),o(!1))}),e)}))}(100,6e4,(()=>tn||B))?B?hr():requestAnimationFrame(dr):hr("took to long for Game.begin() to be called..."):hr()}(),self.wren=function(...e){let t=e[0];if("string"==typeof t)return Kn(t);if(t.raw&&t.map){let e=t.raw,n="";for(let r=0;r<e.length;r++)r>0&&(n+=t[r]),n+=e[r];return Kn(n)}throw console.error(t),TypeError("call like this: wren`script`")}}();
//# sourceMappingURL=sock.js.map
