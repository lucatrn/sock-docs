{"version":3,"file":"main.js","sources":["../src/html.js","../src/persistence.js","../src/theme.js","../src/messaging.js","../src/docs.js","../src/navigation.js","../src/main.js"],"sourcesContent":["\r\n/**\r\n * @param {string} id\r\n * @returns {HTMLElement}\r\n */\r\nexport function getElement(id) {\r\n\treturn document.getElementById(id);\r\n}\r\n\r\n/**\r\n * \r\n * @param {Element} element\r\n * @param {string} className\r\n * @param {boolean} enabled\r\n */\r\nexport function setElementClass(element, className, enabled) {\r\n\tif (enabled) {\r\n\t\telement.classList.add(className);\r\n\t} else {\r\n\t\telement.classList.remove(className);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {K} tag \r\n * @param {Record<string, any>} [attributes] \r\n * @param {any} [nodes]\r\n * @returns {HTMLElementTagNameMap[K]}\r\n * @template {keyof HTMLElementTagNameMap} K\r\n */\r\nexport function createElement(tag, attributes, nodes) {\r\n\tlet element = document.createElement(tag);\r\n\r\n\tif (attributes) {\r\n\t\twithAttributes(element, attributes);\r\n\t}\r\n\r\n\tappendNodes(element, nodes);\r\n\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * @param {T} element\r\n * @param {Record<string, any>} attributes \r\n * @returns {T}\r\n * @template {Element} T\r\n */\r\nexport function withAttributes(element, attributes) {\r\n\tfor (let name in attributes) {\r\n\t\tlet value = attributes[name];\r\n\r\n\t\tif (name.startsWith(\"on\")) {\r\n\t\t\telement[name] = value;\r\n\t\t} else {\r\n\t\t\tif (value === true) {\r\n\t\t\t\telement.setAttribute(name, \"\");\r\n\t\t\t} else if (value == null || value === false) {\r\n\t\t\t\t// Ignore.\r\n\t\t\t} else {\r\n\t\t\t\telement.setAttribute(name, value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent \r\n * @param {Node|Node[]} nodes \r\n */\r\nexport function appendNodes(parent, nodes) {\r\n\tif (nodes) {\r\n\t\tif (Array.isArray(nodes)) {\r\n\t\t\tfor (let node of nodes) {\r\n\t\t\t\tparent.append(node);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tparent.append(nodes);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n */\r\nexport function clearElement(el) {\r\n\tel.innerHTML = \"\";\r\n}\r\n","\r\nlet LOCAL_STORAGE_KEY = \"sock_docs\";\r\n\r\n/**\r\n * @type {Partial<Persistence>}\r\n */\r\nlet defaults = {\r\n};\r\n\r\n/** @type {Persistence} */\r\nlet curr;\r\n\r\nlet savedJSON = localStorage.getItem(LOCAL_STORAGE_KEY);\r\nif (savedJSON) {\r\n\ttry {\r\n\t\tcurr = JSON.parse(savedJSON);\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t}\r\n}\r\n\r\ncurr = Object.assign({}, defaults, curr);\r\n\r\n/**\r\n * @type {Readonly<Persistence>}\r\n */\r\nexport let persistence = curr;\r\n\r\n/**\r\n * @param {Partial<Persistence>} p \r\n */\r\nexport function updatePersistence(p) {\r\n\tfor (let key in p) {\r\n\t\tcurr[key] = p[key];\r\n\t}\r\n\r\n\tlocalStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(curr));\r\n}\r\n\r\n/**\r\n * @typedef {object} Persistence\r\n * @property {boolean} isLight\r\n */\r\n","import { getElement, setElementClass } from \"./html.js\";\r\nimport { persistence, updatePersistence } from \"./persistence.js\";\r\n\r\nlet iconLight = getElement(\"theme-toggle-icon-light\");\r\nlet iconDark = getElement(\"theme-toggle-icon-dark\");\r\n\r\nlet isLightTheme = false;\r\n\r\ngetElement(\"theme-toggle\").onclick = () => {\r\n\tsetIsLightTheme(!isLightTheme);\r\n\r\n\tupdatePersistence({ isLight: isLightTheme });\r\n};\r\n\r\n/**\r\n * @param {boolean} isLight\r\n */\r\nfunction setIsLightTheme(isLight) {\r\n\tisLightTheme = isLight;\r\n\r\n\tsetElementClass(iconLight, \"hidden\", !isLight);\r\n\tsetElementClass(iconDark, \"hidden\", isLight);\r\n\t\r\n\tsetElementClass(document.documentElement, \"light\", isLight);\r\n\tsetElementClass(document.documentElement, \"dark\", !isLight);\r\n}\r\n\r\nsetIsLightTheme(persistence.isLight ?? document.documentElement.classList.contains(\"light\"));\r\n","\r\n/** @type {(((arg: any) => void) & { type: string, iframe: HTMLIFrameElement })[]} */\r\nlet waitingMessages  = [];\r\n\r\naddEventListener(\"message\", (event) => {\r\n\tlet data = event.data;\r\n\tif (data && typeof data === \"object\") {\r\n\t\tlet msgType = data.type;\r\n\t\tif (msgType) {\r\n\t\t\tlet arg = data.data;\r\n\r\n\t\t\t// Pull out functions with the corresponding type.\r\n\t\t\tlet stillWaiting = [];\r\n\t\t\tlet callNow = [];\r\n\t\t\tfor (let f of waitingMessages) {\r\n\t\t\t\tif (f.type === msgType && (!f.iframe || f.iframe.contentWindow === event.source)) {\r\n\t\t\t\t\tcallNow.push(f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstillWaiting.push(f);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twaitingMessages = stillWaiting;\r\n\r\n\t\t\t// Call matching functions.\r\n\t\t\tfor (let f of callNow) {\r\n\t\t\t\tf(arg);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * @param {string} type\r\n * @param {HTMLIFrameElement} [iframe]\r\n * @returns {Promise<any>}\r\n */\r\nexport function waitForMessage(type, iframe) {\r\n\treturn new Promise(/** @param {((arg: any) => void) & { type: string, iframe: HTMLIFrameElement }} resolve */(resolve) => {\r\n\t\tresolve.type = type;\r\n\t\tresolve.iframe = iframe;\r\n\t\twaitingMessages.push(resolve);\r\n\t});\r\n}\r\n","import { createElement } from \"./html.js\";\r\nimport { waitForMessage } from \"./messaging.js\";\r\n\r\nasync function loadDocs() {\r\n\tlet response = await fetch(\"docs.html\");\r\n\tlet text = await response.text();\r\n\r\n\tlet tempDiv = createElement(\"div\");\r\n\ttempDiv.innerHTML = \"<template>\" + text + \"</template>\";\r\n\r\n\tlet template = /** @type {HTMLTemplateElement} */(tempDiv.firstChild);\r\n\r\n\tlet html = template.content;\r\n\r\n\tsections = /** @type {HTMLElement[]} */(Array.from(html.children)).map(e => new Section(e));\r\n\t\r\n\tconsole.log(sections);\r\n\r\n\treturn sections;\r\n}\r\n\r\nclass Section {\r\n\t/**\r\n\t * @param {HTMLElement} baseElement\r\n\t */\r\n\tconstructor(baseElement) {\r\n\t\tthis.summary = baseElement.dataset.summary;\r\n\r\n\t\tlet h2s = baseElement.querySelectorAll(\"h2\");\r\n\r\n\t\t/**\r\n\t\t * @type {Signature[]}\r\n\t\t */\r\n\t\tthis.signatures = Array.from(h2s).map((h2) => {\r\n\t\t\tlet title = h2.textContent;\r\n\t\t\tlet type = h2.dataset.type;\r\n\t\t\tlet superClass = h2.dataset.super;\r\n\t\t\th2.remove();\r\n\r\n\t\t\tif (type) {\r\n\t\t\t\treturn new InfoSignature(title, type);\r\n\t\t\t} else {\r\n\t\t\t\treturn compileSignature(title, superClass);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tlet tag = baseElement.dataset.tag;\r\n\t\tif (tag) {\r\n\t\t\t/** @type {string[]} */\r\n\t\t\tthis.tags = tag.split(/\\s+/);\r\n\t\t} else {\r\n\t\t\tthis.tags = [];\r\n\t\t}\r\n\r\n\t\t/** @type {VirtualNode[]} */\r\n\t\tthis.nodes = [];\r\n\r\n\t\tthis.fromHtml(baseElement, this.nodes);\r\n\r\n\t\tif (!this.summary) {\r\n\t\t\tlet p = /** @type {HTMLParagraphElement} */(this.nodes.find(el => el instanceof HTMLParagraphElement));\r\n\t\t\tif (p) {\r\n\t\t\t\tthis.summary = p.textContent;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * @param {ParentNode} parentNode\r\n\t * @param {VirtualNode[]} parent\r\n\t */\r\n\tfromHtml(parentNode, parent) {\r\n\t\tfor (let child of /** @type {HTMLElement[]} */(Array.from(parentNode.children))) {\r\n\t\t\tif (child instanceof HTMLScriptElement) {\r\n\t\t\t\tlet example = Example.fromElement(child);\r\n\r\n\t\t\t\tparent.push(example);\r\n\t\t\t} else if (child instanceof HTMLDetailsElement) {\r\n\t\t\t\tlet detailNodes = [];\r\n\t\t\t\tthis.fromHtml(child, detailNodes);\r\n\t\t\t\tlet details = new VirtualElement(\"details\", {}, detailNodes);\r\n\t\t\t\t\r\n\t\t\t\tparent.push(details);\r\n\t\t\t} else {\r\n\t\t\t\tif (child instanceof HTMLPreElement) {\r\n\t\t\t\t\tchild.textContent = normalizeCode(child.textContent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparent.push(child);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet section = createElement(\"section\");\r\n\r\n\t\tfor (let signature of this.signatures) {\r\n\t\t\tlet h2 = createElement(\"h2\");\r\n\t\t\tsignature.toHTML(h2);\r\n\t\t\tsection.append(h2);\r\n\t\t}\r\n\r\n\t\tinstantiateVirtualNodes(section, this.nodes);\r\n\r\n\t\tparent.append(section);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.signatures.some((signature) => signature && signature.matchesTitle(title));\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} search should be lowercase\r\n\t * @returns {number}\r\n\t */\r\n\tsearchScore(search) {\r\n\t\tfor (let signature of this.signatures) {\r\n\t\t\tfor (let keyword of signature.keywords) {\r\n\t\t\t\tif (keyword.includes(search)) return 5;\r\n\t\t\t}\r\n\r\n\t\t\tif (signature.signature.toLowerCase().includes(search)) return 4;\r\n\t\t}\r\n\r\n\t\tfor (let tag of this.tags) {\r\n\t\t\tif (tag === search) return 3;\r\n\t\t\tif (tag.includes(search)) return 2;\r\n\t\t}\r\n\r\n\t\t// for (let element of this.htmlTemplateElements) {\r\n\t\t// \tif (element.textContent.includes(search)) return 1;\r\n\t\t// }\r\n\r\n\t\treturn 0;\r\n\t}\r\n}\r\n\r\nclass VirtualElement {\r\n\t/**\r\n\t * @param {keyof HTMLElementTagNameMap} tag\r\n\t * @param {Record<string, string>} [attributes] \r\n\t * @param {VirtualNode[]} [nodes]\r\n\t */\r\n\tconstructor(tag, attributes, nodes) {\r\n\t\tthis.tag = tag;\r\n\t\tthis.attributes = attributes || {};\r\n\t\tthis.nodes = nodes || [];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet element = createElement(this.tag, this.attributes);\r\n\r\n\t\tinstantiateVirtualNodes(element, this.nodes);\r\n\r\n\t\tparent.append(element);\r\n\t}\r\n}\r\n\r\nclass Example {\r\n\t/**\r\n\t * @param {string} code\r\n\t * @param {string} script\r\n\t */\r\n\tconstructor(code, script) {\r\n\t\tthis.code = code;\r\n\t\tthis.script = script;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateElement(\"pre\", {}, this.code)\r\n\t\t);\r\n\r\n\t\tlet runButton = createElement(\"button\", { class: \"accent-button\" });\r\n\t\trunButton.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"accent-button-icon\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>Run Example';\r\n\r\n\t\tparent.append(runButton);\r\n\r\n\t\trunButton.onclick = () => {\r\n\t\t\tlet iframe = createElement(\"iframe\", { src: \"player\", width: \"100%\", height: \"100%\" });\r\n\t\t\t\r\n\t\t\tlet closeButton = createElement(\"button\", { class: \"player-stop hidden\" });\r\n\t\t\tcloseButton.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#fff\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"player-stop-icon\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>';\r\n\r\n\t\t\tlet player = createElement(\"div\", { class: \"player\"}, [\r\n\t\t\t\tiframe,\r\n\t\t\t\tcloseButton,\r\n\t\t\t]);\r\n\r\n\t\t\trunButton.replaceWith(player);\r\n\r\n\t\t\t// Send script once the iframe is ready.\r\n\t\t\twaitForMessage(\"ready\", iframe).then(() => {\r\n\t\t\t\tiframe.contentWindow.postMessage({ type: \"script\", data: this.script });\r\n\r\n\t\t\t\t// Handle stopping.\r\n\t\t\t\tcloseButton.classList.remove(\"hidden\");\r\n\t\t\t\tcloseButton.onclick = () => {\r\n\t\t\t\t\tiframe.src = \"about:blank\";\r\n\t\t\t\t\tiframe = null;\r\n\t\t\t\t\tplayer.replaceWith(runButton);\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {HTMLScriptElement} e\r\n\t */\r\n\tstatic fromElement(e) {\r\n\t\tlet code = normalizeCode(e.text);\r\n\t\tlet tags = e.dataset.tag?.split(/\\s+/) ?? [];\r\n\r\n\t\tlet script = code;\r\n\t\tif (!code.includes(\"Game.begin\") && !tags.includes(\"noloop\")) {\r\n\t\t\tscript = \"Game.begin {\\n\";\r\n\t\t\tif (!tags.includes(\"noclear\")) script += \"Game.clear()\\n\";\r\n\t\t\tscript += code + \"\\n\";\r\n\t\t\tif (tags.includes(\"once\")) script += \"Game.quit()\\n\";\r\n\t\t\tscript += \"}\";\r\n\t\t}\r\n\r\n\t\treturn new Example(code, script);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} rawCode\r\n */\r\nfunction normalizeCode(rawCode) {\r\n\twhile (rawCode[0] === \"\\n\" || rawCode[0] === \"\\r\") {\r\n\t\trawCode = rawCode.slice(1);\r\n\t}\r\n\r\n\tlet result = /^\\s+/.exec(rawCode);\r\n\t\r\n\tlet code;\r\n\tif (result) {\r\n\t\tcode = (\"\\n\" + rawCode).replaceAll(\"\\n\" + result[0], \"\\n\");\r\n\t} else {\r\n\t\tcode = rawCode;\r\n\t}\r\n\r\n\tcode = code.trim();\r\n\r\n\treturn code;\r\n}\r\n\r\n\r\nlet CLS_CLASS = \"sg-class\";\r\nlet CLS_PROPERTY = \"sg-property\";\r\nlet CLS_PARAMETER = \"sg-parameter\";\r\nlet CLS_TYPE = \"sg-type\";\r\n\r\nclass Signature {\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateElement(\"a\", { href: \"#\" + this.signature, class: \"permalink\" }, \"#\"),\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.signature === title;\r\n\t}\r\n}\r\n\r\nSignature.prototype.signature = \"\";\r\n\r\n/** @type {string[]} */\r\nSignature.prototype.keywords = [];\r\n\r\n/**\r\n * @param {string} type\r\n */\r\nfunction compoundTypeToHTML(type) {\r\n\tlet r = type.split(/([a-zA-Z]+)/);\r\n\r\n\tlet parent = createElement(\"span\", { class: CLS_TYPE });\r\n\r\n\tr.forEach((part, i) => {\r\n\t\tif (i % 2 === 0) {\r\n\t\t\tparent.append(part);\r\n\t\t} else {\r\n\t\t\tparent.append(createAPILinkText(part, part));\r\n\t\t}\r\n\t});\r\n\r\n\treturn parent;\r\n}\r\n\r\n/**\r\n * @param {string} text\r\n * @param {string} title\r\n * @param {string} [className]\r\n */\r\nfunction createAPILinkText(text, title, className) {\r\n\tif (title === \"this\") {\r\n\t\treturn createElement(\"span\", { class: CLS_TYPE }, text);\r\n\t}\r\n\r\n\tlet fullClass = \"no-underline\";\r\n\tif (className) {\r\n\t\tfullClass += \" \" + className;\r\n\t}\r\n\r\n\tif (title === \"null\") {\r\n\t\ttitle = \"Null\";\r\n\t}\r\n\r\n\tlet a = createElement(\"a\", { class: fullClass, href: \"#\" + title }, text);\r\n\r\n\tlet section = sections.find(section => section.matchesTitle(title));\r\n\tif (section && section.summary) {\r\n\t\ta.title = section.summary;\r\n\t}\r\n\r\n\treturn a;\r\n}\r\n\r\n\r\nclass InfoSignature extends Signature {\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {string} type\r\n\t */\r\n\tconstructor(name, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = name;\r\n\t\tthis.keywords = [ name.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet cls = \"\";\r\n\t\tif (this.type === \"type\") {\r\n\t\t\tcls = CLS_TYPE;\r\n\t\t}\r\n\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.name, this.name, cls)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ClassSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {string|null} superClass\r\n\t */\r\n\tconstructor(className, superClass) {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = className;\r\n\t\tthis.superClass = superClass;\r\n\t\tthis.signature = className;\r\n\t\tthis.keywords = [ className.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.name, this.name, CLS_CLASS)\r\n\t\t);\r\n\r\n\t\tif (this.superClass) {\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { style: \"opacity: 0.6; margin-left: 0.2em;\" }, [\r\n\t\t\t\t\t\" is \",\r\n\t\t\t\t\tcreateAPILinkText(this.superClass, this.superClass, CLS_CLASS)\r\n\t\t\t\t])\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass PrefixOperatorSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {string} operator\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, operator, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = className;\r\n\t\tthis.operator = operator;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = operator + uncapitalize(className);\r\n\t\tthis.keywords = [ className.toLowerCase(), operator ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.className === title || this.operator === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.operator, this.signature, CLS_TYPE),\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className), this.className, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tif (this.type) {\r\n\t\t\tparent.append(\r\n\t\t\t\t\": \",\r\n\t\t\t\tcompoundTypeToHTML(this.type),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass InfixOperatorSignature extends Signature {\r\n\t/**\r\n\t * @param {string} cls1\r\n\t * @param {string} cls2\r\n\t * @param {string} returnType\r\n\t * @param {string} operator\r\n\t */\r\n\tconstructor(cls1, cls2, returnType, operator) {\r\n\t\tsuper();\r\n\r\n\t\tthis.className1 = cls1;\r\n\t\tthis.className2 = cls2;\r\n\t\tthis.returnType = returnType;\r\n\t\tthis.operator = operator;\r\n\t\tthis.signature = uncapitalize(cls1) + operator + uncapitalize(cls2);\r\n\t\tthis.keywords = [ cls1.toLowerCase(), cls2.toLowerCase(), operator ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.className1 === title || this.className2 === title || this.operator === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className1), this.className1, CLS_CLASS),\r\n\t\t\t\" \" + this.operator + \" \",\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className2), this.className2, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tif (this.returnType) {\r\n\t\t\tparent.append(\r\n\t\t\t\t\" â‡’ \",\r\n\t\t\t\tcompoundTypeToHTML(this.returnType),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} className\r\n * @param {boolean} isStatic \r\n */\r\nfunction correctClassCase(className, isStatic) {\r\n\treturn isStatic ? className : uncapitalize(className);\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent\r\n * @param {string} className\r\n * @param {boolean} isStatic\r\n * @param {string} methodName\r\n * @param {string} signature\r\n */\r\nfunction addClassAndMethodNameSignature(parent, className, isStatic, methodName, signature) {\r\n\tparent.append(\r\n\t\tcreateAPILinkText(correctClassCase(className, isStatic), className, CLS_CLASS),\r\n\t\t\".\",\r\n\t\tmethodName,\r\n\t);\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent\r\n * @param {string|null} type\r\n */\r\nfunction addReturnType(parent, type) {\r\n\tif (type) {\r\n\t\tparent.append(\r\n\t\t\t\": \",\r\n\t\t\tcompoundTypeToHTML(type),\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass PropertySignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {string} propertyName\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, isStatic, propertyName, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.property = propertyName;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \".\" + propertyName;\r\n\t\tthis.keywords = [ className.toLowerCase(), propertyName.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\taddClassAndMethodNameSignature(parent, this.class, this.isStatic, this.property, this.signature);\r\n\t\taddReturnType(parent, this.type);\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass MethodSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {string} methodName\r\n\t * @param {Parameter[]} parameters\r\n\t * @param {string|null} returnType\r\n\t */\r\n\tconstructor(className, isStatic, methodName, parameters, returnType) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.method = methodName;\r\n\t\tthis.parameters = parameters;\r\n\t\tthis.returnType = returnType;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \".\" + methodName + \"(\" + parameters.filter(p => !p.name.endsWith(\"...\")).map(() => \"_\").join(\",\") + \")\";\r\n\t\tthis.keywords = [ className.toLowerCase(), methodName.toLowerCase() ];\r\n\t\tfor (let param of parameters) {\r\n\t\t\tthis.keywords.push(param.name.toLowerCase());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\taddClassAndMethodNameSignature(parent, this.class, this.isStatic, this.method, this.signature);\r\n\r\n\t\tparent.append(\"(\");\r\n\r\n\t\tthis.parameters.forEach((param, i) => {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tparent.append(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { class: CLS_PARAMETER }, param.name),\r\n\t\t\t);\r\n\r\n\t\t\tif (param.type) {\r\n\t\t\t\tparent.append(\r\n\t\t\t\t\t\": \",\r\n\t\t\t\t\tcompoundTypeToHTML(param.type),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparent.append(\")\");\r\n\r\n\t\taddReturnType(parent, this.returnType);\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass SubscriptSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {boolean} isSetter\r\n\t * @param {Parameter[]} parameters\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, isStatic, isSetter, parameters, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.isSetter = isSetter;\r\n\t\tthis.parameters = parameters;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \"[\" + parameters.map(() => \"_\").join(\",\") + \"]\";\r\n\t\tif (isSetter) {\r\n\t\t\tthis.signature += \"=(_)\";\r\n\t\t}\r\n\t\tthis.keywords = [ className.toLowerCase() ];\r\n\t\tfor (let param of parameters) {\r\n\t\t\tthis.keywords.push(param.name.toLowerCase());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(correctClassCase(this.class, this.isStatic), this.class, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tparent.append(\"[\");\r\n\r\n\t\tthis.parameters.forEach((param, i) => {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tparent.append(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { class: CLS_PARAMETER }, param.name),\r\n\t\t\t);\r\n\r\n\t\t\tif (param.type) {\r\n\t\t\t\tparent.append(\r\n\t\t\t\t\t\": \",\r\n\t\t\t\t\tcompoundTypeToHTML(param.type),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparent.append(this.isSetter ? \"] = \" : \"]: \");\r\n\r\n\t\tparent.append(compoundTypeToHTML(this.type || \"any\"));\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass Parameter {\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {string} type\r\n\t */\r\n\tconstructor(name, type) {\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n * @param {string|null} superClass\r\n * @returns {Signature}\r\n */\r\nfunction compileSignature(s, superClass) {\r\n\tif (/^[a-zA-Z0-9]+$/.test(s)) {\r\n\t\treturn new ClassSignature(s, superClass);\r\n\t}\r\n\r\n\tlet execOperator = /^([^ a-zA-Z0-9]+) ?([a-zA-Z0-9]+)/.exec(s);\r\n\tif (execOperator) {\r\n\t\tlet operator = execOperator[1];\r\n\t\tlet cls = capitalize(execOperator[2]);\r\n\r\n\t\ts = s.slice(execOperator[0].length);\r\n\t\tlet colon = s.indexOf(\":\");\r\n\t\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\treturn new PrefixOperatorSignature(cls, operator, type);\r\n\t}\r\n\t\r\n\texecOperator = /^([a-zA-Z0-9]+) (\\S+) ([a-zA-Z0-9]+)/.exec(s);\r\n\tif (execOperator) {\r\n\t\tlet cls1 = capitalize(execOperator[1]);\r\n\t\tlet operator = execOperator[2];\r\n\t\tlet cls2 = capitalize(execOperator[3]);\r\n\r\n\t\ts = s.slice(execOperator[0].length);\r\n\t\tlet colon = s.indexOf(\":\");\r\n\t\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\treturn new InfixOperatorSignature(cls1, cls2, type, operator);\r\n\t}\r\n\r\n\tlet b = compileMethodSignature(s, true, \"(\", \")\");\r\n\tif (b) return b;\r\n\r\n\tb = compileMethodSignature(s, false, \"[\", \"]\");\r\n\tif (b) return b;\r\n\r\n\tthrow Error(\"invalid signature: \" + s);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n * @param {boolean} hasName\r\n * @param {string} openSymbol\r\n * @param {string} closeSymbol\r\n * @returns {Signature}\r\n */\r\nfunction compileMethodSignature(s, hasName, openSymbol, closeSymbol) {\r\n\tlet nameEnd = s.indexOf(hasName ? \".\" : openSymbol);\r\n\tif (nameEnd < 0) return null;\r\n\r\n\tlet className = s.slice(0, nameEnd);\r\n\ts = s.slice(hasName ? nameEnd + 1 : nameEnd);\r\n\r\n\tlet isStatic = /^[A-Z]/.test(className);\r\n\r\n\tclassName = capitalize(className);\r\n\r\n\tlet open = s.indexOf(openSymbol);\r\n\tif (open >= 0) {\r\n\t\tlet method = s.slice(0, open);\r\n\r\n\t\tlet close = s.lastIndexOf(closeSymbol);\r\n\t\tif (close < 0) throw Error(\"missing closing \" + closeSymbol);\r\n\r\n\t\tlet params = [];\r\n\t\tlet paramParts = s.slice(open + 1, close).split(/,\\s*/);\r\n\t\tif (paramParts.length !== 1 || paramParts[0].length > 0) {\r\n\t\t\tfor (let part of paramParts) {\r\n\t\t\t\tlet colon = part.indexOf(\":\");\r\n\t\t\t\tlet name = colon < 0 ? part : part.slice(0, colon);\r\n\t\t\t\tlet type = colon < 0 ? null : part.slice(colon + 1).trim();\r\n\t\t\t\tparams.push(new Parameter(name, type));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (method) {\r\n\t\t\tlet colon = s.indexOf(\":\", close);\r\n\t\t\tlet returnType = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\t\treturn new MethodSignature(className, isStatic, method, params, returnType);\r\n\t\t} else {\r\n\t\t\tlet isSetter = false;\r\n\t\t\tlet colon = s.indexOf(\":\", close);\r\n\t\t\tif (colon < 0) {\r\n\t\t\t\tcolon = s.indexOf(\"=\", close);\r\n\t\t\t\tif (colon >= 0) isSetter = true;\r\n\t\t\t}\r\n\t\t\tlet returnType = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\t\t\t\r\n\t\t\treturn new SubscriptSignature(className, isStatic, isSetter, params, returnType);\r\n\t\t}\r\n\t}\r\n\r\n\tlet colon = s.indexOf(\":\");\r\n\tlet property = colon < 0 ? s : s.slice(0, colon);\r\n\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\treturn new PropertySignature(className, isStatic, property, type);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n */\r\nfunction capitalize(s) {\r\n\treturn s[0].toUpperCase() + s.slice(1);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n */\r\nfunction uncapitalize(s) {\r\n\treturn s[0].toLowerCase() + s.slice(1);\r\n}\r\n\r\n\r\n/** @type {Section[]} */\r\nexport let sections = [];\r\n\r\nexport let sectionsPromise = loadDocs();\r\n\r\n/**\r\n * @param {string} search\r\n * @returns {Section[]}\r\n */\r\nexport function searchSeactions(search) {\r\n\tsearch = search.trim().toLowerCase();\r\n\r\n\t/** @type {{ score: number, section: Section }[]} */\r\n\tlet matches = [];\r\n\r\n\tfor (let section of sections) {\r\n\t\tlet score = section.searchScore(search);\r\n\r\n\t\tif (score > 0) {\r\n\t\t\tmatches.push({ score: score, section: section });\r\n\t\t}\r\n\t}\r\n\r\n\tmatches.sort((a, b) => b.score - a.score);\r\n\r\n\treturn matches.map(match => match.section);\r\n}\r\n\r\n/**\r\n * \r\n * @param {HTMLElement} parentNode\r\n * @param {VirtualNode[]} nodes\r\n */\r\nfunction instantiateVirtualNodes(parentNode, nodes) {\r\n\tfor (let node of nodes) {\r\n\t\tif (node instanceof Element) {\r\n\t\t\tparentNode.append(node);\r\n\t\t} else if (Array.isArray(node)) {\r\n\t\t\tinstantiateVirtualNodes(parentNode, nodes);\r\n\t\t} else {\r\n\t\t\tnode.toHTML(parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @typedef {object} ToHTML\r\n * @property {(parent: HTMLElement) => void} toHTML\r\n */\r\n\r\n/**\r\n * @typedef {HTMLElement|ToHTML|VirtualNodes} VirtualNode\r\n */\r\n/**\r\n * @typedef {VirtualNode[]} VirtualNodes\r\n */\r\n","\r\n/**\r\n * @param {string} [title]\r\n */\r\nexport function navigateTo(title) {\r\n\tif (title) {\r\n\t\tlocation.hash = \"#\" + title;\r\n\t} else {\r\n\t\thistory.pushState(null, null, \" \");\r\n\r\n\t\tdispatchEvent(new Event(\"hashchange\"));\r\n\t}\r\n}\r\n","import \"./theme.js\";\r\nimport \"./docs.js\";\r\nimport { clearElement, createElement, getElement } from \"./html.js\";\r\nimport { searchSeactions, sections, sectionsPromise } from \"./docs.js\";\r\nimport { navigateTo } from \"./navigation.js\";\r\n\r\nlet searchForm = /** @type {HTMLFormElement} */(getElement(\"search-form\"));\r\nlet searchInput = /** @type {HTMLInputElement} */(getElement(\"search\"));\r\nlet mainContainer = document.querySelector(\"main\");\r\n\r\n/**\r\n * @param {SubmitEvent} event\r\n */\r\nsearchForm.onsubmit = (event) => {\r\n\tevent.preventDefault();\r\n\r\n\tlet searchValue = searchInput.value.trim();\r\n\r\n\tif (searchValue) {\r\n\t\tnavigateTo(\"~\" + searchValue);\r\n\t} else {\r\n\t\tnavigateTo();\r\n\t}\r\n};\r\n\r\nsectionsPromise.then(() => {\r\n\tnavigateFromURL();\r\n});\r\n\r\nfunction showHome() {\r\n\tclearElement(mainContainer);\r\n\r\n\tsections[0].toHTML(mainContainer);\r\n}\r\n\r\ngetElement(\"title-link\").onclick = (event) => {\r\n\tif (!event.ctrlKey && !event.metaKey && !event.shiftKey) {\r\n\t\tevent.preventDefault();\r\n\t\tnavigateTo();\r\n\t}\r\n};\r\n\r\naddEventListener(\"hashchange\", (ev) => {\r\n\tnavigateFromURL();\r\n});\r\n\r\nfunction navigateFromURL() {\r\n\tlet title = location.hash.slice(1);\r\n\r\n\tif (title) {\r\n\t\ttitle = decodeURIComponent(title);\r\n\r\n\t\tif (title[0] === \"~\") {\r\n\t\t\tsearch(title.slice(1));\r\n\r\n\t\t\tdocument.title = \"Sock | \" + title + \" (search)\";\r\n\t\t} else {\r\n\t\t\tlet matchingSections = sections.filter(section => section.matchesTitle(title));\r\n\t\t\r\n\t\t\tclearElement(mainContainer);\r\n\t\t\r\n\t\t\tif (matchingSections.length > 0) {\r\n\t\t\t\tfor (let section of matchingSections) {\r\n\t\t\t\t\tsection.toHTML(mainContainer);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmainContainer.append(\r\n\t\t\t\t\tcreateElement(\"p\", {}, `Could not find information about \"${title}\".`)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tdocument.title = \"Sock | \" + title;\r\n\t\t}\r\n\t} else {\r\n\t\tshowHome();\r\n\r\n\t\tdocument.title = \"Sock\";\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} search\r\n */\r\nfunction search(search) {\r\n\tsearchInput.value = search;\r\n\r\n\tclearElement(mainContainer);\r\n\r\n\tlet matches = searchSeactions(search);\r\n\r\n\tif (matches.length === 0) {\r\n\t\tmainContainer.append(`No items match search \"${search}\".`);\r\n\t} else {\r\n\t\tfor (let match of matches) {\r\n\t\t\tmatch.toHTML(mainContainer);\r\n\t\t}\r\n\t}\r\n}\r\n"],"names":["getElement","id","document","getElementById","setElementClass","element","className","enabled","classList","add","remove","createElement","tag","attributes","nodes","name","value","startsWith","setAttribute","withAttributes","parent","Array","isArray","node","append","appendNodes","clearElement","el","innerHTML","curr","LOCAL_STORAGE_KEY","savedJSON","localStorage","getItem","JSON","parse","error","console","Object","assign","persistence","iconLight","iconDark","isLightTheme","setIsLightTheme","isLight","documentElement","onclick","p","key","setItem","stringify","updatePersistence","contains","waitingMessages","addEventListener","event","data","msgType","type","arg","stillWaiting","callNow","f","iframe","contentWindow","source","push","Section","constructor","baseElement","this","summary","dataset","h2s","querySelectorAll","signatures","from","map","h2","title","textContent","superClass","super","InfoSignature","s","test","ClassSignature","execOperator","exec","operator","cls","capitalize","colon","slice","length","indexOf","trim","PrefixOperatorSignature","cls1","cls2","InfixOperatorSignature","b","compileMethodSignature","Error","compileSignature","tags","split","fromHtml","find","HTMLParagraphElement","parentNode","child","children","HTMLScriptElement","example","Example","fromElement","HTMLDetailsElement","detailNodes","details","VirtualElement","HTMLPreElement","normalizeCode","toHTML","section","signature","instantiateVirtualNodes","matchesTitle","some","searchScore","search","keyword","keywords","includes","toLowerCase","code","script","runButton","class","src","width","height","closeButton","player","replaceWith","Promise","resolve","waitForMessage","then","postMessage","static","e","text","rawCode","result","replaceAll","CLS_CLASS","CLS_PARAMETER","CLS_TYPE","Signature","href","compoundTypeToHTML","r","forEach","part","i","createAPILinkText","fullClass","a","sections","prototype","style","uncapitalize","returnType","className1","className2","correctClassCase","isStatic","addClassAndMethodNameSignature","methodName","addReturnType","PropertySignature","propertyName","property","MethodSignature","parameters","method","filter","endsWith","join","param","SubscriptSignature","isSetter","Parameter","hasName","openSymbol","closeSymbol","nameEnd","open","close","lastIndexOf","params","paramParts","toUpperCase","sectionsPromise","async","response","fetch","tempDiv","html","content","log","loadDocs","Element","navigateTo","location","hash","history","pushState","dispatchEvent","Event","searchForm","searchInput","mainContainer","querySelector","navigateFromURL","decodeURIComponent","matches","score","sort","match","searchSeactions","matchingSections","onsubmit","preventDefault","searchValue","ctrlKey","metaKey","shiftKey","ev"],"mappings":"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"}