{"version":3,"file":"main.js","sources":["../src/html.js","../src/persistence.js","../src/theme.js","../src/messaging.js","../src/docs.js","../src/navigation.js","../src/main.js"],"sourcesContent":["\r\n/**\r\n * @param {string} id\r\n * @returns {HTMLElement}\r\n */\r\nexport function getElement(id) {\r\n\treturn document.getElementById(id);\r\n}\r\n\r\n/**\r\n * \r\n * @param {Element} element\r\n * @param {string} className\r\n * @param {boolean} enabled\r\n */\r\nexport function setElementClass(element, className, enabled) {\r\n\tif (enabled) {\r\n\t\telement.classList.add(className);\r\n\t} else {\r\n\t\telement.classList.remove(className);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {K} tag \r\n * @param {Record<string, any>} [attributes] \r\n * @param {any} [nodes]\r\n * @returns {HTMLElementTagNameMap[K]}\r\n * @template {keyof HTMLElementTagNameMap} K\r\n */\r\nexport function createElement(tag, attributes, nodes) {\r\n\tlet element = document.createElement(tag);\r\n\r\n\tif (attributes) {\r\n\t\twithAttributes(element, attributes);\r\n\t}\r\n\r\n\tappendNodes(element, nodes);\r\n\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * @param {T} element\r\n * @param {Record<string, any>} attributes \r\n * @returns {T}\r\n * @template {Element} T\r\n */\r\nexport function withAttributes(element, attributes) {\r\n\tfor (let name in attributes) {\r\n\t\tlet value = attributes[name];\r\n\r\n\t\tif (name.startsWith(\"on\")) {\r\n\t\t\telement[name] = value;\r\n\t\t} else {\r\n\t\t\tif (value === true) {\r\n\t\t\t\telement.setAttribute(name, \"\");\r\n\t\t\t} else if (value == null || value === false) {\r\n\t\t\t\t// Ignore.\r\n\t\t\t} else {\r\n\t\t\t\telement.setAttribute(name, value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent \r\n * @param {Node|Node[]} nodes \r\n */\r\nexport function appendNodes(parent, nodes) {\r\n\tif (nodes) {\r\n\t\tif (Array.isArray(nodes)) {\r\n\t\t\tfor (let node of nodes) {\r\n\t\t\t\tparent.append(node);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tparent.append(nodes);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n */\r\nexport function clearElement(el) {\r\n\tel.innerHTML = \"\";\r\n}\r\n","\r\nlet LOCAL_STORAGE_KEY = \"sock_docs\";\r\n\r\n/**\r\n * @type {Partial<Persistence>}\r\n */\r\nlet defaults = {\r\n};\r\n\r\n/** @type {Persistence} */\r\nlet curr;\r\n\r\nlet savedJSON = localStorage.getItem(LOCAL_STORAGE_KEY);\r\nif (savedJSON) {\r\n\ttry {\r\n\t\tcurr = JSON.parse(savedJSON);\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t}\r\n}\r\n\r\ncurr = Object.assign({}, defaults, curr);\r\n\r\n/**\r\n * @type {Readonly<Persistence>}\r\n */\r\nexport let persistence = curr;\r\n\r\n/**\r\n * @param {Partial<Persistence>} p \r\n */\r\nexport function updatePersistence(p) {\r\n\tfor (let key in p) {\r\n\t\tcurr[key] = p[key];\r\n\t}\r\n\r\n\tlocalStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(curr));\r\n}\r\n\r\n/**\r\n * @typedef {object} Persistence\r\n * @property {boolean} isLight\r\n */\r\n","import { getElement, setElementClass } from \"./html.js\";\r\nimport { persistence, updatePersistence } from \"./persistence.js\";\r\n\r\nlet iconLight = getElement(\"theme-toggle-icon-light\");\r\nlet iconDark = getElement(\"theme-toggle-icon-dark\");\r\nlet buttonLabel = getElement(\"theme-toggle-state\");\r\n\r\nlet isLightTheme = false;\r\n\r\ngetElement(\"theme-toggle\").onclick = () => {\r\n\tsetIsLightTheme(!isLightTheme);\r\n\r\n\tupdatePersistence({ isLight: isLightTheme });\r\n};\r\n\r\n/**\r\n * @param {boolean} isLight\r\n */\r\nfunction setIsLightTheme(isLight) {\r\n\tisLightTheme = isLight;\r\n\r\n\tsetElementClass(iconLight, \"hidden\", !isLight);\r\n\tsetElementClass(iconDark, \"hidden\", isLight);\r\n\t\r\n\tsetElementClass(document.documentElement, \"light\", isLight);\r\n\tsetElementClass(document.documentElement, \"dark\", !isLight);\r\n\r\n\tbuttonLabel.textContent = isLight ? \"Light\" : \"Dark\";\r\n}\r\n\r\nsetIsLightTheme(persistence.isLight ?? document.documentElement.classList.contains(\"light\"));\r\n","\r\n/** @type {(((arg: any) => void) & { type: string, iframe: HTMLIFrameElement })[]} */\r\nlet waitingMessages  = [];\r\n\r\naddEventListener(\"message\", (event) => {\r\n\tlet data = event.data;\r\n\tif (data && typeof data === \"object\") {\r\n\t\tlet msgType = data.type;\r\n\t\tif (msgType) {\r\n\t\t\tlet arg = data.data;\r\n\r\n\t\t\t// Pull out functions with the corresponding type.\r\n\t\t\tlet stillWaiting = [];\r\n\t\t\tlet callNow = [];\r\n\t\t\tfor (let f of waitingMessages) {\r\n\t\t\t\tif (f.type === msgType && (!f.iframe || f.iframe.contentWindow === event.source)) {\r\n\t\t\t\t\tcallNow.push(f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstillWaiting.push(f);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twaitingMessages = stillWaiting;\r\n\r\n\t\t\t// Call matching functions.\r\n\t\t\tfor (let f of callNow) {\r\n\t\t\t\tf(arg);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * @param {string} type\r\n * @param {HTMLIFrameElement} [iframe]\r\n * @returns {Promise<any>}\r\n */\r\nexport function waitForMessage(type, iframe) {\r\n\treturn new Promise(/** @param {((arg: any) => void) & { type: string, iframe: HTMLIFrameElement }} resolve */(resolve, reject) => {\r\n\t\tresolve.type = type;\r\n\t\tresolve.iframe = iframe;\r\n\t\twaitingMessages.push(resolve);\r\n\t});\r\n}\r\n\r\n/**\r\n * @param {HTMLIFrameElement} [iframe] \r\n */\r\nexport function clearWaitingMessages(iframe) {\r\n\tif (iframe) {\r\n\t\twaitingMessages = waitingMessages.filter(msg => msg.iframe !== iframe);\r\n\t} else {\r\n\t\twaitingMessages.length = 0;\r\n\t}\r\n}\r\n","import { createElement } from \"./html.js\";\r\nimport { clearWaitingMessages, waitForMessage } from \"./messaging.js\";\r\n\r\nasync function loadDocs() {\r\n\tlet response = await fetch(\"docs.html\");\r\n\tlet text = await response.text();\r\n\r\n\tlet tempDiv = createElement(\"div\");\r\n\ttempDiv.innerHTML = \"<template>\" + text + \"</template>\";\r\n\r\n\tlet template = /** @type {HTMLTemplateElement} */(tempDiv.firstChild);\r\n\r\n\tlet html = template.content;\r\n\r\n\tsections = /** @type {HTMLElement[]} */(Array.from(html.children)).map(e => new Section(e));\r\n\t\r\n\tconsole.log(sections);\r\n\r\n\treturn sections;\r\n}\r\n\r\nclass Section {\r\n\t/**\r\n\t * @param {HTMLElement} baseElement\r\n\t */\r\n\tconstructor(baseElement) {\r\n\t\tthis.summary = baseElement.dataset.summary;\r\n\r\n\t\tlet h2s = baseElement.querySelectorAll(\"h2\");\r\n\r\n\t\t/**\r\n\t\t * @type {Signature[]}\r\n\t\t */\r\n\t\tthis.signatures = Array.from(h2s).map((h2) => {\r\n\t\t\tlet title = h2.textContent;\r\n\t\t\tlet type = h2.dataset.type;\r\n\t\t\tlet superClass = h2.dataset.super;\r\n\t\t\th2.remove();\r\n\r\n\t\t\tif (type) {\r\n\t\t\t\treturn new InfoSignature(title, type);\r\n\t\t\t} else {\r\n\t\t\t\treturn compileSignature(title, superClass);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tlet tag = baseElement.dataset.tag;\r\n\t\tif (tag) {\r\n\t\t\t/** @type {string[]} */\r\n\t\t\tthis.tags = tag.split(/\\s+/);\r\n\t\t} else {\r\n\t\t\tthis.tags = [];\r\n\t\t}\r\n\r\n\t\t/** @type {VirtualNode[]} */\r\n\t\tthis.nodes = [];\r\n\r\n\t\tthis.fromHtml(baseElement, this.nodes);\r\n\r\n\t\tif (!this.summary) {\r\n\t\t\tlet p = /** @type {HTMLParagraphElement} */(this.nodes.find(el => el instanceof HTMLParagraphElement));\r\n\t\t\tif (p) {\r\n\t\t\t\tthis.summary = p.textContent;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * @param {ParentNode} parentNode\r\n\t * @param {VirtualNode[]} parent\r\n\t */\r\n\tfromHtml(parentNode, parent) {\r\n\t\tfor (let child of /** @type {HTMLElement[]} */(Array.from(parentNode.children))) {\r\n\t\t\tif (child instanceof HTMLScriptElement) {\r\n\t\t\t\tlet example = Example.fromElement(child);\r\n\r\n\t\t\t\tparent.push(example);\r\n\t\t\t} else if (child instanceof HTMLDetailsElement) {\r\n\t\t\t\tlet detailNodes = [];\r\n\t\t\t\tthis.fromHtml(child, detailNodes);\r\n\t\t\t\tlet details = new VirtualElement(\"details\", {}, detailNodes);\r\n\t\t\t\t\r\n\t\t\t\tparent.push(details);\r\n\t\t\t} else {\r\n\t\t\t\tif (child instanceof HTMLPreElement) {\r\n\t\t\t\t\tchild.textContent = normalizeCode(child.textContent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparent.push(child);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet section = createElement(\"section\");\r\n\r\n\t\tfor (let signature of this.signatures) {\r\n\t\t\tlet h2 = createElement(\"h2\");\r\n\t\t\tsignature.toHTML(h2);\r\n\t\t\tsection.append(h2);\r\n\t\t}\r\n\r\n\t\tinstantiateVirtualNodes(section, this.nodes);\r\n\r\n\t\tparent.append(section);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.signatures.some((signature) => signature && signature.matchesTitle(title));\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} search should be lowercase\r\n\t * @returns {number}\r\n\t */\r\n\tsearchScore(search) {\r\n\t\tfor (let signature of this.signatures) {\r\n\t\t\tlet title = signature.signature.toLowerCase();\r\n\r\n\t\t\tif (title === search) return 7;\r\n\t\t\tif (title.startsWith(search)) return 6;\r\n\t\t\tif (title.includes(search)) return 5;\r\n\r\n\t\t\tfor (let keyword of signature.keywords) {\r\n\t\t\t\tif (keyword.includes(search)) return 4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let tag of this.tags) {\r\n\t\t\tif (tag === search) return 3;\r\n\t\t\tif (tag.includes(search)) return 2;\r\n\t\t}\r\n\r\n\t\t// for (let element of this.htmlTemplateElements) {\r\n\t\t// \tif (element.textContent.includes(search)) return 1;\r\n\t\t// }\r\n\r\n\t\treturn 0;\r\n\t}\r\n}\r\n\r\nclass VirtualElement {\r\n\t/**\r\n\t * @param {keyof HTMLElementTagNameMap} tag\r\n\t * @param {Record<string, string>} [attributes] \r\n\t * @param {VirtualNode[]} [nodes]\r\n\t */\r\n\tconstructor(tag, attributes, nodes) {\r\n\t\tthis.tag = tag;\r\n\t\tthis.attributes = attributes || {};\r\n\t\tthis.nodes = nodes || [];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet element = createElement(this.tag, this.attributes);\r\n\r\n\t\tinstantiateVirtualNodes(element, this.nodes);\r\n\r\n\t\tparent.append(element);\r\n\t}\r\n}\r\n\r\nconst PLAY_ICON = '<span class=\"hidden\">Play example</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>';\r\nconst STOP_ICON = '<span class=\"hidden\">Stop example</span><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>';\r\n\r\nclass Example {\r\n\t/**\r\n\t * @param {string} code\r\n\t * @param {string} script\r\n\t * @param {ExampleMode} mode\r\n\t */\r\n\tconstructor(code, script, mode) {\r\n\t\tthis.code = code;\r\n\t\tthis.script = script;\r\n\t\tthis.mode = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet runButton = createElement(\"button\", { class: \"play-button\" });\r\n\t\trunButton.innerHTML = PLAY_ICON;\r\n\r\n\t\tlet codePlayer = createElement(\"div\", { class: \"code-player\" }, [\r\n\t\t\tcreateElement(\"pre\", {}, this.code),\r\n\t\t\trunButton,\r\n\t\t]);\r\n\r\n\t\tparent.append(codePlayer);\r\n\r\n\t\tlet onPlay = () => {\r\n\t\t\trunButton.innerHTML = STOP_ICON;\r\n\t\t\trunButton.onclick = null;\r\n\t\t\t\r\n\t\t\tlet iframe = createElement(\"iframe\", { src: \"player\", width: \"100%\", height: \"100%\" });\r\n\t\t\tlet player = createElement(\"div\", { class: \"player\"}, \r\n\t\t\t\tiframe\r\n\t\t\t);\r\n\r\n\t\t\tif (this.mode === \"gui\") {\r\n\t\t\t\tplayer.style.height = \"400px\";\r\n\t\t\t} else {\r\n\t\t\t\tiframe.style.display = \"none\";\r\n\r\n\t\t\t\tif (this.mode === \"console\") {\r\n\t\t\t\t\tplayer.style.height = \"200px\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet output = createElement(\"div\", { class: \"console\" });\r\n\t\t\t\t\tplayer.append(output);\r\n\r\n\t\t\t\t\t// To receive the \"print\" messages, we add a separate listener to each event.\r\n\t\t\t\t\t// This is a lazy implementation, but it works fine in practice...\r\n\t\t\t\t\tasync function logLoop() {\r\n\t\t\t\t\t\tlet line = await waitForMessage(\"print\", iframe);\r\n\r\n\t\t\t\t\t\tif (line) {\r\n\t\t\t\t\t\t\toutput.append(createElement(\"div\", {}, line));\r\n\t\t\t\t\t\t\toutput.scrollTop = 9999;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlogLoop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlogLoop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tparent.insertBefore(player, codePlayer.nextSibling);\r\n\r\n\t\t\t// Send script once the iframe is ready.\r\n\t\t\twaitForMessage(\"ready\", iframe).then(() => {\r\n\t\t\t\tiframe.contentWindow.postMessage({ type: \"script\", data: this.script });\r\n\r\n\t\t\t\t// Handle stopping.\r\n\t\t\t\trunButton.onclick = () => {\r\n\t\t\t\t\tiframe.src = \"about:blank\";\r\n\t\t\t\t\tplayer.remove();\r\n\r\n\t\t\t\t\trunButton.onclick = onPlay;\r\n\t\t\t\t\trunButton.innerHTML = PLAY_ICON;\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\t// Wait for iframe to be removed.\r\n\t\t\t// We need to remove an event listeners to prevent memory leak!\r\n\t\t\tlet interval = setInterval(() => {\r\n\t\t\t\tif (!document.contains(iframe)) {\r\n\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\tclearWaitingMessages(iframe);\r\n\t\t\t\t\tiframe = null;\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t};\r\n\r\n\t\trunButton.onclick = onPlay;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {HTMLScriptElement} e\r\n\t */\r\n\tstatic fromElement(e) {\r\n\t\tlet code = normalizeCode(e.text);\r\n\t\tlet tags = e.dataset.tag?.split(/\\s+/) ?? [];\r\n\r\n\t\t/** @type {ExampleMode} */\r\n\t\tlet mode = \"gui\";\r\n\t\tif (tags.includes(\"nogui\")) mode = \"nogui\";\r\n\t\tif (tags.includes(\"console\")) mode = \"console\";\r\n\r\n\t\tlet script = code;\r\n\t\tif (tags.includes(\"loopafter\")) {\r\n\t\t\tscript += \"\\nGame.begin {}\";\r\n\t\t} else if (!code.includes(\"Game.begin\") && !tags.includes(\"noloop\")) {\r\n\t\t\tscript = \"Game.begin {\\n\";\r\n\t\t\tif (mode === \"gui\" && !tags.includes(\"noclear\")) script += \"Game.clear()\\n\";\r\n\t\t\tscript += code + \"\\n\";\r\n\t\t\tif (tags.includes(\"once\")) script += \"Game.quit()\\n\";\r\n\t\t\tscript += \"}\";\r\n\t\t}\r\n\r\n\t\treturn new Example(code, script, mode);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} rawCode\r\n */\r\nfunction normalizeCode(rawCode) {\r\n\twhile (rawCode[0] === \"\\n\" || rawCode[0] === \"\\r\") {\r\n\t\trawCode = rawCode.slice(1);\r\n\t}\r\n\r\n\tlet result = /^\\s+/.exec(rawCode);\r\n\t\r\n\tlet code;\r\n\tif (result) {\r\n\t\tcode = (\"\\n\" + rawCode).replaceAll(\"\\n\" + result[0], \"\\n\");\r\n\t} else {\r\n\t\tcode = rawCode;\r\n\t}\r\n\r\n\tcode = code.trim();\r\n\r\n\treturn code;\r\n}\r\n\r\n\r\nlet CLS_CLASS = \"sg-class\";\r\nlet CLS_PROPERTY = \"sg-property\";\r\nlet CLS_PARAMETER = \"sg-parameter\";\r\nlet CLS_TYPE = \"sg-type\";\r\n\r\nclass Signature {\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateElement(\"a\", { href: \"#\" + this.signature, class: \"permalink\" }, \"#\"),\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.signature === title;\r\n\t}\r\n}\r\n\r\nSignature.prototype.signature = \"\";\r\n\r\n/** @type {string[]} */\r\nSignature.prototype.keywords = [];\r\n\r\n/**\r\n * @param {string} type\r\n */\r\nfunction compoundTypeToHTML(type) {\r\n\tlet r = type.split(/((?:\"[^\"]+\")|[a-zA-Z]+)/);\r\n\r\n\tlet parent = createElement(\"span\", { class: CLS_TYPE });\r\n\r\n\tr.forEach((part, i) => {\r\n\t\tif (i % 2 === 0 || part[0] === '\"') {\r\n\t\t\tparent.append(part);\r\n\t\t} else {\r\n\t\t\tparent.append(createAPILinkText(part, part));\r\n\t\t}\r\n\t});\r\n\r\n\treturn parent;\r\n}\r\n\r\n/**\r\n * @param {string} text\r\n * @param {string} title\r\n * @param {string} [className]\r\n */\r\nfunction createAPILinkText(text, title, className) {\r\n\tif (title === \"this\") {\r\n\t\treturn createElement(\"span\", { class: CLS_TYPE }, text);\r\n\t}\r\n\r\n\tlet fullClass = \"no-underline\";\r\n\tif (className) {\r\n\t\tfullClass += \" \" + className;\r\n\t}\r\n\r\n\tif (title === \"null\") {\r\n\t\ttitle = \"Null\";\r\n\t}\r\n\r\n\tlet a = createElement(\"a\", { class: fullClass, href: \"#\" + title }, text);\r\n\r\n\tlet section = sections.find(section => section.matchesTitle(title));\r\n\tif (section && section.summary) {\r\n\t\ta.title = section.summary;\r\n\t}\r\n\r\n\treturn a;\r\n}\r\n\r\n\r\nclass InfoSignature extends Signature {\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {string} type\r\n\t */\r\n\tconstructor(name, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = name;\r\n\t\tthis.keywords = [ name.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet cls = \"\";\r\n\t\tif (this.type === \"type\") {\r\n\t\t\tcls = CLS_TYPE;\r\n\t\t}\r\n\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.name, this.name, cls)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ClassSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {string|null} superClass\r\n\t */\r\n\tconstructor(className, superClass) {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = className;\r\n\t\tthis.superClass = superClass;\r\n\t\tthis.signature = className;\r\n\t\tthis.keywords = [ className.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.name, this.name, CLS_CLASS)\r\n\t\t);\r\n\r\n\t\tif (this.superClass) {\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { style: \"opacity: 0.6; margin-left: 0.2em;\" }, [\r\n\t\t\t\t\t\" is \",\r\n\t\t\t\t\tcreateAPILinkText(this.superClass, this.superClass, CLS_CLASS)\r\n\t\t\t\t])\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass PrefixOperatorSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {string} operator\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, operator, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = className;\r\n\t\tthis.operator = operator;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = operator + uncapitalize(className);\r\n\t\tthis.keywords = [ className.toLowerCase(), operator ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.className === title || this.operator === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.operator, this.signature, CLS_TYPE),\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className), this.className, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tif (this.type) {\r\n\t\t\tparent.append(\r\n\t\t\t\t\": \",\r\n\t\t\t\tcompoundTypeToHTML(this.type),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass InfixOperatorSignature extends Signature {\r\n\t/**\r\n\t * @param {string} cls1\r\n\t * @param {string} cls2\r\n\t * @param {string} returnType\r\n\t * @param {string} operator\r\n\t */\r\n\tconstructor(cls1, cls2, returnType, operator) {\r\n\t\tsuper();\r\n\r\n\t\tthis.className1 = cls1;\r\n\t\tthis.className2 = cls2;\r\n\t\tthis.returnType = returnType;\r\n\t\tthis.operator = operator;\r\n\t\tthis.signature = uncapitalize(cls1) + operator + uncapitalize(cls2);\r\n\t\tthis.keywords = [ cls1.toLowerCase(), cls2.toLowerCase(), operator ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.className1 === title || this.className2 === title || this.operator === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className1), this.className1, CLS_CLASS),\r\n\t\t\t\" \" + this.operator + \" \",\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className2), this.className2, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tif (this.returnType) {\r\n\t\t\tparent.append(\r\n\t\t\t\t\" ⇒ \",\r\n\t\t\t\tcompoundTypeToHTML(this.returnType),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} className\r\n * @param {boolean} isStatic \r\n */\r\nfunction correctClassCase(className, isStatic) {\r\n\treturn isStatic ? className : uncapitalize(className);\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent\r\n * @param {string} className\r\n * @param {boolean} isStatic\r\n * @param {string} methodName\r\n * @param {string} signature\r\n */\r\nfunction addClassAndMethodNameSignature(parent, className, isStatic, methodName, signature) {\r\n\tparent.append(\r\n\t\tcreateAPILinkText(correctClassCase(className, isStatic), className, CLS_CLASS),\r\n\t\t\".\",\r\n\t\tmethodName,\r\n\t);\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent\r\n * @param {string|null} type\r\n */\r\nfunction addReturnType(parent, type) {\r\n\tif (type) {\r\n\t\tparent.append(\r\n\t\t\t\": \",\r\n\t\t\tcompoundTypeToHTML(type),\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass PropertySignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {string} propertyName\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, isStatic, propertyName, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.property = propertyName;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \".\" + propertyName;\r\n\t\tthis.keywords = [ className.toLowerCase(), propertyName.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\taddClassAndMethodNameSignature(parent, this.class, this.isStatic, this.property, this.signature);\r\n\t\taddReturnType(parent, this.type);\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass MethodSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {string} methodName\r\n\t * @param {Parameter[]} parameters\r\n\t * @param {string|null} returnType\r\n\t */\r\n\tconstructor(className, isStatic, methodName, parameters, returnType) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.method = methodName;\r\n\t\tthis.parameters = parameters;\r\n\t\tthis.returnType = returnType;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \".\" + methodName + \"(\" + parameters.filter(p => !p.name.endsWith(\"...\")).map(() => \"_\").join(\",\") + \")\";\r\n\t\tthis.keywords = [ className.toLowerCase(), methodName.toLowerCase() ];\r\n\t\tfor (let param of parameters) {\r\n\t\t\tthis.keywords.push(param.name.toLowerCase());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\taddClassAndMethodNameSignature(parent, this.class, this.isStatic, this.method, this.signature);\r\n\r\n\t\tparent.append(\"(\");\r\n\r\n\t\tthis.parameters.forEach((param, i) => {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tparent.append(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { class: CLS_PARAMETER }, param.name),\r\n\t\t\t);\r\n\r\n\t\t\tif (param.type) {\r\n\t\t\t\tparent.append(\r\n\t\t\t\t\t\": \",\r\n\t\t\t\t\tcompoundTypeToHTML(param.type),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparent.append(\")\");\r\n\r\n\t\taddReturnType(parent, this.returnType);\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass SubscriptSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {boolean} isSetter\r\n\t * @param {Parameter[]} parameters\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, isStatic, isSetter, parameters, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.isSetter = isSetter;\r\n\t\tthis.parameters = parameters;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \"[\" + parameters.map(() => \"_\").join(\",\") + \"]\";\r\n\t\tif (isSetter) {\r\n\t\t\tthis.signature += \"=(_)\";\r\n\t\t}\r\n\t\tthis.keywords = [ className.toLowerCase() ];\r\n\t\tfor (let param of parameters) {\r\n\t\t\tthis.keywords.push(param.name.toLowerCase());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(correctClassCase(this.class, this.isStatic), this.class, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tparent.append(\"[\");\r\n\r\n\t\tthis.parameters.forEach((param, i) => {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tparent.append(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { class: CLS_PARAMETER }, param.name),\r\n\t\t\t);\r\n\r\n\t\t\tif (param.type) {\r\n\t\t\t\tparent.append(\r\n\t\t\t\t\t\": \",\r\n\t\t\t\t\tcompoundTypeToHTML(param.type),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparent.append(this.isSetter ? \"] = \" : \"]: \");\r\n\r\n\t\tparent.append(compoundTypeToHTML(this.type || \"any\"));\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass Parameter {\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {string} type\r\n\t */\r\n\tconstructor(name, type) {\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n * @param {string|null} superClass\r\n * @returns {Signature}\r\n */\r\nfunction compileSignature(s, superClass) {\r\n\tif (/^[a-zA-Z0-9]+$/.test(s)) {\r\n\t\treturn new ClassSignature(s, superClass);\r\n\t}\r\n\r\n\tlet execOperator = /^([^ a-zA-Z0-9]+) ?([a-zA-Z0-9]+)/.exec(s);\r\n\tif (execOperator) {\r\n\t\tlet operator = execOperator[1];\r\n\t\tlet cls = capitalize(execOperator[2]);\r\n\r\n\t\ts = s.slice(execOperator[0].length);\r\n\t\tlet colon = s.indexOf(\":\");\r\n\t\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\treturn new PrefixOperatorSignature(cls, operator, type);\r\n\t}\r\n\t\r\n\texecOperator = /^([a-zA-Z0-9]+) (\\S+) ([a-zA-Z0-9]+)/.exec(s);\r\n\tif (execOperator) {\r\n\t\tlet cls1 = capitalize(execOperator[1]);\r\n\t\tlet operator = execOperator[2];\r\n\t\tlet cls2 = capitalize(execOperator[3]);\r\n\r\n\t\ts = s.slice(execOperator[0].length);\r\n\t\tlet colon = s.indexOf(\":\");\r\n\t\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\treturn new InfixOperatorSignature(cls1, cls2, type, operator);\r\n\t}\r\n\r\n\tlet b = compileMethodSignature(s, true, \"(\", \")\");\r\n\tif (b) return b;\r\n\r\n\tb = compileMethodSignature(s, false, \"[\", \"]\");\r\n\tif (b) return b;\r\n\r\n\tthrow Error(\"invalid signature: \" + s);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n * @param {boolean} hasName\r\n * @param {string} openSymbol\r\n * @param {string} closeSymbol\r\n * @returns {Signature}\r\n */\r\nfunction compileMethodSignature(s, hasName, openSymbol, closeSymbol) {\r\n\tlet nameEnd = s.indexOf(hasName ? \".\" : openSymbol);\r\n\tif (nameEnd < 0) return null;\r\n\r\n\tlet className = s.slice(0, nameEnd);\r\n\ts = s.slice(hasName ? nameEnd + 1 : nameEnd);\r\n\r\n\tlet isStatic = /^[A-Z]/.test(className);\r\n\r\n\tclassName = capitalize(className);\r\n\r\n\tlet open = s.indexOf(openSymbol);\r\n\tif (open >= 0) {\r\n\t\tlet method = s.slice(0, open);\r\n\r\n\t\tlet close = s.lastIndexOf(closeSymbol);\r\n\t\tif (close < 0) throw Error(\"missing closing \" + closeSymbol);\r\n\r\n\t\tlet params = [];\r\n\t\tlet paramParts = s.slice(open + 1, close).split(/,\\s*/);\r\n\t\tif (paramParts.length !== 1 || paramParts[0].length > 0) {\r\n\t\t\tfor (let part of paramParts) {\r\n\t\t\t\tlet colon = part.indexOf(\":\");\r\n\t\t\t\tlet name = colon < 0 ? part : part.slice(0, colon);\r\n\t\t\t\tlet type = colon < 0 ? null : part.slice(colon + 1).trim();\r\n\t\t\t\tparams.push(new Parameter(name, type));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (method) {\r\n\t\t\tlet colon = s.indexOf(\":\", close);\r\n\t\t\tlet returnType = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\t\treturn new MethodSignature(className, isStatic, method, params, returnType);\r\n\t\t} else {\r\n\t\t\tlet isSetter = false;\r\n\t\t\tlet colon = s.indexOf(\":\", close);\r\n\t\t\tif (colon < 0) {\r\n\t\t\t\tcolon = s.indexOf(\"=\", close);\r\n\t\t\t\tif (colon >= 0) isSetter = true;\r\n\t\t\t}\r\n\t\t\tlet returnType = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\t\t\t\r\n\t\t\treturn new SubscriptSignature(className, isStatic, isSetter, params, returnType);\r\n\t\t}\r\n\t}\r\n\r\n\tlet colon = s.indexOf(\":\");\r\n\tlet property = colon < 0 ? s : s.slice(0, colon);\r\n\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\treturn new PropertySignature(className, isStatic, property, type);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n */\r\nfunction capitalize(s) {\r\n\treturn s[0].toUpperCase() + s.slice(1);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n */\r\nfunction uncapitalize(s) {\r\n\treturn s[0].toLowerCase() + s.slice(1);\r\n}\r\n\r\n\r\n/** @type {Section[]} */\r\nexport let sections = [];\r\n\r\nexport let sectionsPromise = loadDocs();\r\n\r\n/**\r\n * @param {string} search\r\n * @returns {Section[]}\r\n */\r\nexport function searchSeactions(search) {\r\n\tsearch = search.trim().toLowerCase();\r\n\r\n\t/** @type {{ score: number, section: Section }[]} */\r\n\tlet matches = [];\r\n\r\n\tfor (let section of sections) {\r\n\t\tlet score = section.searchScore(search);\r\n\r\n\t\tif (score > 0) {\r\n\t\t\tmatches.push({ score: score, section: section });\r\n\t\t}\r\n\t}\r\n\r\n\tmatches.sort((a, b) => b.score - a.score);\r\n\r\n\treturn matches.map(match => match.section);\r\n}\r\n\r\n/**\r\n * \r\n * @param {HTMLElement} parentNode\r\n * @param {VirtualNode[]} nodes\r\n */\r\nfunction instantiateVirtualNodes(parentNode, nodes) {\r\n\tfor (let node of nodes) {\r\n\t\tif (node instanceof Element) {\r\n\t\t\tparentNode.append(node);\r\n\t\t} else if (Array.isArray(node)) {\r\n\t\t\tinstantiateVirtualNodes(parentNode, nodes);\r\n\t\t} else {\r\n\t\t\tnode.toHTML(parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @typedef {object} ToHTML\r\n * @property {(parent: HTMLElement) => void} toHTML\r\n */\r\n\r\n/**\r\n * @typedef {HTMLElement|ToHTML|VirtualNodes} VirtualNode\r\n */\r\n/**\r\n * @typedef {VirtualNode[]} VirtualNodes\r\n */\r\n/**\r\n * @typedef {\"gui\"|\"nogui\"|\"console\"} ExampleMode\r\n */\r\n","\r\n/**\r\n * @param {string} [title]\r\n */\r\nexport function navigateTo(title) {\r\n\tif (title) {\r\n\t\tlocation.hash = \"#\" + title;\r\n\t} else {\r\n\t\thistory.pushState(null, null, \" \");\r\n\r\n\t\tdispatchEvent(new Event(\"hashchange\"));\r\n\t}\r\n}\r\n","import \"./theme.js\";\r\nimport \"./docs.js\";\r\nimport { clearElement, createElement, getElement } from \"./html.js\";\r\nimport { searchSeactions, sections, sectionsPromise } from \"./docs.js\";\r\nimport { navigateTo } from \"./navigation.js\";\r\n\r\nlet searchForm = /** @type {HTMLFormElement} */(getElement(\"search-form\"));\r\nlet searchInput = /** @type {HTMLInputElement} */(getElement(\"search\"));\r\nlet mainContainer = document.querySelector(\"main\");\r\n\r\n/**\r\n * @param {SubmitEvent} event\r\n */\r\nsearchForm.onsubmit = (event) => {\r\n\tevent.preventDefault();\r\n\r\n\tlet searchValue = searchInput.value.trim();\r\n\r\n\tif (searchValue) {\r\n\t\tnavigateTo(\"~\" + searchValue);\r\n\t} else {\r\n\t\tnavigateTo();\r\n\t}\r\n};\r\n\r\nsectionsPromise.then(() => {\r\n\tnavigateFromURL();\r\n});\r\n\r\nfunction showHome() {\r\n\tclearElement(mainContainer);\r\n\r\n\tsections[0].toHTML(mainContainer);\r\n}\r\n\r\ngetElement(\"title-link\").onclick = (event) => {\r\n\tif (!event.ctrlKey && !event.metaKey && !event.shiftKey) {\r\n\t\tevent.preventDefault();\r\n\t\tnavigateTo();\r\n\t}\r\n};\r\n\r\naddEventListener(\"hashchange\", (ev) => {\r\n\tnavigateFromURL();\r\n});\r\n\r\nfunction navigateFromURL() {\r\n\tlet title = location.hash.slice(1);\r\n\r\n\tif (title) {\r\n\t\ttitle = decodeURIComponent(title);\r\n\r\n\t\tif (title[0] === \"~\") {\r\n\t\t\tsearch(title.slice(1));\r\n\r\n\t\t\tdocument.title = \"Sock | \" + title + \" (search)\";\r\n\t\t} else {\r\n\t\t\tlet matchingSections = sections.filter(section => section.matchesTitle(title));\r\n\t\t\r\n\t\t\tclearElement(mainContainer);\r\n\t\t\r\n\t\t\tif (matchingSections.length > 0) {\r\n\t\t\t\tfor (let section of matchingSections) {\r\n\t\t\t\t\tsection.toHTML(mainContainer);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmainContainer.append(\r\n\t\t\t\t\tcreateElement(\"p\", {}, `Could not find information about \"${title}\".`)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tdocument.title = \"Sock | \" + title;\r\n\t\t}\r\n\t} else {\r\n\t\tshowHome();\r\n\r\n\t\tdocument.title = \"Sock\";\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} search\r\n */\r\nfunction search(search) {\r\n\tsearchInput.value = search;\r\n\r\n\tclearElement(mainContainer);\r\n\r\n\tlet matches = searchSeactions(search);\r\n\r\n\tif (matches.length === 0) {\r\n\t\tmainContainer.append(`No items match search \"${search}\".`);\r\n\t} else {\r\n\t\tfor (let match of matches) {\r\n\t\t\tmatch.toHTML(mainContainer);\r\n\t\t}\r\n\t}\r\n}\r\n"],"names":["getElement","id","document","getElementById","setElementClass","element","className","enabled","classList","add","remove","createElement","tag","attributes","nodes","name","value","startsWith","setAttribute","withAttributes","parent","Array","isArray","node","append","appendNodes","clearElement","el","innerHTML","curr","LOCAL_STORAGE_KEY","savedJSON","localStorage","getItem","JSON","parse","error","console","Object","assign","persistence","iconLight","iconDark","buttonLabel","isLightTheme","setIsLightTheme","isLight","documentElement","textContent","onclick","p","key","setItem","stringify","updatePersistence","contains","waitingMessages","waitForMessage","type","iframe","Promise","resolve","reject","push","addEventListener","event","data","msgType","arg","stillWaiting","callNow","f","contentWindow","source","Section","constructor","baseElement","this","summary","dataset","h2s","querySelectorAll","signatures","from","map","h2","title","superClass","super","InfoSignature","s","test","ClassSignature","execOperator","exec","operator","cls","capitalize","colon","slice","length","indexOf","trim","PrefixOperatorSignature","cls1","cls2","InfixOperatorSignature","b","compileMethodSignature","Error","compileSignature","tags","split","fromHtml","find","HTMLParagraphElement","parentNode","child","children","HTMLScriptElement","example","Example","fromElement","HTMLDetailsElement","detailNodes","details","VirtualElement","HTMLPreElement","normalizeCode","toHTML","section","signature","instantiateVirtualNodes","matchesTitle","some","searchScore","search","toLowerCase","includes","keyword","keywords","PLAY_ICON","code","script","mode","runButton","class","codePlayer","onPlay","src","width","height","player","style","display","output","async","logLoop","line","scrollTop","insertBefore","nextSibling","then","postMessage","interval","setInterval","clearInterval","filter","msg","clearWaitingMessages","static","e","text","rawCode","result","replaceAll","CLS_CLASS","CLS_PARAMETER","CLS_TYPE","Signature","href","compoundTypeToHTML","r","forEach","part","i","createAPILinkText","fullClass","a","sections","prototype","uncapitalize","returnType","className1","className2","correctClassCase","isStatic","addClassAndMethodNameSignature","methodName","addReturnType","PropertySignature","propertyName","property","MethodSignature","parameters","method","endsWith","join","param","SubscriptSignature","isSetter","Parameter","hasName","openSymbol","closeSymbol","nameEnd","open","close","lastIndexOf","params","paramParts","toUpperCase","sectionsPromise","response","fetch","tempDiv","html","content","log","loadDocs","Element","navigateTo","location","hash","history","pushState","dispatchEvent","Event","searchForm","searchInput","mainContainer","querySelector","navigateFromURL","decodeURIComponent","matches","score","sort","match","searchSeactions","matchingSections","onsubmit","preventDefault","searchValue","ctrlKey","metaKey","shiftKey","ev"],"mappings":"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"}