{"version":3,"file":"main.js","sources":["../src/html.js","../src/persistence.js","../src/theme.js","../src/messaging.js","../src/docs.js","../src/navigation.js","../src/main.js"],"sourcesContent":["\r\n/**\r\n * @param {string} id\r\n * @returns {HTMLElement}\r\n */\r\nexport function getElement(id) {\r\n\treturn document.getElementById(id);\r\n}\r\n\r\n/**\r\n * \r\n * @param {Element} element\r\n * @param {string} className\r\n * @param {boolean} enabled\r\n */\r\nexport function setElementClass(element, className, enabled) {\r\n\tif (enabled) {\r\n\t\telement.classList.add(className);\r\n\t} else {\r\n\t\telement.classList.remove(className);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {K} tag \r\n * @param {Record<string, any>} [attributes] \r\n * @param {any} [nodes]\r\n * @returns {HTMLElementTagNameMap[K]}\r\n * @template {keyof HTMLElementTagNameMap} K\r\n */\r\nexport function createElement(tag, attributes, nodes) {\r\n\tlet element = document.createElement(tag);\r\n\r\n\tif (attributes) {\r\n\t\twithAttributes(element, attributes);\r\n\t}\r\n\r\n\tappendNodes(element, nodes);\r\n\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * @param {T} element\r\n * @param {Record<string, any>} attributes \r\n * @returns {T}\r\n * @template {Element} T\r\n */\r\nexport function withAttributes(element, attributes) {\r\n\tfor (let name in attributes) {\r\n\t\tlet value = attributes[name];\r\n\r\n\t\tif (name.startsWith(\"on\")) {\r\n\t\t\telement[name] = value;\r\n\t\t} else {\r\n\t\t\tif (value === true) {\r\n\t\t\t\telement.setAttribute(name, \"\");\r\n\t\t\t} else if (value == null || value === false) {\r\n\t\t\t\t// Ignore.\r\n\t\t\t} else {\r\n\t\t\t\telement.setAttribute(name, value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent \r\n * @param {Node|Node[]} nodes \r\n */\r\nexport function appendNodes(parent, nodes) {\r\n\tif (nodes) {\r\n\t\tif (Array.isArray(nodes)) {\r\n\t\t\tfor (let node of nodes) {\r\n\t\t\t\tparent.append(node);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tparent.append(nodes);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n */\r\nexport function clearElement(el) {\r\n\tel.innerHTML = \"\";\r\n}\r\n","\r\nlet LOCAL_STORAGE_KEY = \"sock_docs\";\r\n\r\n/**\r\n * @type {Partial<Persistence>}\r\n */\r\nlet defaults = {\r\n};\r\n\r\n/** @type {Persistence} */\r\nlet curr;\r\n\r\nlet savedJSON = localStorage.getItem(LOCAL_STORAGE_KEY);\r\nif (savedJSON) {\r\n\ttry {\r\n\t\tcurr = JSON.parse(savedJSON);\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t}\r\n}\r\n\r\ncurr = Object.assign({}, defaults, curr);\r\n\r\n/**\r\n * @type {Readonly<Persistence>}\r\n */\r\nexport let persistence = curr;\r\n\r\n/**\r\n * @param {Partial<Persistence>} p \r\n */\r\nexport function updatePersistence(p) {\r\n\tfor (let key in p) {\r\n\t\tcurr[key] = p[key];\r\n\t}\r\n\r\n\tlocalStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(curr));\r\n}\r\n\r\n/**\r\n * @typedef {object} Persistence\r\n * @property {boolean} isLight\r\n */\r\n","import { getElement, setElementClass } from \"./html.js\";\r\nimport { persistence, updatePersistence } from \"./persistence.js\";\r\n\r\nlet iconLight = getElement(\"theme-toggle-icon-light\");\r\nlet iconDark = getElement(\"theme-toggle-icon-dark\");\r\n\r\nlet isLightTheme = false;\r\n\r\ngetElement(\"theme-toggle\").onclick = () => {\r\n\tsetIsLightTheme(!isLightTheme);\r\n\r\n\tupdatePersistence({ isLight: isLightTheme });\r\n};\r\n\r\n/**\r\n * @param {boolean} isLight\r\n */\r\nfunction setIsLightTheme(isLight) {\r\n\tisLightTheme = isLight;\r\n\r\n\tsetElementClass(iconLight, \"hidden\", !isLight);\r\n\tsetElementClass(iconDark, \"hidden\", isLight);\r\n\t\r\n\tsetElementClass(document.documentElement, \"light\", isLight);\r\n\tsetElementClass(document.documentElement, \"dark\", !isLight);\r\n}\r\n\r\nsetIsLightTheme(persistence.isLight ?? document.documentElement.classList.contains(\"light\"));\r\n","\r\n/** @type {(((arg: any) => void) & { type: string, iframe: HTMLIFrameElement })[]} */\r\nlet waitingMessages  = [];\r\n\r\naddEventListener(\"message\", (event) => {\r\n\tlet data = event.data;\r\n\tif (data && typeof data === \"object\") {\r\n\t\tlet msgType = data.type;\r\n\t\tif (msgType) {\r\n\t\t\tlet arg = data.data;\r\n\r\n\t\t\t// Pull out functions with the corresponding type.\r\n\t\t\tlet stillWaiting = [];\r\n\t\t\tlet callNow = [];\r\n\t\t\tfor (let f of waitingMessages) {\r\n\t\t\t\tif (f.type === msgType && (!f.iframe || f.iframe.contentWindow === event.source)) {\r\n\t\t\t\t\tcallNow.push(f);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstillWaiting.push(f);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twaitingMessages = stillWaiting;\r\n\r\n\t\t\t// Call matching functions.\r\n\t\t\tfor (let f of callNow) {\r\n\t\t\t\tf(arg);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * @param {string} type\r\n * @param {HTMLIFrameElement} [iframe]\r\n * @returns {Promise<any>}\r\n */\r\nexport function waitForMessage(type, iframe) {\r\n\treturn new Promise(/** @param {((arg: any) => void) & { type: string, iframe: HTMLIFrameElement }} resolve */(resolve, reject) => {\r\n\t\tresolve.type = type;\r\n\t\tresolve.iframe = iframe;\r\n\t\twaitingMessages.push(resolve);\r\n\t});\r\n}\r\n\r\n/**\r\n * @param {HTMLIFrameElement} [iframe] \r\n */\r\nexport function clearWaitingMessages(iframe) {\r\n\tif (iframe) {\r\n\t\twaitingMessages = waitingMessages.filter(msg => msg.iframe !== iframe);\r\n\t} else {\r\n\t\twaitingMessages.length = 0;\r\n\t}\r\n}\r\n","import { createElement } from \"./html.js\";\r\nimport { clearWaitingMessages, waitForMessage } from \"./messaging.js\";\r\n\r\nasync function loadDocs() {\r\n\tlet response = await fetch(\"docs.html\");\r\n\tlet text = await response.text();\r\n\r\n\tlet tempDiv = createElement(\"div\");\r\n\ttempDiv.innerHTML = \"<template>\" + text + \"</template>\";\r\n\r\n\tlet template = /** @type {HTMLTemplateElement} */(tempDiv.firstChild);\r\n\r\n\tlet html = template.content;\r\n\r\n\tsections = /** @type {HTMLElement[]} */(Array.from(html.children)).map(e => new Section(e));\r\n\t\r\n\tconsole.log(sections);\r\n\r\n\treturn sections;\r\n}\r\n\r\nclass Section {\r\n\t/**\r\n\t * @param {HTMLElement} baseElement\r\n\t */\r\n\tconstructor(baseElement) {\r\n\t\tthis.summary = baseElement.dataset.summary;\r\n\r\n\t\tlet h2s = baseElement.querySelectorAll(\"h2\");\r\n\r\n\t\t/**\r\n\t\t * @type {Signature[]}\r\n\t\t */\r\n\t\tthis.signatures = Array.from(h2s).map((h2) => {\r\n\t\t\tlet title = h2.textContent;\r\n\t\t\tlet type = h2.dataset.type;\r\n\t\t\tlet superClass = h2.dataset.super;\r\n\t\t\th2.remove();\r\n\r\n\t\t\tif (type) {\r\n\t\t\t\treturn new InfoSignature(title, type);\r\n\t\t\t} else {\r\n\t\t\t\treturn compileSignature(title, superClass);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tlet tag = baseElement.dataset.tag;\r\n\t\tif (tag) {\r\n\t\t\t/** @type {string[]} */\r\n\t\t\tthis.tags = tag.split(/\\s+/);\r\n\t\t} else {\r\n\t\t\tthis.tags = [];\r\n\t\t}\r\n\r\n\t\t/** @type {VirtualNode[]} */\r\n\t\tthis.nodes = [];\r\n\r\n\t\tthis.fromHtml(baseElement, this.nodes);\r\n\r\n\t\tif (!this.summary) {\r\n\t\t\tlet p = /** @type {HTMLParagraphElement} */(this.nodes.find(el => el instanceof HTMLParagraphElement));\r\n\t\t\tif (p) {\r\n\t\t\t\tthis.summary = p.textContent;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t * @param {ParentNode} parentNode\r\n\t * @param {VirtualNode[]} parent\r\n\t */\r\n\tfromHtml(parentNode, parent) {\r\n\t\tfor (let child of /** @type {HTMLElement[]} */(Array.from(parentNode.children))) {\r\n\t\t\tif (child instanceof HTMLScriptElement) {\r\n\t\t\t\tlet example = Example.fromElement(child);\r\n\r\n\t\t\t\tparent.push(example);\r\n\t\t\t} else if (child instanceof HTMLDetailsElement) {\r\n\t\t\t\tlet detailNodes = [];\r\n\t\t\t\tthis.fromHtml(child, detailNodes);\r\n\t\t\t\tlet details = new VirtualElement(\"details\", {}, detailNodes);\r\n\t\t\t\t\r\n\t\t\t\tparent.push(details);\r\n\t\t\t} else {\r\n\t\t\t\tif (child instanceof HTMLPreElement) {\r\n\t\t\t\t\tchild.textContent = normalizeCode(child.textContent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparent.push(child);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet section = createElement(\"section\");\r\n\r\n\t\tfor (let signature of this.signatures) {\r\n\t\t\tlet h2 = createElement(\"h2\");\r\n\t\t\tsignature.toHTML(h2);\r\n\t\t\tsection.append(h2);\r\n\t\t}\r\n\r\n\t\tinstantiateVirtualNodes(section, this.nodes);\r\n\r\n\t\tparent.append(section);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.signatures.some((signature) => signature && signature.matchesTitle(title));\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} search should be lowercase\r\n\t * @returns {number}\r\n\t */\r\n\tsearchScore(search) {\r\n\t\tfor (let signature of this.signatures) {\r\n\t\t\tlet title = signature.signature.toLowerCase();\r\n\r\n\t\t\tif (title === search) return 7;\r\n\t\t\tif (title.startsWith(search)) return 6;\r\n\t\t\tif (title.includes(search)) return 5;\r\n\r\n\t\t\tfor (let keyword of signature.keywords) {\r\n\t\t\t\tif (keyword.includes(search)) return 4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let tag of this.tags) {\r\n\t\t\tif (tag === search) return 3;\r\n\t\t\tif (tag.includes(search)) return 2;\r\n\t\t}\r\n\r\n\t\t// for (let element of this.htmlTemplateElements) {\r\n\t\t// \tif (element.textContent.includes(search)) return 1;\r\n\t\t// }\r\n\r\n\t\treturn 0;\r\n\t}\r\n}\r\n\r\nclass VirtualElement {\r\n\t/**\r\n\t * @param {keyof HTMLElementTagNameMap} tag\r\n\t * @param {Record<string, string>} [attributes] \r\n\t * @param {VirtualNode[]} [nodes]\r\n\t */\r\n\tconstructor(tag, attributes, nodes) {\r\n\t\tthis.tag = tag;\r\n\t\tthis.attributes = attributes || {};\r\n\t\tthis.nodes = nodes || [];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet element = createElement(this.tag, this.attributes);\r\n\r\n\t\tinstantiateVirtualNodes(element, this.nodes);\r\n\r\n\t\tparent.append(element);\r\n\t}\r\n}\r\n\r\nclass Example {\r\n\t/**\r\n\t * @param {string} code\r\n\t * @param {string} script\r\n\t * @param {ExampleMode} mode\r\n\t */\r\n\tconstructor(code, script, mode) {\r\n\t\tthis.code = code;\r\n\t\tthis.script = script;\r\n\t\tthis.mode = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateElement(\"pre\", {}, this.code)\r\n\t\t);\r\n\r\n\t\tlet runButton = createElement(\"button\", { class: \"accent-button\" });\r\n\t\trunButton.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"accent-button-icon\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>Run Example';\r\n\r\n\t\tparent.append(runButton);\r\n\r\n\t\trunButton.onclick = () => {\r\n\t\t\tlet iframe = createElement(\"iframe\", { src: \"player\", width: \"100%\", height: \"100%\" });\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet closeButton;\r\n\t\t\tif (this.mode === \"nogui\") {\r\n\t\t\t\tcloseButton = createElement(\"button\", { class: \"accent-button\" });\r\n\t\t\t\tcloseButton.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"accent-button-icon\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>Stop Example';\r\n\t\t\t} else {\r\n\t\t\t\tcloseButton = createElement(\"button\", { class: \"player-stop hidden\" });\r\n\t\t\t\tcloseButton.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"player-stop-icon\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>';\r\n\t\t\t}\r\n\r\n\t\t\tlet player = createElement(\"div\", { class: \"player\"});\r\n\r\n\t\t\tplayer.append(iframe);\r\n\r\n\t\t\tif (this.mode === \"gui\") {\r\n\t\t\t\tplayer.style.height = \"400px\";\r\n\t\t\t} else {\r\n\t\t\t\tiframe.style.display = \"none\";\r\n\r\n\t\t\t\tif (this.mode === \"console\") {\r\n\t\t\t\t\tplayer.style.height = \"200px\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet output = createElement(\"div\", { class: \"console\" });\r\n\t\t\t\t\tplayer.append(output);\r\n\r\n\t\t\t\t\t// To receive the \"print\" messages, we add a separate listener to each event.\r\n\t\t\t\t\t// This is a lazy implementation, but it works fine in practice...\r\n\t\t\t\t\tasync function logLoop() {\r\n\t\t\t\t\t\tlet line = await waitForMessage(\"print\", iframe);\r\n\r\n\t\t\t\t\t\tif (line) {\r\n\t\t\t\t\t\t\toutput.append(createElement(\"div\", {}, line));\r\n\t\t\t\t\t\t\toutput.scrollTop = 9999;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlogLoop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlogLoop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tplayer.append(closeButton);\r\n\r\n\t\t\trunButton.replaceWith(player);\r\n\r\n\t\t\t// Send script once the iframe is ready.\r\n\t\t\twaitForMessage(\"ready\", iframe).then(() => {\r\n\t\t\t\tiframe.contentWindow.postMessage({ type: \"script\", data: this.script });\r\n\r\n\t\t\t\t// Handle stopping.\r\n\t\t\t\tcloseButton.classList.remove(\"hidden\");\r\n\t\t\t\tcloseButton.onclick = () => {\r\n\t\t\t\t\tiframe.src = \"about:blank\";\r\n\t\t\t\t\tplayer.replaceWith(runButton);\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\t// Wait for iframe to be removed.\r\n\t\t\t// We need to remove an event listeners to prevent memory leak!\r\n\t\t\tlet interval = setInterval(() => {\r\n\t\t\t\tif (!document.contains(iframe)) {\r\n\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\tclearWaitingMessages(iframe);\r\n\t\t\t\t\tiframe = null;\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {HTMLScriptElement} e\r\n\t */\r\n\tstatic fromElement(e) {\r\n\t\tlet code = normalizeCode(e.text);\r\n\t\tlet tags = e.dataset.tag?.split(/\\s+/) ?? [];\r\n\r\n\t\t/** @type {ExampleMode} */\r\n\t\tlet mode = \"gui\";\r\n\t\tif (tags.includes(\"nogui\")) mode = \"nogui\";\r\n\t\tif (tags.includes(\"console\")) mode = \"console\";\r\n\r\n\t\tlet script = code;\r\n\t\tif (tags.includes(\"loopafter\")) {\r\n\t\t\tscript += \"\\nGame.begin {}\";\r\n\t\t} else if (!code.includes(\"Game.begin\") && !tags.includes(\"noloop\")) {\r\n\t\t\tscript = \"Game.begin {\\n\";\r\n\t\t\tif (mode === \"gui\" && !tags.includes(\"noclear\")) script += \"Game.clear()\\n\";\r\n\t\t\tscript += code + \"\\n\";\r\n\t\t\tif (tags.includes(\"once\")) script += \"Game.quit()\\n\";\r\n\t\t\tscript += \"}\";\r\n\t\t}\r\n\r\n\t\treturn new Example(code, script, mode);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} rawCode\r\n */\r\nfunction normalizeCode(rawCode) {\r\n\twhile (rawCode[0] === \"\\n\" || rawCode[0] === \"\\r\") {\r\n\t\trawCode = rawCode.slice(1);\r\n\t}\r\n\r\n\tlet result = /^\\s+/.exec(rawCode);\r\n\t\r\n\tlet code;\r\n\tif (result) {\r\n\t\tcode = (\"\\n\" + rawCode).replaceAll(\"\\n\" + result[0], \"\\n\");\r\n\t} else {\r\n\t\tcode = rawCode;\r\n\t}\r\n\r\n\tcode = code.trim();\r\n\r\n\treturn code;\r\n}\r\n\r\n\r\nlet CLS_CLASS = \"sg-class\";\r\nlet CLS_PROPERTY = \"sg-property\";\r\nlet CLS_PARAMETER = \"sg-parameter\";\r\nlet CLS_TYPE = \"sg-type\";\r\n\r\nclass Signature {\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateElement(\"a\", { href: \"#\" + this.signature, class: \"permalink\" }, \"#\"),\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.signature === title;\r\n\t}\r\n}\r\n\r\nSignature.prototype.signature = \"\";\r\n\r\n/** @type {string[]} */\r\nSignature.prototype.keywords = [];\r\n\r\n/**\r\n * @param {string} type\r\n */\r\nfunction compoundTypeToHTML(type) {\r\n\tlet r = type.split(/((?:\"[^\"]+\")|[a-zA-Z]+)/);\r\n\r\n\tlet parent = createElement(\"span\", { class: CLS_TYPE });\r\n\r\n\tr.forEach((part, i) => {\r\n\t\tif (i % 2 === 0 || part[0] === '\"') {\r\n\t\t\tparent.append(part);\r\n\t\t} else {\r\n\t\t\tparent.append(createAPILinkText(part, part));\r\n\t\t}\r\n\t});\r\n\r\n\treturn parent;\r\n}\r\n\r\n/**\r\n * @param {string} text\r\n * @param {string} title\r\n * @param {string} [className]\r\n */\r\nfunction createAPILinkText(text, title, className) {\r\n\tif (title === \"this\") {\r\n\t\treturn createElement(\"span\", { class: CLS_TYPE }, text);\r\n\t}\r\n\r\n\tlet fullClass = \"no-underline\";\r\n\tif (className) {\r\n\t\tfullClass += \" \" + className;\r\n\t}\r\n\r\n\tif (title === \"null\") {\r\n\t\ttitle = \"Null\";\r\n\t}\r\n\r\n\tlet a = createElement(\"a\", { class: fullClass, href: \"#\" + title }, text);\r\n\r\n\tlet section = sections.find(section => section.matchesTitle(title));\r\n\tif (section && section.summary) {\r\n\t\ta.title = section.summary;\r\n\t}\r\n\r\n\treturn a;\r\n}\r\n\r\n\r\nclass InfoSignature extends Signature {\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {string} type\r\n\t */\r\n\tconstructor(name, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = name;\r\n\t\tthis.keywords = [ name.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tlet cls = \"\";\r\n\t\tif (this.type === \"type\") {\r\n\t\t\tcls = CLS_TYPE;\r\n\t\t}\r\n\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.name, this.name, cls)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ClassSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {string|null} superClass\r\n\t */\r\n\tconstructor(className, superClass) {\r\n\t\tsuper();\r\n\r\n\t\tthis.name = className;\r\n\t\tthis.superClass = superClass;\r\n\t\tthis.signature = className;\r\n\t\tthis.keywords = [ className.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.name, this.name, CLS_CLASS)\r\n\t\t);\r\n\r\n\t\tif (this.superClass) {\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { style: \"opacity: 0.6; margin-left: 0.2em;\" }, [\r\n\t\t\t\t\t\" is \",\r\n\t\t\t\t\tcreateAPILinkText(this.superClass, this.superClass, CLS_CLASS)\r\n\t\t\t\t])\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass PrefixOperatorSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {string} operator\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, operator, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = className;\r\n\t\tthis.operator = operator;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = operator + uncapitalize(className);\r\n\t\tthis.keywords = [ className.toLowerCase(), operator ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.className === title || this.operator === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(this.operator, this.signature, CLS_TYPE),\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className), this.className, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tif (this.type) {\r\n\t\t\tparent.append(\r\n\t\t\t\t\": \",\r\n\t\t\t\tcompoundTypeToHTML(this.type),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass InfixOperatorSignature extends Signature {\r\n\t/**\r\n\t * @param {string} cls1\r\n\t * @param {string} cls2\r\n\t * @param {string} returnType\r\n\t * @param {string} operator\r\n\t */\r\n\tconstructor(cls1, cls2, returnType, operator) {\r\n\t\tsuper();\r\n\r\n\t\tthis.className1 = cls1;\r\n\t\tthis.className2 = cls2;\r\n\t\tthis.returnType = returnType;\r\n\t\tthis.operator = operator;\r\n\t\tthis.signature = uncapitalize(cls1) + operator + uncapitalize(cls2);\r\n\t\tthis.keywords = [ cls1.toLowerCase(), cls2.toLowerCase(), operator ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.className1 === title || this.className2 === title || this.operator === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className1), this.className1, CLS_CLASS),\r\n\t\t\t\" \" + this.operator + \" \",\r\n\t\t\tcreateAPILinkText(uncapitalize(this.className2), this.className2, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tif (this.returnType) {\r\n\t\t\tparent.append(\r\n\t\t\t\t\" ⇒ \",\r\n\t\t\t\tcompoundTypeToHTML(this.returnType),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} className\r\n * @param {boolean} isStatic \r\n */\r\nfunction correctClassCase(className, isStatic) {\r\n\treturn isStatic ? className : uncapitalize(className);\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent\r\n * @param {string} className\r\n * @param {boolean} isStatic\r\n * @param {string} methodName\r\n * @param {string} signature\r\n */\r\nfunction addClassAndMethodNameSignature(parent, className, isStatic, methodName, signature) {\r\n\tparent.append(\r\n\t\tcreateAPILinkText(correctClassCase(className, isStatic), className, CLS_CLASS),\r\n\t\t\".\",\r\n\t\tmethodName,\r\n\t);\r\n}\r\n\r\n/**\r\n * @param {ParentNode} parent\r\n * @param {string|null} type\r\n */\r\nfunction addReturnType(parent, type) {\r\n\tif (type) {\r\n\t\tparent.append(\r\n\t\t\t\": \",\r\n\t\t\tcompoundTypeToHTML(type),\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass PropertySignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {string} propertyName\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, isStatic, propertyName, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.property = propertyName;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \".\" + propertyName;\r\n\t\tthis.keywords = [ className.toLowerCase(), propertyName.toLowerCase() ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\taddClassAndMethodNameSignature(parent, this.class, this.isStatic, this.property, this.signature);\r\n\t\taddReturnType(parent, this.type);\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass MethodSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {string} methodName\r\n\t * @param {Parameter[]} parameters\r\n\t * @param {string|null} returnType\r\n\t */\r\n\tconstructor(className, isStatic, methodName, parameters, returnType) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.method = methodName;\r\n\t\tthis.parameters = parameters;\r\n\t\tthis.returnType = returnType;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \".\" + methodName + \"(\" + parameters.filter(p => !p.name.endsWith(\"...\")).map(() => \"_\").join(\",\") + \")\";\r\n\t\tthis.keywords = [ className.toLowerCase(), methodName.toLowerCase() ];\r\n\t\tfor (let param of parameters) {\r\n\t\t\tthis.keywords.push(param.name.toLowerCase());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\taddClassAndMethodNameSignature(parent, this.class, this.isStatic, this.method, this.signature);\r\n\r\n\t\tparent.append(\"(\");\r\n\r\n\t\tthis.parameters.forEach((param, i) => {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tparent.append(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { class: CLS_PARAMETER }, param.name),\r\n\t\t\t);\r\n\r\n\t\t\tif (param.type) {\r\n\t\t\t\tparent.append(\r\n\t\t\t\t\t\": \",\r\n\t\t\t\t\tcompoundTypeToHTML(param.type),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparent.append(\")\");\r\n\r\n\t\taddReturnType(parent, this.returnType);\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass SubscriptSignature extends Signature {\r\n\t/**\r\n\t * @param {string} className\r\n\t * @param {boolean} isStatic\r\n\t * @param {boolean} isSetter\r\n\t * @param {Parameter[]} parameters\r\n\t * @param {string|null} type\r\n\t */\r\n\tconstructor(className, isStatic, isSetter, parameters, type) {\r\n\t\tsuper();\r\n\r\n\t\tthis.class = className;\r\n\t\tthis.isStatic = isStatic;\r\n\t\tthis.isSetter = isSetter;\r\n\t\tthis.parameters = parameters;\r\n\t\tthis.type = type;\r\n\t\tthis.signature = correctClassCase(className, isStatic) + \"[\" + parameters.map(() => \"_\").join(\",\") + \"]\";\r\n\t\tif (isSetter) {\r\n\t\t\tthis.signature += \"=(_)\";\r\n\t\t}\r\n\t\tthis.keywords = [ className.toLowerCase() ];\r\n\t\tfor (let param of parameters) {\r\n\t\t\tthis.keywords.push(param.name.toLowerCase());\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} title\r\n\t */\r\n\tmatchesTitle(title) {\r\n\t\treturn this.class === title || super.matchesTitle(title);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ParentNode} parent \r\n\t */\r\n\ttoHTML(parent) {\r\n\t\tparent.append(\r\n\t\t\tcreateAPILinkText(correctClassCase(this.class, this.isStatic), this.class, CLS_CLASS),\r\n\t\t);\r\n\r\n\t\tparent.append(\"[\");\r\n\r\n\t\tthis.parameters.forEach((param, i) => {\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tparent.append(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tparent.append(\r\n\t\t\t\tcreateElement(\"span\", { class: CLS_PARAMETER }, param.name),\r\n\t\t\t);\r\n\r\n\t\t\tif (param.type) {\r\n\t\t\t\tparent.append(\r\n\t\t\t\t\t\": \",\r\n\t\t\t\t\tcompoundTypeToHTML(param.type),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tparent.append(this.isSetter ? \"] = \" : \"]: \");\r\n\r\n\t\tparent.append(compoundTypeToHTML(this.type || \"any\"));\r\n\r\n\t\tsuper.toHTML(parent);\r\n\t}\r\n}\r\n\r\nclass Parameter {\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {string} type\r\n\t */\r\n\tconstructor(name, type) {\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n * @param {string|null} superClass\r\n * @returns {Signature}\r\n */\r\nfunction compileSignature(s, superClass) {\r\n\tif (/^[a-zA-Z0-9]+$/.test(s)) {\r\n\t\treturn new ClassSignature(s, superClass);\r\n\t}\r\n\r\n\tlet execOperator = /^([^ a-zA-Z0-9]+) ?([a-zA-Z0-9]+)/.exec(s);\r\n\tif (execOperator) {\r\n\t\tlet operator = execOperator[1];\r\n\t\tlet cls = capitalize(execOperator[2]);\r\n\r\n\t\ts = s.slice(execOperator[0].length);\r\n\t\tlet colon = s.indexOf(\":\");\r\n\t\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\treturn new PrefixOperatorSignature(cls, operator, type);\r\n\t}\r\n\t\r\n\texecOperator = /^([a-zA-Z0-9]+) (\\S+) ([a-zA-Z0-9]+)/.exec(s);\r\n\tif (execOperator) {\r\n\t\tlet cls1 = capitalize(execOperator[1]);\r\n\t\tlet operator = execOperator[2];\r\n\t\tlet cls2 = capitalize(execOperator[3]);\r\n\r\n\t\ts = s.slice(execOperator[0].length);\r\n\t\tlet colon = s.indexOf(\":\");\r\n\t\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\treturn new InfixOperatorSignature(cls1, cls2, type, operator);\r\n\t}\r\n\r\n\tlet b = compileMethodSignature(s, true, \"(\", \")\");\r\n\tif (b) return b;\r\n\r\n\tb = compileMethodSignature(s, false, \"[\", \"]\");\r\n\tif (b) return b;\r\n\r\n\tthrow Error(\"invalid signature: \" + s);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n * @param {boolean} hasName\r\n * @param {string} openSymbol\r\n * @param {string} closeSymbol\r\n * @returns {Signature}\r\n */\r\nfunction compileMethodSignature(s, hasName, openSymbol, closeSymbol) {\r\n\tlet nameEnd = s.indexOf(hasName ? \".\" : openSymbol);\r\n\tif (nameEnd < 0) return null;\r\n\r\n\tlet className = s.slice(0, nameEnd);\r\n\ts = s.slice(hasName ? nameEnd + 1 : nameEnd);\r\n\r\n\tlet isStatic = /^[A-Z]/.test(className);\r\n\r\n\tclassName = capitalize(className);\r\n\r\n\tlet open = s.indexOf(openSymbol);\r\n\tif (open >= 0) {\r\n\t\tlet method = s.slice(0, open);\r\n\r\n\t\tlet close = s.lastIndexOf(closeSymbol);\r\n\t\tif (close < 0) throw Error(\"missing closing \" + closeSymbol);\r\n\r\n\t\tlet params = [];\r\n\t\tlet paramParts = s.slice(open + 1, close).split(/,\\s*/);\r\n\t\tif (paramParts.length !== 1 || paramParts[0].length > 0) {\r\n\t\t\tfor (let part of paramParts) {\r\n\t\t\t\tlet colon = part.indexOf(\":\");\r\n\t\t\t\tlet name = colon < 0 ? part : part.slice(0, colon);\r\n\t\t\t\tlet type = colon < 0 ? null : part.slice(colon + 1).trim();\r\n\t\t\t\tparams.push(new Parameter(name, type));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (method) {\r\n\t\t\tlet colon = s.indexOf(\":\", close);\r\n\t\t\tlet returnType = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\t\t\treturn new MethodSignature(className, isStatic, method, params, returnType);\r\n\t\t} else {\r\n\t\t\tlet isSetter = false;\r\n\t\t\tlet colon = s.indexOf(\":\", close);\r\n\t\t\tif (colon < 0) {\r\n\t\t\t\tcolon = s.indexOf(\"=\", close);\r\n\t\t\t\tif (colon >= 0) isSetter = true;\r\n\t\t\t}\r\n\t\t\tlet returnType = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\t\t\t\r\n\t\t\treturn new SubscriptSignature(className, isStatic, isSetter, params, returnType);\r\n\t\t}\r\n\t}\r\n\r\n\tlet colon = s.indexOf(\":\");\r\n\tlet property = colon < 0 ? s : s.slice(0, colon);\r\n\tlet type = colon < 0 ? null : s.slice(colon + 1).trim();\r\n\r\n\treturn new PropertySignature(className, isStatic, property, type);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n */\r\nfunction capitalize(s) {\r\n\treturn s[0].toUpperCase() + s.slice(1);\r\n}\r\n\r\n/**\r\n * @param {string} s\r\n */\r\nfunction uncapitalize(s) {\r\n\treturn s[0].toLowerCase() + s.slice(1);\r\n}\r\n\r\n\r\n/** @type {Section[]} */\r\nexport let sections = [];\r\n\r\nexport let sectionsPromise = loadDocs();\r\n\r\n/**\r\n * @param {string} search\r\n * @returns {Section[]}\r\n */\r\nexport function searchSeactions(search) {\r\n\tsearch = search.trim().toLowerCase();\r\n\r\n\t/** @type {{ score: number, section: Section }[]} */\r\n\tlet matches = [];\r\n\r\n\tfor (let section of sections) {\r\n\t\tlet score = section.searchScore(search);\r\n\r\n\t\tif (score > 0) {\r\n\t\t\tmatches.push({ score: score, section: section });\r\n\t\t}\r\n\t}\r\n\r\n\tmatches.sort((a, b) => b.score - a.score);\r\n\r\n\treturn matches.map(match => match.section);\r\n}\r\n\r\n/**\r\n * \r\n * @param {HTMLElement} parentNode\r\n * @param {VirtualNode[]} nodes\r\n */\r\nfunction instantiateVirtualNodes(parentNode, nodes) {\r\n\tfor (let node of nodes) {\r\n\t\tif (node instanceof Element) {\r\n\t\t\tparentNode.append(node);\r\n\t\t} else if (Array.isArray(node)) {\r\n\t\t\tinstantiateVirtualNodes(parentNode, nodes);\r\n\t\t} else {\r\n\t\t\tnode.toHTML(parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @typedef {object} ToHTML\r\n * @property {(parent: HTMLElement) => void} toHTML\r\n */\r\n\r\n/**\r\n * @typedef {HTMLElement|ToHTML|VirtualNodes} VirtualNode\r\n */\r\n/**\r\n * @typedef {VirtualNode[]} VirtualNodes\r\n */\r\n/**\r\n * @typedef {\"gui\"|\"nogui\"|\"console\"} ExampleMode\r\n */\r\n","\r\n/**\r\n * @param {string} [title]\r\n */\r\nexport function navigateTo(title) {\r\n\tif (title) {\r\n\t\tlocation.hash = \"#\" + title;\r\n\t} else {\r\n\t\thistory.pushState(null, null, \" \");\r\n\r\n\t\tdispatchEvent(new Event(\"hashchange\"));\r\n\t}\r\n}\r\n","import \"./theme.js\";\r\nimport \"./docs.js\";\r\nimport { clearElement, createElement, getElement } from \"./html.js\";\r\nimport { searchSeactions, sections, sectionsPromise } from \"./docs.js\";\r\nimport { navigateTo } from \"./navigation.js\";\r\n\r\nlet searchForm = /** @type {HTMLFormElement} */(getElement(\"search-form\"));\r\nlet searchInput = /** @type {HTMLInputElement} */(getElement(\"search\"));\r\nlet mainContainer = document.querySelector(\"main\");\r\n\r\n/**\r\n * @param {SubmitEvent} event\r\n */\r\nsearchForm.onsubmit = (event) => {\r\n\tevent.preventDefault();\r\n\r\n\tlet searchValue = searchInput.value.trim();\r\n\r\n\tif (searchValue) {\r\n\t\tnavigateTo(\"~\" + searchValue);\r\n\t} else {\r\n\t\tnavigateTo();\r\n\t}\r\n};\r\n\r\nsectionsPromise.then(() => {\r\n\tnavigateFromURL();\r\n});\r\n\r\nfunction showHome() {\r\n\tclearElement(mainContainer);\r\n\r\n\tsections[0].toHTML(mainContainer);\r\n}\r\n\r\ngetElement(\"title-link\").onclick = (event) => {\r\n\tif (!event.ctrlKey && !event.metaKey && !event.shiftKey) {\r\n\t\tevent.preventDefault();\r\n\t\tnavigateTo();\r\n\t}\r\n};\r\n\r\naddEventListener(\"hashchange\", (ev) => {\r\n\tnavigateFromURL();\r\n});\r\n\r\nfunction navigateFromURL() {\r\n\tlet title = location.hash.slice(1);\r\n\r\n\tif (title) {\r\n\t\ttitle = decodeURIComponent(title);\r\n\r\n\t\tif (title[0] === \"~\") {\r\n\t\t\tsearch(title.slice(1));\r\n\r\n\t\t\tdocument.title = \"Sock | \" + title + \" (search)\";\r\n\t\t} else {\r\n\t\t\tlet matchingSections = sections.filter(section => section.matchesTitle(title));\r\n\t\t\r\n\t\t\tclearElement(mainContainer);\r\n\t\t\r\n\t\t\tif (matchingSections.length > 0) {\r\n\t\t\t\tfor (let section of matchingSections) {\r\n\t\t\t\t\tsection.toHTML(mainContainer);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmainContainer.append(\r\n\t\t\t\t\tcreateElement(\"p\", {}, `Could not find information about \"${title}\".`)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tdocument.title = \"Sock | \" + title;\r\n\t\t}\r\n\t} else {\r\n\t\tshowHome();\r\n\r\n\t\tdocument.title = \"Sock\";\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} search\r\n */\r\nfunction search(search) {\r\n\tsearchInput.value = search;\r\n\r\n\tclearElement(mainContainer);\r\n\r\n\tlet matches = searchSeactions(search);\r\n\r\n\tif (matches.length === 0) {\r\n\t\tmainContainer.append(`No items match search \"${search}\".`);\r\n\t} else {\r\n\t\tfor (let match of matches) {\r\n\t\t\tmatch.toHTML(mainContainer);\r\n\t\t}\r\n\t}\r\n}\r\n"],"names":["getElement","id","document","getElementById","setElementClass","element","className","enabled","classList","add","remove","createElement","tag","attributes","nodes","name","value","startsWith","setAttribute","withAttributes","parent","Array","isArray","node","append","appendNodes","clearElement","el","innerHTML","curr","LOCAL_STORAGE_KEY","savedJSON","localStorage","getItem","JSON","parse","error","console","Object","assign","persistence","iconLight","iconDark","isLightTheme","setIsLightTheme","isLight","documentElement","onclick","p","key","setItem","stringify","updatePersistence","contains","waitingMessages","waitForMessage","type","iframe","Promise","resolve","reject","push","addEventListener","event","data","msgType","arg","stillWaiting","callNow","f","contentWindow","source","Section","constructor","baseElement","this","summary","dataset","h2s","querySelectorAll","signatures","from","map","h2","title","textContent","superClass","super","InfoSignature","s","test","ClassSignature","execOperator","exec","operator","cls","capitalize","colon","slice","length","indexOf","trim","PrefixOperatorSignature","cls1","cls2","InfixOperatorSignature","b","compileMethodSignature","Error","compileSignature","tags","split","fromHtml","find","HTMLParagraphElement","parentNode","child","children","HTMLScriptElement","example","Example","fromElement","HTMLDetailsElement","detailNodes","details","VirtualElement","HTMLPreElement","normalizeCode","toHTML","section","signature","instantiateVirtualNodes","matchesTitle","some","searchScore","search","toLowerCase","includes","keyword","keywords","code","script","mode","runButton","class","closeButton","src","width","height","player","style","display","output","async","logLoop","line","scrollTop","replaceWith","then","postMessage","interval","setInterval","clearInterval","filter","msg","clearWaitingMessages","static","e","text","rawCode","result","replaceAll","CLS_CLASS","CLS_PARAMETER","CLS_TYPE","Signature","href","compoundTypeToHTML","r","forEach","part","i","createAPILinkText","fullClass","a","sections","prototype","uncapitalize","returnType","className1","className2","correctClassCase","isStatic","addClassAndMethodNameSignature","methodName","addReturnType","PropertySignature","propertyName","property","MethodSignature","parameters","method","endsWith","join","param","SubscriptSignature","isSetter","Parameter","hasName","openSymbol","closeSymbol","nameEnd","open","close","lastIndexOf","params","paramParts","toUpperCase","sectionsPromise","response","fetch","tempDiv","html","content","log","loadDocs","Element","navigateTo","location","hash","history","pushState","dispatchEvent","Event","searchForm","searchInput","mainContainer","querySelector","navigateFromURL","decodeURIComponent","matches","score","sort","match","searchSeactions","matchingSections","onsubmit","preventDefault","searchValue","ctrlKey","metaKey","shiftKey","ev"],"mappings":"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"}