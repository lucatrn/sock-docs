!function(){"use strict";function e(e){return document.getElementById(e)}function t(e,t,s){s?e.classList.add(t):e.classList.remove(t)}function s(e,t,s){let n=document.createElement(e);return t&&function(e,t){for(let s in t){let n=t[s];s.startsWith("on")?e[s]=n:!0===n?e.setAttribute(s,""):null==n||!1===n||e.setAttribute(s,n)}}(n,t),function(e,t){if(t)if(Array.isArray(t))for(let s of t)e.append(s);else e.append(t)}(n,s),n}function n(e){e.innerHTML=""}let i,r="sock_docs",a=localStorage.getItem(r);if(a)try{i=JSON.parse(a)}catch(e){console.error(e)}i=Object.assign({},{},i);let o=i;let l=e("theme-toggle-icon-light"),c=e("theme-toggle-icon-dark"),h=e("theme-toggle-state"),p=!1;function u(e){p=e,t(l,"hidden",!e),t(c,"hidden",e),t(document.documentElement,"light",e),t(document.documentElement,"dark",!e),h.textContent=e?"Light":"Dark"}e("theme-toggle").onclick=()=>{u(!p),function(e){for(let t in e)i[t]=e[t];localStorage.setItem(r,JSON.stringify(i))}({isLight:p})},u(o.isLight??document.documentElement.classList.contains("light"));let d=[];function m(e,t){return new Promise(((s,n)=>{s.type=e,s.iframe=t,d.push(s)}))}addEventListener("message",(e=>{let t=e.data;if(t&&"object"==typeof t){let s=t.type;if(s){let n=t.data,i=[],r=[];for(let t of d)t.type!==s||t.iframe&&t.iframe.contentWindow!==e.source?i.push(t):r.push(t);d=i;for(let e of r)e(n)}}}));class f{constructor(e){this.summary=e.dataset.summary;let t=e.querySelectorAll("h2");this.signatures=Array.from(t).map((e=>{let t=e.textContent,s=e.dataset.type,n=e.dataset.super;return e.remove(),s?new v(t,s):function(e,t){if(/^[a-zA-Z0-9]+$/.test(e))return new S(e,t);let s=/^([^ a-zA-Z0-9]+) ?([a-zA-Z0-9]+)/.exec(e);if(s){let t=s[1],n=W(s[2]),i=(e=e.slice(s[0].length)).indexOf(":"),r=i<0?null:e.slice(i+1).trim();return new E(n,t,r)}if(s=/^([a-zA-Z0-9]+) (\S+) ([a-zA-Z0-9]+)/.exec(e),s){let t=W(s[1]),n=s[2],i=W(s[3]),r=(e=e.slice(s[0].length)).indexOf(":"),a=r<0?null:e.slice(r+1).trim();return new A(t,i,a,n)}let n=G(e,!0,"(",")");if(n)return n;if(n=G(e,!1,"[","]"),n)return n;throw Error("invalid signature: "+e)}(t,n)}));let s=e.dataset.tag;if(this.tags=s?s.split(/\s+/):[],this.nodes=[],this.fromHtml(e,this.nodes),!this.summary){let e=this.nodes.find((e=>e instanceof HTMLParagraphElement));e&&(this.summary=e.textContent)}}fromHtml(e,t){for(let s of Array.from(e.children))if(s instanceof HTMLScriptElement){let e=w.fromElement(s);t.push(e)}else if(s instanceof HTMLDetailsElement){let e=[];this.fromHtml(s,e);let n=new g("details",{},e);t.push(n)}else s instanceof HTMLPreElement&&(s.textContent=L(s.textContent)),t.push(s)}toHTML(e){let t=s("section");for(let e of this.signatures){let n=s("h2");e.toHTML(n),t.append(n)}_(t,this.nodes),e.append(t)}matchesTitle(e){return this.signatures.some((t=>t&&t.matchesTitle(e)))}searchScore(e){for(let t of this.signatures){let s=t.signature.toLowerCase();if(s===e)return 7;if(s.startsWith(e))return 6;if(s.includes(e))return 5;for(let s of t.keywords)if(s.includes(e))return 4}for(let t of this.tags){if(t===e)return 3;if(t.includes(e))return 2}return 0}}class g{constructor(e,t,s){this.tag=e,this.attributes=t||{},this.nodes=s||[]}toHTML(e){let t=s(this.tag,this.attributes);_(t,this.nodes),e.append(t)}}const y='<span class="hidden">Play example</span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>';class w{constructor(e,t,s){this.code=e,this.script=t,this.mode=s}toHTML(e){let t=s("button",{class:"play-button"});t.innerHTML=y;let n=s("div",{class:"code-player"},[s("pre",{},this.code),t]);e.append(n);let i=()=>{t.innerHTML='<span class="hidden">Stop example</span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',t.onclick=null;let r=s("iframe",{src:"player",width:"100%",height:"100%"}),a=s("div",{class:"player"},r);if("gui"===this.mode)a.style.height="400px";else if(r.style.display="none","console"===this.mode){a.style.height="200px";let l=s("div",{class:"console"});async function c(){let e=await m("print",r);e&&(l.append(s("div",{},e)),l.scrollTop=9999,c())}a.append(l),c()}e.insertBefore(a,n.nextSibling),m("ready",r).then((()=>{r.contentWindow.postMessage({type:"script",data:this.script}),t.onclick=()=>{r.src="about:blank",a.remove(),t.onclick=i,t.innerHTML=y}}));let o=setInterval((()=>{document.contains(r)||(clearInterval(o),function(e){e?d=d.filter((t=>t.iframe!==e)):d.length=0}(r),r=null)}),1e3)};t.onclick=i}static fromElement(e){let t=L(e.text),s=e.dataset.tag?.split(/\s+/)??[],n="gui";s.includes("nogui")&&(n="nogui"),s.includes("console")&&(n="console");let i=t;return s.includes("loopafter")?i+="\nGame.begin {}":t.includes("Game.begin")||s.includes("noloop")||(i="Game.begin {\n","gui"!==n||s.includes("noclear")||(i+="Game.clear()\n"),i+=t+"\n",s.includes("once")&&(i+="Game.quit()\n"),i+="}"),new w(t,i,n)}}function L(e){for(;"\n"===e[0]||"\r"===e[0];)e=e.slice(1);let t,s=/^\s+/.exec(e);return t=s?("\n"+e).replaceAll("\n"+s[0],"\n"):e,t=t.trim(),t}let T="sg-class",x="sg-parameter",k="sg-type";class H{toHTML(e){e.append(s("a",{href:"#"+this.signature,class:"permalink"},"#"))}matchesTitle(e){return this.signature===e}}function M(e){let t=e.split(/((?:"[^"]+")|[a-zA-Z]+)/),n=s("span",{class:k});return t.forEach(((e,t)=>{t%2==0||'"'===e[0]?n.append(e):n.append(C(e,e))})),n}function C(e,t,n){if("this"===t)return s("span",{class:k},e);let i="no-underline";n&&(i+=" "+n),"null"===t&&(t="Null");let r=s("a",{class:i,href:"#"+t},e),a=D.find((e=>e.matchesTitle(t)));return a&&a.summary&&(r.title=a.summary),r}H.prototype.signature="",H.prototype.keywords=[];class v extends H{constructor(e,t){super(),this.name=e,this.type=t,this.signature=e,this.keywords=[e.toLowerCase()]}toHTML(e){let t="";"type"===this.type&&(t=k),e.append(C(this.name,this.name,t))}}class S extends H{constructor(e,t){super(),this.name=e,this.superClass=t,this.signature=e,this.keywords=[e.toLowerCase()]}toHTML(e){e.append(C(this.name,this.name,T)),this.superClass&&e.append(s("span",{style:"opacity: 0.6; margin-left: 0.2em;"},[" is ",C(this.superClass,this.superClass,T)]))}}class E extends H{constructor(e,t,s){super(),this.className=e,this.operator=t,this.type=s,this.signature=t+B(e),this.keywords=[e.toLowerCase(),t]}matchesTitle(e){return this.className===e||this.operator===e||super.matchesTitle(e)}toHTML(e){e.append(C(this.operator,this.signature,k),C(B(this.className),this.className,T)),this.type&&e.append(": ",M(this.type)),super.toHTML(e)}}class A extends H{constructor(e,t,s,n){super(),this.className1=e,this.className2=t,this.returnType=s,this.operator=n,this.signature=B(e)+n+B(t),this.keywords=[e.toLowerCase(),t.toLowerCase(),n]}matchesTitle(e){return this.className1===e||this.className2===e||this.operator===e||super.matchesTitle(e)}toHTML(e){e.append(C(B(this.className1),this.className1,T)," "+this.operator+" ",C(B(this.className2),this.className2,T)),this.returnType&&e.append(" â‡’ ",M(this.returnType)),super.toHTML(e)}}function b(e,t){return t?e:B(e)}function N(e,t,s,n,i){e.append(C(b(t,s),t,T),".",n)}function O(e,t){t&&e.append(": ",M(t))}class I extends H{constructor(e,t,s,n){super(),this.class=e,this.isStatic=t,this.property=s,this.type=n,this.signature=b(e,t)+"."+s,this.keywords=[e.toLowerCase(),s.toLowerCase()]}matchesTitle(e){return this.class===e||super.matchesTitle(e)}toHTML(e){N(e,this.class,this.isStatic,this.property,this.signature),O(e,this.type),super.toHTML(e)}}class Z extends H{constructor(e,t,s,n,i){super(),this.class=e,this.isStatic=t,this.method=s,this.parameters=n,this.returnType=i,this.signature=b(e,t)+"."+s+"("+n.filter((e=>!e.name.endsWith("..."))).map((()=>"_")).join(",")+")",this.keywords=[e.toLowerCase(),s.toLowerCase()];for(let e of n)this.keywords.push(e.name.toLowerCase())}matchesTitle(e){return this.class===e||super.matchesTitle(e)}toHTML(e){N(e,this.class,this.isStatic,this.method,this.signature),e.append("("),this.parameters.forEach(((t,n)=>{n>0&&e.append(", "),e.append(s("span",{class:x},t.name)),t.type&&e.append(": ",M(t.type))})),e.append(")"),O(e,this.returnType),super.toHTML(e)}}class j extends H{constructor(e,t,s,n,i){super(),this.class=e,this.isStatic=t,this.isSetter=s,this.parameters=n,this.type=i,this.signature=b(e,t)+"["+n.map((()=>"_")).join(",")+"]",s&&(this.signature+="=(_)"),this.keywords=[e.toLowerCase()];for(let e of n)this.keywords.push(e.name.toLowerCase())}matchesTitle(e){return this.class===e||super.matchesTitle(e)}toHTML(e){e.append(C(b(this.class,this.isStatic),this.class,T)),e.append("["),this.parameters.forEach(((t,n)=>{n>0&&e.append(", "),e.append(s("span",{class:x},t.name)),t.type&&e.append(": ",M(t.type))})),e.append(this.isSetter?"] = ":"]: "),e.append(M(this.type||"any")),super.toHTML(e)}}class z{constructor(e,t){this.name=e,this.type=t}}function G(e,t,s,n){let i=e.indexOf(t?".":s);if(i<0)return null;let r=e.slice(0,i);e=e.slice(t?i+1:i);let a=/^[A-Z]/.test(r);r=W(r);let o=e.indexOf(s);if(o>=0){let t=e.slice(0,o),s=e.lastIndexOf(n);if(s<0)throw Error("missing closing "+n);let i=[],l=e.slice(o+1,s).split(/,\s*/);if(1!==l.length||l[0].length>0)for(let e of l){let t=e.indexOf(":"),s=t<0?e:e.slice(0,t),n=t<0?null:e.slice(t+1).trim();i.push(new z(s,n))}if(t){let n=e.indexOf(":",s),o=n<0?null:e.slice(n+1).trim();return new Z(r,a,t,i,o)}{let t=!1,n=e.indexOf(":",s);n<0&&(n=e.indexOf("=",s),n>=0&&(t=!0));let o=n<0?null:e.slice(n+1).trim();return new j(r,a,t,i,o)}}let l=e.indexOf(":"),c=l<0?e:e.slice(0,l),h=l<0?null:e.slice(l+1).trim();return new I(r,a,c,h)}function W(e){return e[0].toUpperCase()+e.slice(1)}function B(e){return e[0].toLowerCase()+e.slice(1)}let D=[],P=async function(){let e=await fetch("docs.html"),t=await e.text(),n=s("div");n.innerHTML="<template>"+t+"</template>";let i=n.firstChild.content;return D=Array.from(i.children).map((e=>new f(e))),console.log(D),D}();function _(e,t){for(let s of t)s instanceof Element?e.append(s):Array.isArray(s)?_(e,t):s.toHTML(e)}function q(e){e?location.hash="#"+e:(history.pushState(null,null," "),dispatchEvent(new Event("hashchange")))}let K=e("search-form"),$=e("search"),J=document.querySelector("main");function U(){let e=location.hash.slice(1);if(e)if(e=decodeURIComponent(e),"~"===e[0])!function(e){$.value=e,n(J);let t=function(e){e=e.trim().toLowerCase();let t=[];for(let s of D){let n=s.searchScore(e);n>0&&t.push({score:n,section:s})}return t.sort(((e,t)=>t.score-e.score)),t.map((e=>e.section))}(e);if(0===t.length)J.append(`No items match search "${e}".`);else for(let e of t)e.toHTML(J)}(e.slice(1)),document.title="Sock | "+e+" (search)";else{let t=D.filter((t=>t.matchesTitle(e)));if(n(J),t.length>0)for(let e of t)e.toHTML(J);else J.append(s("p",{},`Could not find information about "${e}".`));document.title="Sock | "+e}else n(J),D[0].toHTML(J),document.title="Sock"}K.onsubmit=e=>{e.preventDefault();let t=$.value.trim();t?q("~"+t):q()},P.then((()=>{U()})),e("title-link").onclick=e=>{e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),q())},addEventListener("hashchange",(e=>{U()}))}();
//# sourceMappingURL=main.js.map
