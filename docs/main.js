!function(){"use strict";function t(t){return document.getElementById(t)}function e(t,e,s){s?t.classList.add(e):t.classList.remove(e)}function s(t,e,s){let n=document.createElement(t);return e&&function(t,e){for(let s in e){let n=e[s];s.startsWith("on")?t[s]=n:!0===n?t.setAttribute(s,""):null==n||!1===n||t.setAttribute(s,n)}}(n,e),function(t,e){if(e)if(Array.isArray(e))for(let s of e)t.append(s);else t.append(e)}(n,s),n}function n(t){t.innerHTML=""}let i,r="sock_docs",o=localStorage.getItem(r);if(o)try{i=JSON.parse(o)}catch(t){console.error(t)}i=Object.assign({},{},i);let a=i;let l=t("theme-toggle-icon-light"),c=t("theme-toggle-icon-dark"),h=!1;function u(t){h=t,e(l,"hidden",!t),e(c,"hidden",t),e(document.documentElement,"light",t),e(document.documentElement,"dark",!t)}t("theme-toggle").onclick=()=>{u(!h),function(t){for(let e in t)i[e]=t[e];localStorage.setItem(r,JSON.stringify(i))}({isLight:h})},u(a.isLight??document.documentElement.classList.contains("light"));let p=[];function d(t,e){return new Promise(((s,n)=>{s.type=t,s.iframe=e,p.push(s)}))}addEventListener("message",(t=>{let e=t.data;if(e&&"object"==typeof e){let s=e.type;if(s){let n=e.data,i=[],r=[];for(let e of p)e.type!==s||e.iframe&&e.iframe.contentWindow!==t.source?i.push(e):r.push(e);p=i;for(let t of r)t(n)}}}));class m{constructor(t){this.summary=t.dataset.summary;let e=t.querySelectorAll("h2");this.signatures=Array.from(e).map((t=>{let e=t.textContent,s=t.dataset.type,n=t.dataset.super;return t.remove(),s?new M(e,s):function(t,e){if(/^[a-zA-Z0-9]+$/.test(t))return new v(t,e);let s=/^([^ a-zA-Z0-9]+) ?([a-zA-Z0-9]+)/.exec(t);if(s){let e=s[1],n=Z(s[2]),i=(t=t.slice(s[0].length)).indexOf(":"),r=i<0?null:t.slice(i+1).trim();return new C(n,e,r)}if(s=/^([a-zA-Z0-9]+) (\S+) ([a-zA-Z0-9]+)/.exec(t),s){let e=Z(s[1]),n=s[2],i=Z(s[3]),r=(t=t.slice(s[0].length)).indexOf(":"),o=r<0?null:t.slice(r+1).trim();return new E(e,i,o,n)}let n=W(t,!0,"(",")");if(n)return n;if(n=W(t,!1,"[","]"),n)return n;throw Error("invalid signature: "+t)}(e,n)}));let s=t.dataset.tag;if(this.tags=s?s.split(/\s+/):[],this.nodes=[],this.fromHtml(t,this.nodes),!this.summary){let t=this.nodes.find((t=>t instanceof HTMLParagraphElement));t&&(this.summary=t.textContent)}}fromHtml(t,e){for(let s of Array.from(t.children))if(s instanceof HTMLScriptElement){let t=g.fromElement(s);e.push(t)}else if(s instanceof HTMLDetailsElement){let t=[];this.fromHtml(s,t);let n=new f("details",{},t);e.push(n)}else s instanceof HTMLPreElement&&(s.textContent=y(s.textContent)),e.push(s)}toHTML(t){let e=s("section");for(let t of this.signatures){let n=s("h2");t.toHTML(n),e.append(n)}_(e,this.nodes),t.append(e)}matchesTitle(t){return this.signatures.some((e=>e&&e.matchesTitle(t)))}searchScore(t){for(let e of this.signatures){let s=e.signature.toLowerCase();if(s===t)return 7;if(s.startsWith(t))return 6;if(s.includes(t))return 5;for(let s of e.keywords)if(s.includes(t))return 4}for(let e of this.tags){if(e===t)return 3;if(e.includes(t))return 2}return 0}}class f{constructor(t,e,s){this.tag=t,this.attributes=e||{},this.nodes=s||[]}toHTML(t){let e=s(this.tag,this.attributes);_(e,this.nodes),t.append(e)}}class g{constructor(t,e,s){this.code=t,this.script=e,this.mode=s}toHTML(t){t.append(s("pre",{},this.code));let e=s("button",{class:"accent-button"});e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accent-button-icon"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>Run Example',t.append(e),e.onclick=()=>{let t,n=s("iframe",{src:"player",width:"100%",height:"100%"});"nogui"===this.mode?(t=s("button",{class:"accent-button"}),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accent-button-icon"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Stop Example'):(t=s("button",{class:"player-stop hidden"}),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="player-stop-icon"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');let i=s("div",{class:"player"});if(i.append(n),"gui"===this.mode)i.style.height="400px";else if(n.style.display="none","console"===this.mode){i.style.height="200px";let o=s("div",{class:"console"});async function a(){let t=await d("print",n);t&&(o.append(s("div",{},t)),o.scrollTop=9999,a())}i.append(o),a()}i.append(t),e.replaceWith(i),d("ready",n).then((()=>{n.contentWindow.postMessage({type:"script",data:this.script}),t.classList.remove("hidden"),t.onclick=()=>{n.src="about:blank",i.replaceWith(e)}}));let r=setInterval((()=>{document.contains(n)||(clearInterval(r),function(t){t?p=p.filter((e=>e.iframe!==t)):p.length=0}(n),n=null)}),1e3)}}static fromElement(t){let e=y(t.text),s=t.dataset.tag?.split(/\s+/)??[],n="gui";s.includes("nogui")&&(n="nogui"),s.includes("console")&&(n="console");let i=e;return s.includes("loopafter")?i+="\nGame.begin {}":e.includes("Game.begin")||s.includes("noloop")||(i="Game.begin {\n","gui"!==n||s.includes("noclear")||(i+="Game.clear()\n"),i+=e+"\n",s.includes("once")&&(i+="Game.quit()\n"),i+="}"),new g(e,i,n)}}function y(t){for(;"\n"===t[0]||"\r"===t[0];)t=t.slice(1);let e,s=/^\s+/.exec(t);return e=s?("\n"+t).replaceAll("\n"+s[0],"\n"):t,e=e.trim(),e}let w="sg-class",L="sg-parameter",T="sg-type";class x{toHTML(t){t.append(s("a",{href:"#"+this.signature,class:"permalink"},"#"))}matchesTitle(t){return this.signature===t}}function k(t){let e=t.split(/((?:"[^"]+")|[a-zA-Z]+)/),n=s("span",{class:T});return e.forEach(((t,e)=>{e%2==0||'"'===t[0]?n.append(t):n.append(H(t,t))})),n}function H(t,e,n){if("this"===e)return s("span",{class:T},t);let i="no-underline";n&&(i+=" "+n),"null"===e&&(e="Null");let r=s("a",{class:i,href:"#"+e},t),o=G.find((t=>t.matchesTitle(e)));return o&&o.summary&&(r.title=o.summary),r}x.prototype.signature="",x.prototype.keywords=[];class M extends x{constructor(t,e){super(),this.name=t,this.type=e,this.signature=t,this.keywords=[t.toLowerCase()]}toHTML(t){let e="";"type"===this.type&&(e=T),t.append(H(this.name,this.name,e))}}class v extends x{constructor(t,e){super(),this.name=t,this.superClass=e,this.signature=t,this.keywords=[t.toLowerCase()]}toHTML(t){t.append(H(this.name,this.name,w)),this.superClass&&t.append(s("span",{style:"opacity: 0.6; margin-left: 0.2em;"},[" is ",H(this.superClass,this.superClass,w)]))}}class C extends x{constructor(t,e,s){super(),this.className=t,this.operator=e,this.type=s,this.signature=e+z(t),this.keywords=[t.toLowerCase(),e]}matchesTitle(t){return this.className===t||this.operator===t||super.matchesTitle(t)}toHTML(t){t.append(H(this.operator,this.signature,T),H(z(this.className),this.className,w)),this.type&&t.append(": ",k(this.type)),super.toHTML(t)}}class E extends x{constructor(t,e,s,n){super(),this.className1=t,this.className2=e,this.returnType=s,this.operator=n,this.signature=z(t)+n+z(e),this.keywords=[t.toLowerCase(),e.toLowerCase(),n]}matchesTitle(t){return this.className1===t||this.className2===t||this.operator===t||super.matchesTitle(t)}toHTML(t){t.append(H(z(this.className1),this.className1,w)," "+this.operator+" ",H(z(this.className2),this.className2,w)),this.returnType&&t.append(" â‡’ ",k(this.returnType)),super.toHTML(t)}}function S(t,e){return e?t:z(t)}function b(t,e,s,n,i){t.append(H(S(e,s),e,w),".",n)}function A(t,e){e&&t.append(": ",k(e))}class N extends x{constructor(t,e,s,n){super(),this.class=t,this.isStatic=e,this.property=s,this.type=n,this.signature=S(t,e)+"."+s,this.keywords=[t.toLowerCase(),s.toLowerCase()]}matchesTitle(t){return this.class===t||super.matchesTitle(t)}toHTML(t){b(t,this.class,this.isStatic,this.property,this.signature),A(t,this.type),super.toHTML(t)}}class O extends x{constructor(t,e,s,n,i){super(),this.class=t,this.isStatic=e,this.method=s,this.parameters=n,this.returnType=i,this.signature=S(t,e)+"."+s+"("+n.filter((t=>!t.name.endsWith("..."))).map((()=>"_")).join(",")+")",this.keywords=[t.toLowerCase(),s.toLowerCase()];for(let t of n)this.keywords.push(t.name.toLowerCase())}matchesTitle(t){return this.class===t||super.matchesTitle(t)}toHTML(t){b(t,this.class,this.isStatic,this.method,this.signature),t.append("("),this.parameters.forEach(((e,n)=>{n>0&&t.append(", "),t.append(s("span",{class:L},e.name)),e.type&&t.append(": ",k(e.type))})),t.append(")"),A(t,this.returnType),super.toHTML(t)}}class j extends x{constructor(t,e,s,n,i){super(),this.class=t,this.isStatic=e,this.isSetter=s,this.parameters=n,this.type=i,this.signature=S(t,e)+"["+n.map((()=>"_")).join(",")+"]",s&&(this.signature+="=(_)"),this.keywords=[t.toLowerCase()];for(let t of n)this.keywords.push(t.name.toLowerCase())}matchesTitle(t){return this.class===t||super.matchesTitle(t)}toHTML(t){t.append(H(S(this.class,this.isStatic),this.class,w)),t.append("["),this.parameters.forEach(((e,n)=>{n>0&&t.append(", "),t.append(s("span",{class:L},e.name)),e.type&&t.append(": ",k(e.type))})),t.append(this.isSetter?"] = ":"]: "),t.append(k(this.type||"any")),super.toHTML(t)}}class I{constructor(t,e){this.name=t,this.type=e}}function W(t,e,s,n){let i=t.indexOf(e?".":s);if(i<0)return null;let r=t.slice(0,i);t=t.slice(e?i+1:i);let o=/^[A-Z]/.test(r);r=Z(r);let a=t.indexOf(s);if(a>=0){let e=t.slice(0,a),s=t.lastIndexOf(n);if(s<0)throw Error("missing closing "+n);let i=[],l=t.slice(a+1,s).split(/,\s*/);if(1!==l.length||l[0].length>0)for(let t of l){let e=t.indexOf(":"),s=e<0?t:t.slice(0,e),n=e<0?null:t.slice(e+1).trim();i.push(new I(s,n))}if(e){let n=t.indexOf(":",s),a=n<0?null:t.slice(n+1).trim();return new O(r,o,e,i,a)}{let e=!1,n=t.indexOf(":",s);n<0&&(n=t.indexOf("=",s),n>=0&&(e=!0));let a=n<0?null:t.slice(n+1).trim();return new j(r,o,e,i,a)}}let l=t.indexOf(":"),c=l<0?t:t.slice(0,l),h=l<0?null:t.slice(l+1).trim();return new N(r,o,c,h)}function Z(t){return t[0].toUpperCase()+t.slice(1)}function z(t){return t[0].toLowerCase()+t.slice(1)}let G=[],B=async function(){let t=await fetch("docs.html"),e=await t.text(),n=s("div");n.innerHTML="<template>"+e+"</template>";let i=n.firstChild.content;return G=Array.from(i.children).map((t=>new m(t))),console.log(G),G}();function _(t,e){for(let s of e)s instanceof Element?t.append(s):Array.isArray(s)?_(t,e):s.toHTML(t)}function q(t){t?location.hash="#"+t:(history.pushState(null,null," "),dispatchEvent(new Event("hashchange")))}let D=t("search-form"),K=t("search"),P=document.querySelector("main");function $(){let t=location.hash.slice(1);if(t)if(t=decodeURIComponent(t),"~"===t[0])!function(t){K.value=t,n(P);let e=function(t){t=t.trim().toLowerCase();let e=[];for(let s of G){let n=s.searchScore(t);n>0&&e.push({score:n,section:s})}return e.sort(((t,e)=>e.score-t.score)),e.map((t=>t.section))}(t);if(0===e.length)P.append(`No items match search "${t}".`);else for(let t of e)t.toHTML(P)}(t.slice(1)),document.title="Sock | "+t+" (search)";else{let e=G.filter((e=>e.matchesTitle(t)));if(n(P),e.length>0)for(let t of e)t.toHTML(P);else P.append(s("p",{},`Could not find information about "${t}".`));document.title="Sock | "+t}else n(P),G[0].toHTML(P),document.title="Sock"}D.onsubmit=t=>{t.preventDefault();let e=K.value.trim();e?q("~"+e):q()},B.then((()=>{$()})),t("title-link").onclick=t=>{t.ctrlKey||t.metaKey||t.shiftKey||(t.preventDefault(),q())},addEventListener("hashchange",(t=>{$()}))}();
//# sourceMappingURL=main.js.map
